<data>
	<!-- Creation of valid GI, PS and OEBP are pre-requisites for OEDP-->

    <!-- Below are the variables for Golden Image -->
	<creategoldenimages>
		<creategoldenimage name="oedp_concurrent_gi" source="valid_source" description="Golden Image for OEDP" />
	</creategoldenimages>
	<deletegoldenimages>
		<deletegoldenimage name="oedp_concurrent_gi" />
	</deletegoldenimages>

	<!-- Below are the variables for PlanScripts -->
	<createplanscripts>
		<createplanscript description="ps_for_oedp" name="oedp_concurrent_ps" hpProvided="false" planType="deploy">
			<scriptContent content="# (C) Copyright 2015-2015 Hewlett-Packard Development Company, L.P.&#13;&#10;# Script to mount disk in libguesfs virtual appliance for personalizaiton or generalization&#13;&#10;run&#13;&#10;mount /dev/sda5 /&#13;&#10;&#13;&#10;&#13;&#10;# creating tmp dir at local filesystem&#13;&#10;!mkdir -p /tmp_dir/onetime&#13;&#10;!mkdir -p /tmp_dir/state/local&#13;&#10;&#13;&#10;# copying required files for personalization/generalization to local filesysystem&#13;&#10;-copy-out /onetime.tgz /tmp_dir&#13;&#10;-copy-out /state.tgz /tmp_dir&#13;&#10;-copy-out /boot.cfg /tmp_dir&#13;&#10;&#13;&#10;# trying to findout whether onetime.tgz will be picked up during booting or state.tgz will be picked&#13;&#10;# based on that we can process either onetime.tgz or state.tgz for personalization/generalization&#13;&#10;&#13;&#10;-!grep &quot;onetime.tgz&quot;  /tmp_dir/boot.cfg &gt;/tmp_dir/onetime_found&#13;&#10;-!grep &quot;state.tgz&quot; /tmp_dir/boot.cfg &gt; /tmp_dir/state_found&#13;&#10;# (C) Copyright 2015-2015 Hewlett-Packard Development Company, L.P.&#13;&#10;&#13;&#10;# script to personalize an ESXi image&#13;&#10;&#13;&#10;&#13;&#10;!if [ -s  &quot;/tmp_dir/onetime_found&quot; ];&#13;&#10; then&#13;&#10;cd  /tmp_dir/onetime;&#13;&#10;tar zxvf ../onetime.tgz;&#13;&#10;echo esxcli system hostname set -H &quot;@hostname:newhostname@&quot;&gt;&gt;   /tmp_dir/onetime/etc/rc.local.d/local.sh;&#13;&#10;chmod 777   /tmp_dir/onetime/etc/rc.local.d/local.sh;&#13;&#10;tar czvf ../onetime.tgz *;&#13;&#10;else&#13;&#10;cd /tmp_dir/state;&#13;&#10;tar zxvf ../state.tgz;&#13;&#10;cd /tmp_dir/state/local;&#13;&#10;tar zxvf ../local.tgz;&#13;&#10;echo esxcli system hostname set -H  &quot;@hostname:newhostname@&quot;&gt;&gt;   /tmp_dir/state/local/etc/rc.local.d/local.sh;&#13;&#10;chmod 777  /tmp_dir/state/local/etc/rc.local.d/local.sh;&#13;&#10;tar czvf ../local.tgz *;&#13;&#10;cd /tmp_dir/state;&#13;&#10;tar czvf ../state.tgz local.tgz;&#13;&#10;fi&#13;&#10;# (C) Copyright 2015-2015 Hewlett-Packard Development Company, L.P.&#13;&#10;# Script to unmount disk in libguesfs virtual appliance for personalizaiton or generalization&#13;&#10;&#13;&#10;-copy-in /tmp_dir/onetime.tgz /&#13;&#10;-copy-in  /tmp_dir/state.tgz /&#13;&#10;umount /"/>
		</createplanscript>
	</createplanscripts>
	<deleteplanscripts>
		<deleteplanscript name="oedp_concurrent_ps" />
	</deleteplanscripts>

    <!-- Below are the variables for OE BuildPlan -->
	<createoebuildplans>
		<createoebuildplan name="oedp_concurrent_oebp" description="OE Build Plan" hpProvided="false" architecture="x86_64"  oeBuildPlanType="deploy" >
			<buildStepList serialNumber="1" parameters="12" scriptUri="oedp_concurrent_ps" />
			<custAttrList name="hostname" caDescription="String" value="i3s_host" constraints= "11" />
		</createoebuildplan>
	</createoebuildplans>
	<deleteoebuildplans>
		<deleteoebuildplan name="oedp_concurrent_oebp" />
	</deleteoebuildplans>


	<!-- Below are the variables for OE Deploymentplan -->

	<createoedeploymentplans>

		<createoedeploymentplan goldenImageURI="oedp_concurrent_gi" oeBuildPlanURI="oedp_concurrent_oebp" name="oedeploymentplan_concurrent" description="All_fields" ostype="ESXi" >
			<custAttrList name="hostname" customAttributeVisibility="yes" customAttributeDescription="name of host" value="i3s_host" />
		</createoedeploymentplan>

		<createoedeploymentplan goldenImageURI="oedp_concurrent_gi" oeBuildPlanURI="oedp_concurrent_oebp" name="oedeploymentplan_concurrent1" description="Multi_CA" ostype="ESXi" >
			<custAttrList name="hostname" customAttributeVisibility="yes" customAttributeDescription="name of host" value="i3s_host" />
			<custAttrList name="IP address" customAttributeVisibility="yes" customAttributeDescription="IP address" value="10.24.1281.96" />
		</createoedeploymentplan>

		<createoedeploymentplan goldenImageURI="oedp_concurrent_gi" oeBuildPlanURI="oedp_concurrent_oebp" name="oedeploymentplan_update_concurrent" description="For_update_test"  ostype="ESXi" >
			<custAttrList name="OEDP_custname" customAttributeVisibility="yes" customAttributeDescription="Test OEDP CA" value="OEDP_Custom_Name" />
			<custAttrList name="size" customAttributeVisibility="yes" customAttributeDescription="size of oevolume" value="20"/>
		</createoedeploymentplan>

		<createoedeploymentplan goldenImageURI="oedp_concurrent_gi" oeBuildPlanURI="oedp_concurrent_oebp" name="oedeploymentplan_concurrent2" description="For_delete_test" ostype="ESXi" >
			<custAttrList name="OEDP_custname" customAttributeVisibility="yes" customAttributeDescription="Test OEDP CA" value="OEDP_Custom_Name" />
		</createoedeploymentplan>

		<createoedeploymentplan goldenImageURI="oedp_concurrent_gi" oeBuildPlanURI="oedp_concurrent_oebp" name="oedeploymentplan_concurrent3" description="For_get_test" ostype="ESXi" >
			<custAttrList name="OEDP_custname" customAttributeVisibility="yes" customAttributeDescription="Test OEDP CA" value="OEDP_Custom_Name" />
		</createoedeploymentplan>
	</createoedeploymentplans>

	<updateoedeploymentplans>
		<!-- Update Deploymentplan by goldenImageURI field -->
		<updateoedeploymentplan name="oedeploymentplan_update_concurrent" goldenImageURI="/rest/goldenimage/xyz" />
		<!-- Update Deploymentplan by oeBuildPlanURI field -->
		<updateoedeploymentplan name="oedeploymentplan_update_concurrent" oeBuildPlanURI="/rest/oebuildplan/xyz" />
		<!-- Update Deploymentplan by customAttributeDescription and ca_name field -->
		<updateoedeploymentplan name="oedeploymentplan_update_concurrent" ca_name="OEDP_CA_Name_Update" customAttributeDescription="OEDP_CA_Desc_Update"/>
		<!-- Update Deploymentplan by description -->
		<updateoedeploymentplan name="oedeploymentplan_update_concurrent" description="oedp_description_update1" />
		<!-- Update Deploymentplan by description -->
		<updateoedeploymentplan name="oedeploymentplan_update_concurrent" description="oedp_description_update2" />
		<!-- Update Deploymentplan by description -->
		<updateoedeploymentplan name="oedeploymentplan_update_concurrent" description="oedp_description_update3" />
		<!-- Update Deploymentplan by description -->
		<updateoedeploymentplan name="oedeploymentplan_concurrent2" description="oedp_description_update1" />
		<!-- Update Deploymentplan by goldenImageURI field -->
		<updateoedeploymentplan name="oedeploymentplan_update_concurrent" goldenImageURI="oedp_concurrent_gi" />
		<!-- Update Deploymentplan by oeBuildPlanURI field -->
		<updateoedeploymentplan name="oedeploymentplan_update_concurrent" oeBuildPlanURI="oedp_concurrent_oebp" />
	</updateoedeploymentplans>

	<getoedeploymentplans>
		<getoedeploymentplan name="oedeploymentplan_concurrent2" />
	</getoedeploymentplans>

	<deleteoedeploymentplans>
		<deleteoedeploymentplan name="oedeploymentplan_update_concurrent" />
		<deleteoedeploymentplan name="oedeploymentplan_concurrent" />
		<deleteoedeploymentplan name="oedeploymentplan_concurrent1" />
		<deleteoedeploymentplan name="oedeploymentplan_concurrent2" />
		<deleteoedeploymentplan name="oedeploymentplan_concurrent3" />
	</deleteoedeploymentplans>
</data>