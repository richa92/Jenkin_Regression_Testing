*** Settings ***
Documentation		Feature Test: Support dump for i3s
...
Variables 		    data_variables_sd.py

Resource            ../../../../../fusion/tests/resource/fusion_api_all_resource_files.txt

Library             Collections
Library             json
Library             OperatingSystem
Library             Selenium2Library
Library             BuiltIn
Library             FusionLibrary
Library             RoboGalaxyLibrary
Library             i3SLibrary
Variables			/robo4.2/i3s/tests/testdata/i3s_QA_testdata.py


*** Test Cases ***
#Test Specific Setup
Login to Appliance
    ${admin_credentials} =    Create Dictionary    userName=${DEFAULT_USER}
    ...												password=${DEFAULT_PASSWORD}
    Set Suite Variable    ${admin_credentials}    ${admin_credentials}
    ${Response}    ${SessionId} =    Fusion Api Login Appliance    ${fusion_IP}    ${admin_credentials}

# Create all the required Artifacts in i3s appliance
Get i3s Appliance Cluster IP and Login
    ${resp} =    Fusion Api Get i3sCluster IP
    ${i3S_IP} =    Get From Dictionary    ${resp['members'][0]}    primaryIPV4
    Log to console and logfile    ${i3S_IP}
    # Login to i3s appliance
    ${admin_credentials} =    Create Dictionary    userName=${DEFAULT_USER}
    ...												 password=${DEFAULT_PASSWORD}
    Set Suite Variable    ${admin_credentials}    ${admin_credentials}
    ${Response}    ${SessionId} =    Fusion Api Login Appliance    ${fusion_IP}    ${admin_credentials}
    I3S API LOGIN APPLIANCE    ${i3S_IP}    ${SessionId}

Create support dump without username
    ${Response} =    I3s Api Create supportdump    ${sd_body[2]}
    Should Be Equal as Strings    ${Response['status_code']}    200    msg=Failed to Create supportdump

Create support dump with encryption
    ${Response} =    I3s Api Create supportdump    ${sd_body[1]}
    Should Be Equal as Strings    ${Response['status_code']}    200    msg=Failed to Create supportdump

Download And Create support dump without encryption
    ${Response} =    I3s Api Create supportdump    ${sd_body[0]}
    Should Be Equal as Strings    ${Response['status_code']}    200    msg=Failed to Create supportdump
    ${Response1} =    I3s Api Download supportdump    ${Response['uri']}
    Should Be Equal as Strings    ${Response1['status_code']}    200    msg=Failed to download supportdump
