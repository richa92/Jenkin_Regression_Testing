*** Settings ***
Library                   FusionLibrary
Library                   RoboGalaxyLibrary
Library                   BuiltIn
Library                   robot.api.logger
Library                   Collections
Library                   OperatingSystem
#Resource                  ./../../../../Resources/api/fusion_api_resource.txt


*** Keywords ***
Wait For Appliance State To Be UPGRADE
    [Documentation]   Wait For Appliance State To Be UPGRADE
    [Arguments]       ${timeout}=20 min    ${interval}=30 s
    Wait Until Keyword Succeeds    ${timeout}    ${interval}        Appliance State Should Be UPGRADE

Wait For Appliance State To Be OK
    [Documentation]  Wait For Appliance State To Be OK
    [Arguments]      ${timeout}=20 min    ${interval}=30 s
    Wait Until Keyword Succeeds    ${timeout}    ${interval}        Appliance State Should Be OK

Appliance State Should Be UPGRADE
    [Documentation]  Appliance State Should Be UPGRADE
    ${state} =    Fusion Api Get Resource    /controller-state.json
    Log      -Appliance state: ${state['state']}  console=True
    Should Match Regexp        ${state['state']}    ((?i)UPGRADE)

Appliance State Should Be OK
    [Documentation]  Appliance State Should Be OK
    ${state} =    Fusion Api Get Resource    /controller-state.json
    Log      -Appliance state: ${state['state']}  console=True
    Should Match Regexp    ${state['state']}    ((?i)OK)
