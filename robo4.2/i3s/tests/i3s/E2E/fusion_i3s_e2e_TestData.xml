<data>
    <!-- Below are the variables for Golden Image -->

	<uploadgoldenimages>		
		<uploadgoldenimage name="GoldenImage_e2e" file="valid_file" description="Golden Image Test" />		
	</uploadgoldenimages>

	<deletegoldenimages>
		<deletegoldenimage name="GoldenImage_e2e" />		
	</deletegoldenimages>
	
	<createplanscripts>
		<createplanscript description="Valid_fields for deploy" name="ps_deploy_for_e2e_test" hpProvided="false" planType="deploy" type="PlanScript" >
			<scriptContent content="#(C) Copyright 2015-2015 Hewlett-Packard Development Company, L.P.&#10;# Script to personalize&#10;&#10;!if [ -s  &quot;onetime_found&quot; ]; &#92;&#10;then &#92;&#10;cd  onetime; &#92;&#10;tar xvpzf ../onetime.tgz; &#92;&#10;echo esxcli system hostname set -H &quot;@hostname:i3sqa1@&quot;&#62;&#62;   etc/rc.local.d/local.sh; &#92;&#10;chmod 777   etc/rc.local.d/local.sh; &#92;&#10;tar cvpzf ../onetime.tgz *; &#92;&#10;else &#92;&#10;cd state; &#92;&#10;tar xvpzf ../state.tgz; &#92;&#10;cd local; &#92;&#10;tar xvpzf ../local.tgz; &#92;&#10;mkdir -p etc/rc.local.d; &#92;&#10;echo esxcli system hostname set -H &quot;@hostname:i3sqa1@&quot;&#62;&#62;   etc/rc.local.d/local.sh; &#92;&#10;chmod 777   etc/rc.local.d/local.sh; &#92;&#10;tar cvpzf ../local.tgz *; &#92;&#10;cd ../; &#92;&#10;tar cvpzf ../state.tgz local.tgz; &#92;&#10;touch  ../state.tgz; &#92;&#10;fi"/>
		</createplanscript>			
		<createplanscript description="Mount script" name="mount_script" hpProvided="false" planType="general" type="PlanScript" >
			<scriptContent content="# (C) Copyright 2015-2015 Hewlett-Packard Development Company, L.P.&#13;&#10;# Script to mount disk in libguesfs virtual appliance for personalizaiton or generalization&#13;&#10;mount /dev/sda5 /&#13;&#10;&#13;&#10;&#13;&#10;# creating tmp dir at local filesystem&#13;&#10;!mkdir -p ./onetime&#13;&#10;!mkdir -p ./state/local&#13;&#10;&#13;&#10;# copying required files for personalization/generalization to local filesysystem&#13;&#10;-copy-out /onetime.tgz .&#13;&#10;-copy-out /state.tgz .&#13;&#10;-copy-out /boot.cfg .&#13;&#10;&#13;&#10;# trying to findout whether onetime.tgz will be picked up during booting or state.tgz will be picked&#13;&#10;# based on that we can process either onetime.tgz or state.tgz for personalization/generalization&#13;&#10;&#13;&#10;-!grep &quot;onetime.tgz&quot;  ./boot.cfg &gt;./onetime_found&#13;&#10;-!grep &quot;state.tgz&quot; ./boot.cfg &gt; ./state_found&#13;&#10;"/>
		</createplanscript>
		<createplanscript description="Umount script" name="umount_script" hpProvided="false" planType="general" type="PlanScript" >
			<scriptContent content="-copy-in onetime.tgz /&#13;&#10;-copy-in state.tgz /&#13;&#10;umount /&#13;&#10;"/>
		</createplanscript>			
	</createplanscripts>
	
	<deleteplanscripts>		
		<deleteplanscript name="ps_deploy_for_e2e_test"/>
		<deleteplanscript name="mount_script"/>
		<deleteplanscript name="umount_script"/>			
	</deleteplanscripts>
	<createoebuildplans>
		<createoebuildplan name="oebp_deploy_for_e2e_test" description="Test for Deploy" hpProvided="false" oeBuildPlanType="deploy" type="OeBuildPlan" >
			<buildStep serialNumber="1" parameters="12" planScriptUri="mount_script" />
			<buildStep serialNumber="2" parameters="12" planScriptUri="ps_deploy_for_e2e_test" />
			<buildStep serialNumber="3" parameters="12" planScriptUri="umount_script" />					
			<customAttributes name="hostname" description="i3s Hostname" value="i3shost" constraints= "11" type= "Hostname" />						
		</createoebuildplan>		
	</createoebuildplans>
	<deleteoebuildplans>		
		<deleteoebuildplan name="oebp_deploy_for_e2e_test" />		
	</deleteoebuildplans>
	<createoedeploymentplans>
		<createoedeploymentplan goldenImageURI="GoldenImage_e2e" oeBuildPlanURI="oebp_deploy_for_e2e_test" name="oedp_deploy_for_e2e_test" description="All_fields" type="OEDeploymentPlan" hpProvided="false" >
			<customAttributes name="hostname" description="i3s Hostname" value="i3shost" constraints= "11" type= "Hostname" visible= "true" />						
		</createoedeploymentplan>
	</createoedeploymentplans>
	<deleteoedeploymentplans>
		<deleteoedeploymentplan name="oedp_deploy_for_e2e_test"/>
	</deleteoedeploymentplans>		
</data>