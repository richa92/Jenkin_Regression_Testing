*** Settings ***
Resource    ../resource.txt

Test Setup      Run Keywords        Load Test Data and Open Browser
...             AND                 Log into Fusion appliance as Administrator
Test Teardown   Logout and close all browsers

Suite Setup  	Run Keywords	   Load Test Data and Open Browser
...          	AND                Log into Fusion appliance as Administrator
...          	AND                Create LIG and EG
...          	AND                Logout and close all browsers

Suite Teardown	Run Keywords	   Load Test Data and Open Browser
...          	AND                Log into Fusion appliance as Administrator
...          	AND                Delete all LIGs, EGs and Server Profile Templates
...          	AND                Logout and close all browsers

*** Variables ***
${SELENIUM_TIMEOUT}         5.0
${SELENIUM_IMPLICIT_WAIT}   0.0
${DataFile}         F1222/Regression_data.xml
${ApplianceUrl}     https://16.114.220.162
${unableToAddProfileErrMessage}			Unable to update profile template:
${connectionsErrMsg}		\n[u'Connection 1 cannot be automatically assigned to a port because either network deployment-lig2 is not assigned to a Virtual Connect interconnect, or the server hardware does not include an adapter that can access network deployment-lig2 on the Virtual Connect interconnect.\nResolution Ensure that the network is assigned to a logical interconnect group within the enclosure group and the corresponding logical interconnect within the logical enclosure, and that the server hardware type includes an adapter that can access the network.']]



*** Test Cases ***

As an Administrator I want to create an server profile template
    Fusion UI Create Server profile template	@{TestData.profiletemplates.create}
    
Edit server profile template SHT Blade server
	Fusion UI Edit Server Profile template		@{TestData.profiletemplates.change_sht}
	
Edit server profile template EG
	Fusion UI Edit Server Profile template		@{TestData.profiletemplates.change_eg}

Edit server profile template SHT and EG
	Fusion UI Edit Server Profile template		@{TestData.profiletemplates.change_eg_sht}

# This is only for C7000 
#Edit server profile template SHT DL server
	#Fusion UI Edit Server Profile template		@{TestData.profiletemplates.change_dl_sht}

# This is only for C7000
#Edit server profile template SHT DL to BL server
	#Fusion UI Edit Server Profile template		@{TestData.profiletemplates.change_dl_to_bl}

Edit server profile template EG with same connections
	Fusion UI Edit Server Profile template		@{TestData.profiletemplates.change_eg_with_connection}
	
Edit server profile template EG without same connections
	Fusion UI Edit Server Profile template		@{TestData.profiletemplates.change_eg_without_connection}	
	

	
*** Keywords ***

Create Expected Error Message for Invalid Connections
    [Arguments]  ${errorMessagePart1}  ${profileName}  ${errorMessagePart2}
    ${partialExpectedErrorMessage}=  catenate  ${errorMessagePart1}  ${profileName}
    ${completeErrorMessage}=  catenate  SEPARATOR=  ${partialExpectedErrorMessage}  ${errorMessagePart2}
    [Return]  ${completeErrorMessage}

Create LIG and EG
    Fusion UI Create Tbird Logical Interconnect Group    @{TestData.ligs}
    fusion ui create natasha logical interconnect group    @{TestData.natasha_lig}
    Fusion UI Create Tbird Enclosure Group    @{TestData.encgroups}

Delete all LIGs, EGs and Server Profile Templates
	Fusion UI Delete Server Profile Template		@{TestData.profiletemplates.create}
	Fusion UI Delete Enclosure Group		@{TestData.encgroups}
	Fusion Ui Delete Logical Interconnect Group	 @{TestData.ligs}
	Fusion Ui Delete Logical Interconnect Group		 @{TestData.natasha_lig}