*** Settings ***
Documentation   ENCLp0045 - Power on and off should work fine for Monitored G6,G7,Gen8,Gen9 BL servers
Library         robot.api.logger
Resource        ../resource.txt
Test Setup      Load Multi Test Data and Open Browser
Test Teardown	Pause And Close Browser


*** Variables ***
${user}         Administrator


*** Test Cases ***
As an Administrator I want to power on/off a server hardware that is in Monitored state
    Fusion UI Login To Appliance    ${user}
    ${data}=                            Get Data By Xpath   //ENCLp0045/enclosure
    ${rc}=                              Fusion UI Add Enclosure           @{data.enclosure}
    ${data}=                            Get Data By Xpath   //ENCLp0045/server
    :FOR    ${SERVER}   IN  @{data.server}
    \   ${rc}=  Fusion UI Power On Server Hardware  ${SERVER}
    \   Should be True                      ${rc}   msg=Failed to power on Server Hardware
    \   ${rc}=  Fusion UI Power Off Server Hardware By Name     ${SERVER.name}
    \   Should be True                      ${rc}   msg=Failed to power off Server Hardware
    \   ${rc}=  Fusion UI Power On Server Hardware  ${SERVER}
    \   Should be True                      ${rc}   msg=Failed to power on Server Hardware

