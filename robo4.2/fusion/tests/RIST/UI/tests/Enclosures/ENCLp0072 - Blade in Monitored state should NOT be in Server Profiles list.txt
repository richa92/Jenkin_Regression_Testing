*** Settings ***
Documentation   ENCLp0072 - Blade in Monitored state should NOT be in Server Profiles list
Library         robot.api.logger
Resource        ../resource.txt
Test Setup      Add Enclosure As Monitored
Test Teardown   Remove Monitored Enclosure
Suite Setup      Load Multi Test Data and Open Browser
Suite Teardown	  Pause And Close Browser For Suite

*** Variables ***
${user}         Administrator
${enclosure_obj}    None
${data_search_node}     ENCLp0072


*** Test Cases ***
As an Administrator I want to confirm that blade in monitored state should not be in the server profiles list
    ${data}=    Get Data By Xpath   //${data_search_node}/enclosure[@addas='Monitored']
    set suite variable      ${enclosure_obj}       ${data}
    ${data}=    Get Data By Xpath   //${data_search_node}/enclosure[@addas='Monitored']/bladebays/bay
    ${status}=  Fusion UI create server profile monitored bays should not show in list      @{data.bay}
    should be true      ${status}       msg=Failed check monitored bay should not be in the server profiles list

*** Keyword ***
Add Enclosure As Monitored
    Fusion UI Login To Appliance    ${user}
    ${data}=    Get Data By Xpath   //${data_search_node}/enclosure[@addas='Monitored']
    set suite variable      ${enclosure_obj}       ${data}
    ${status}=  Fusion UI add enclosure     @{enclosure_obj.enclosure}
    should be true      ${status}       msg=Failed add enclosure as Monitored

Remove Monitored Enclosure
    ${status}=                      Fusion UI Remove Enclosure      @{enclosure_obj.enclosure}
    Should Be True                  ${status}                   msg=Failed to remove monitored enclosure
