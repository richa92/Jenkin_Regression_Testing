*** Settings ***
Documentation   SEHWn0002 - Add single Gen9 Blade hardware
Library         robot.api.logger
Resource        ../resource.txt
Test Setup      Load Test Data and Open Browser
Test Teardown	Pause And Close Browser


*** Variables ***
${user}         Administrator


*** Test Cases ***
As an Administrator I want to see the error message when trying to add a single blade server of an enclosure
    Fusion UI Login To Appliance    ${user}

    # {Add DL servers as managed (force-add) to avoid being managed by other systems which causes failures when adding them as Monitored
    ${rc}=                              Fusion UI Remove Server Hardware        @{TestData.MonitoredDL.PrepareServerAvailability.RemoveServer}
    Should be True                      ${rc}   msg=Failed to remove Server Hardware

    ${rc}=                              Fusion UI Add Server Hardware           @{TestData.MonitoredDL.PrepareServerAvailability.AddServerAsManaged}
    Should be True                      ${rc}   msg=Failed to add DL Gen 8 Rack Server

    ${rc}=                              Fusion UI Remove Server Hardware        @{TestData.MonitoredDL.PrepareServerAvailability.RemoveServer}
    Should be True                      ${rc}   msg=Failed to remove Server Hardware
    # }

    ${rc}=                              Fusion UI Add Server Hardware           @{TestData.MonitoredDL.AddServer}
    Should be True                      ${rc}   msg=Failed to add DL Gen 8 Rack Server

    ${rc}=                              Fusion UI Validate Monitored Server No Profile
    ...                                 @{TestData.MonitoredDL.ValidateProfile}
    Should be True                      ${rc}   msg=Failed to validate <Monitored server cannot be selected when creating/editing server profile> of DL Gen 8 Rack Server
