*** Settings ***
Documentation   SEHWp0050 - DL G7 which firmware is 1.57 cannot be added as Monitored
Library         robot.api.logger
Resource        ../resource.txt
Test Setup      Load Test Data and Open Browser
Test Teardown	Pause And Close Browser


*** Variables ***
${user}         Administrator


*** Test Cases ***
As an Administrator I want to add a server hardware into Fusion as Monitored when its FW is below 1.61
    Fusion UI Login To Appliance    ${user}
    :FOR    ${SERVER}   IN  @{TestData.DLG7ForMonitoring}
    \   ${rc}=                              Fusion UI Remove Server Hardware           @{TestData.DLG7ForMonitoring}
    \   Should be True                      ${rc}   msg=Failed to remove Server Hardware for monitoring
    \   ilo connect     ${SERVER.iloIP}    ${SERVER.iloUserName}   ${SERVER.iloPassword}
    \   ilo update firmware     ftp://wpstwork4.vse.rdlabs.hpecorp.net/firmware/ilo/ilo3/ilo3_157.bin
    \   sleep   3 minutes
    # verify the error message is expected
    Fusion UI Validate Server Hardware Meet Minimum ilo3    @{TestData.DLG7ForMonitoring}
