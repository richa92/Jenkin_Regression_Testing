*** Settings ***
Documentation   SEHWp0040 - Can remove Managed DL server and add back as Monitored
Library         robot.api.logger
Resource        ../resource.txt
Test Setup      Load Test Data and Open Browser
Test Teardown	Pause And Close Browser


*** Variables ***
${user}         Administrator


*** Test Cases ***
As an Administrator I want to change server from management to monitoring by removing and adding again
    Fusion UI Login To Appliance    ${user}

    # remove all server profiles that may have been created by previous tests,
    # to make sure the afterward removing of server hardware is not restrained
    Fusion UI Delete All Appliance Server Profiles

    # remove server hardware if exists, to make sure it's been added as 'Monitored'
    # :FOR    ${server}    IN    @{TestData.DLGen8ForManagement}
    # \       Fusion UI Remove Server Hardware By Name        ${server.name}
    Fusion UI Remove Server Hardware           @{TestData.DLGen8ForManagement}

    ${rc}=                              Fusion UI Add Server Hardware           @{TestData.DLGen8ForManagement}
    Should be True                      ${rc}   msg=Failed to add Server Hardware for management
    ${rc}=                              Fusion UI Remove Server Hardware           @{TestData.DLGen8ForManagement}
    Should be True                      ${rc}   msg=Failed to remove Server Hardware for management
    ${rc}=                              Fusion UI Add Server Hardware           @{TestData.DLGen8ForMonitoring}
    Should be True                      ${rc}   msg=Failed to add Server Hardware for monitoring
