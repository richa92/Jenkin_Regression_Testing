*** Settings ***
Documentation   SEHWp0051 - DL G8 which firmware is equal to 1.30 can be added as Monitored
Library         robot.api.logger
Resource        ../resource.txt
Test Setup      Load Test Data and Open Browser
Test Teardown	Pause And Close Browser


*** Variables ***
${user}         Administrator


*** Test Cases ***
As an Administrator I want to add a server hardware into Fusion as Monitored when its FW is equal to 1.30
    # Fail                                    Skipped due to QXCR1001438667
    # QXCR1001438667 is verified as FIXED in PASS 78 on 9/11/2015, leave this note here in case any regression issue in future
    Fusion UI Login To Appliance        ${user}

    # remove all server profiles that may have been created by previous tests,
    # to make sure the afterward removing of server hardware is not restrained
    Fusion UI Delete All Appliance Server Profiles

    :FOR    ${SERVER}   IN  @{TestData.DLGen8ForMonitoring}
    \   ${rc}=                              Fusion UI Remove Server Hardware           @{TestData.DLGen8ForMonitoring}
    \   Should be True                      ${rc}   msg=Failed to remove Server Hardware for monitoring

    \   Fusion SRM iLO API Init             ${SERVER.iloIP}    ${SERVER.iloUserName}   ${SERVER.iloPassword}
    \   Fusion SRM iLO Update Firmware      ftp://wpstwork4.vse.rdlabs.hpecorp.net/firmware/ilo/ilo4/ilo4_130.bin
    \   sleep   3 minutes

    # \   Fusion SRM iLO API Init             ${SERVER.iloIP}    ${SERVER.iloUserName}   ${SERVER.iloPassword}
    # \   Fusion SRM Reset Rib
    # \   sleep   2 minutes

    \   ${rc}=                              Fusion UI Add Server Hardware           @{TestData.DLGen8ForMonitoring}
    \   Should be True                      ${rc}   msg=Failed to add Server Hardware for monitoring


    # \   ilo connect     ${SERVER.iloIP}    ${SERVER.iloUserName}   ${SERVER.iloPassword}
    # \   ilo update firmware     ftp://wpstwork4.vse.rdlabs.hpecorp.net/ftp/firmware/ilo/ilo4/ilo4_130.bin
