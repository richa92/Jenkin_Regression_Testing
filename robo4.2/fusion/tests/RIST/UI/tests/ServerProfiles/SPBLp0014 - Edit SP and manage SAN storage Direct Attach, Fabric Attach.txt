*** Settings ***
Documentation   SPBLp0014 - Edit SP and manage SAN storage Direct Attach, Fabric Attach

Resource    ../resource.txt

Test Setup      Load Multi Test Data and Open Browser
Test Teardown   Pause And Close Browser

*** Variables ***
${AUTOSCROLL}   ${False}
${user}         Administrator

*** Test Cases ***
As an Administrator I want to edit sp and manage san storage da and fa
    # Log in using network administrator
    Fusion UI Login To Appliance    ${user}

    # Add storage systems
    ${data}=                        Get Data By Xpath                       //SPBLp0014/storagesystems/Add
    ${Status}=                      Fusion UI add storage systems       @{data.Add}
    Should Be True                  ${Status}   msg=Failed to add storage system

    # Create server profile
    ${data}=                        Get Data By Xpath                       //SPBLp0014/ServerProfile/Create
    ${Status}=                      Fusion UI Create Server Profile     @{data.Create}
    Should Be True                  ${Status}  msg=Failed to create server profile


    # Verify the SAN storage information
    ${data}=                        Get Data By Xpath                       //SPBLp0014/ServerProfile/Create
    ${Status}=                      Fusion UI Verify Server Profile SAN Storage Info     @{data.Create}
    Should Be True                  ${Status}  msg=Failed to create server profile

    # Edit server profile, delete volumes
    ${data}=                        Get Data By Xpath                       //SPBLp0014/ServerProfile/Edit
    ${Status}=                      Fusion UI Edit Server Profile     @{data.Edit}
    Should Be True                  ${Status}  msg=Failed to create server profile

    # Verify the SAN storage information
    ${data}=                        Get Data By Xpath                       //SPBLp0014/ServerProfile/Edit
    ${Status}=                      Fusion UI Verify Server Profile SAN Storage Info     @{data.Edit}
    Should Be True                  ${Status}  msg=Failed to create server profile

    # Remove server profile
    ${data}=                        Get Data By Xpath                       //SPBLp0014/ServerProfile/Delete
    ${Status}=                      Fusion UI Delete Server Profile     @{data.Delete}
    Should Be True                  ${Status}  msg=Failed to remove server profile

    # Delete storage systems
    ${data}=                        Get Data By Xpath                       //SPBLp0014/storagesystems/Delete
    ${Status}=                      Fusion UI remove storage systems       @{data.Delete}
    Should Be True                  ${Status}   msg=Failed to add storage system
