*** Settings ***
Documentation   SPBLn0004 - Edit server profile with contraint A

Resource    ../resource.txt

Test Setup      Load Multi Test Data and Open Browser
Test Teardown   Pause And Close Browser

*** Variables ***
${user}      Administrator


*** Test Cases ***
Edit server profile with contraint A
    # Log in using administrator
    Fusion UI Login To Appliance    ${user}

    # Create server profile
    ${data}=                        Get Data By Xpath                       //SPBLn0004/ServerProfile/Create
    ${Status}=                      Fusion UI Create Server Profile     @{data.Create}
    Should Be True                  ${Status}  msg=Failed to create server profile

    # Edit server profile using duplicate network
    ${data}=                        Get Data By Xpath                       //SPBLn0004/ServerProfile/Edit
    ${Status}=                      Fusion UI Verify Can Not Edit Server Profile With Error Configuration    @{data.Edit}
    Should Be True                  ${Status}  msg=Failed to create server profile

    # Remove unused server profile
    ${data}=                        Get Data By Xpath                       //SPBLn0004/ServerProfile/Delete
    ${Status}=                      Fusion UI Delete Server Profile     @{data.Delete}
    Should Be True                  ${Status}  msg=Failed to remove server profile

    # Remove unused uplink set from LIG
    ${data}=                        Get Data By Xpath                        //SPBLn0004/Uplink/Remove/lig
    ${Status}=                      Fusion UI Edit Logical Interconnect Group    @{data.lig}
    Should Be True                  ${Status}  msg=Failed to edit server profile

    # Update logical interconnect from group
    ${data}=                        Get Data By Xpath                       //SPBLn0004/Uplink/Remove/li
    ${Status}=                      Fusion UI Update Logical Interconnect From Group    @{data.li}
    Should Be True                  ${Status}  msg=Failed to update li from group

    # Remove unused network
    ${data}=                        Get Data By Xpath                       //SPBLn0004/Networks/Delete
    ${Status}=                      Fusion UI Delete Ethernet Network   @{data.Delete}
    Should Be True                  ${Status}  msg=Failed to remove networks

    # Detlete unused network set
    ${data}=                        Get Data By Xpath                       //SPBLn0004/NetworkSets/Delete
    ${Status}=                      Fusion UI Delete Network Set        @{data.Delete}
    Should Be True                  ${Status}  msg=Failed to remove networks
