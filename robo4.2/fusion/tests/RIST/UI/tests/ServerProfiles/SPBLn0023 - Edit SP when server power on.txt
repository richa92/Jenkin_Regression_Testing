*** Settings ***
Documentation   SPBLn0023 - Edit SP when server power on

Resource    ../resource.txt

Test Setup      Load Multi Test Data and Open Browser
Test Teardown   Pause And Close Browser

*** Variables ***
${user}      Administrator


*** Test Cases ***
Edit server profile when server power on
    # Log in using administrator
    Fusion UI Login To Appliance    ${user}

    # Create server profile
    ${data}=                        Get Data By Xpath                       //SPBLn0023/ServerProfile/Create
    ${Status}=                      Fusion UI Create Server Profile     @{data.Create}
    Should Be True                  ${Status}  msg=Failed to create server profile

    # power on the created server profile
    ${Status}=                      Fusion UI Power On Server Profile    @{data.Create}
    Should Be True                  ${Status}  msg=Failed to power on server profile

    #  Edit server profile with common item
    ${data}=                        Get Data By Xpath                       //SPBLn0023/ServerProfile/Edit_Success1
    ${Status}=                      Fusion UI Verify Can Edit Server Profile General Info When Server Power On     @{data.Edit_Success1}
    Should Be True                  ${Status}  msg=Failed to edit server profile

    #  Edit server profile with change bootsetting
    ${data}=                        Get Data By Xpath                       //SPBLn0023/ServerProfile/Edit_Failed1
    ${Status}=                      Fusion UI Verify Can Not Edit Server Profile Special Info When Server Power On     @{data.Edit_Failed1}
    Should Be True                  ${Status}  msg=Failed to edit server profile

    #  Edit server profile with add new connection
    ${data}=                        Get Data By Xpath                       //SPBLn0023/ServerProfile/Edit_Failed2
    ${Status}=                      Fusion UI Verify Can Not Edit Server Profile Special Info When Server Power On     @{data.Edit_Failed2}
    Should Be True                  ${Status}  msg=Failed to edit server profile

    # power off the created server profile
    ${data}=                        Get Data By Xpath                       //SPBLn0023/ServerProfile/Edit_Failed2
    ${Status}=                      Fusion UI Power Off Server Profile    @{data.Edit_Failed2}
    Should Be True                  ${Status}  msg=Failed to power on server profile

    # Delete server profile
    ${data}=                        Get Data By Xpath                       //SPBLn0023/ServerProfile/Delete
    ${Status}=                      Fusion UI Delete Server Profile     @{data.Delete}
    Should Be True                  ${Status}  msg=Failed to delete server profile