*** Settings ***
Documentation   Copy_Unassigned_SP_With_Existing_And_Ephemeral_Volume
Resource         ../resource.txt
Test Teardown   Pause Test Execution and Relogin Appliance On Failure
Suite Teardown   Delete Server Profile


*** Test Cases ***
SPESVp009 - Copy_Unassigned_SP_With_Existing_And_Ephemeral_Volume
    ${data}=                        Get Data By Xpath                   //BLServerProfiles/Copy/profile[contains(@desc, "Copy unassigned server profile which has both temporary and permanent volume")]
    ${result}=                      Fusion UI copy Server Profile       @{data.profile}
    Should Be True                  ${result}                           Failed to copy server profile due to error.

*** Keyword ***
Delete Server Profile
    ${data}=                        Get Data By Xpath                   //BLServerProfiles/Copy/profile[contains(@desc, "Copy unassigned server profile which has both temporary and permanent volume")]
    # delete the SP since some follow cases need the hardware.
    ${result}=                      Fusion UI Delete Server Profile     @{data.profile}
    Convert to String               ${result}
    Run Keyword If                  '${result}' == 'False'              Close Browser and Re Login Appliance
    Convert to Boolean              ${result}
    Should Be True                  ${result}                           Failed to delete server profile due to error.
