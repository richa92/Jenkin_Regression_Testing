*** Settings ***
Documentation   Add enclosure
Resource        ../resource.txt
Suite Teardown   Remove Enclosure
Test Teardown    Pause Test Execution On Failure


*** Test Cases ***
ENCLp0001 - Add Enclosure(IPv4) with new EG and can discover hardware, ENCLp0011 - Add Enclosure with hp One view w/o ilo licensing  
    ${data}=                       Get Data By Xpath   //enclosures/enclosure[@create_new_eg='true']
    Set Global Variable             ${custom_enclosure_obj}    ${data}
    # Srm CLI Cleanup OA SSO Certs	${data.enclosure}
    # Srm Cli Cleanup OA Snmp IP		${data.enclosure}
    ${status}=                      Fusion UI Add Enclosure     @{data.enclosure}
    Should Be True                  ${status}                   msg=Failed to add Enclosures
    ${li_data}=                     Get Data By Xpath   //lis/li[contains(@desc, 'new create EG')]
    Fusion UI Verify Logical Interconnects Status   @{li_data.li}
    ## TODO: add verify server hardware

*** Keywords ***
Remove Enclosure
    ${status}=                      Fusion UI Remove Enclosure      @{custom_enclosure_obj.enclosure}
    Should Be True                  ${status}                       Failed to remove enclosures
