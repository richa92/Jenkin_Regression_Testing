*** Settings ***
Resource    ../resource.txt


*** Keywords ***

Load Test Data and Open Browser and Login
    Load Test Data and Open Browser
    Log into Fusion appliance as Administrator

CLear Environment
    [Arguments]    ${TestData}
    ${dict}=   Create Dictionary    userName=${TestData.users[0].name}     password=${TestData.users[0].password}
    Log To Console    ${TestData.license_type[0].type}
    Run Keyword If    ${TestData.potash[0].potash}      fusion ui delete fc network      @{TestData.fc_networks}
    Fusion Api Login Appliance    ${APPLIANCE_IP}    ${dict}
    ${getlicresp}=    Fusion Api Get Licenses
    :FOR    ${eachlic}     IN    @{getlicresp['members']}
    \       Log To Console    ${eachlic}
    \       Continue For Loop If   '${eachlic["product"]}' != '${TestData.license_type[0].type}'
    \       ${delResp}=    Fusion Api Remove License  uri=${eachlic['uri']}
    \       Log To Console    Status_code_is_${delResp["status_code"]}
    \       Should Be Equal As Integers    ${delResp["status_code"]}   204



