*** Settings ***
Resource    resource.txt
Documentation    Transform Server Profile with new SHT and SH

Suite Setup                     QUAL Suite Setup    ${admin_credentials}
Suite Teardown                  QUAL Suite Teardown

*** Test Cases ***

Create Server Profile
   [Tags]    SP
   [Documentation]    Create server profile
   ${responses}=   Add Server Profiles from variable   ${server_profiles}
   Run Keyword If  ${responses} is not ${null}     Wait For Task2   ${responses}   timeout=1200    interval=5\
   Verify Resources for List  ${server_profiles}

Get and Verify Server Profile Transformation DTO
   [Tags]    T-SP
   [Documentation]    Get Transformation server profile URI and verify the same
   ${uri}=     Get Server Profile Transformation URI     @{transformation_sp}
   Log     ${uri}     console=True
   ${transformation_dto}=    Get Server Profile Transformation     ${uri}
   Remove From Dictionary    ${transformation_dto}    created     modified     status    state    status_code    headers     # These needs to be removed from payload
   Verify Server Profile Transformation DTO     @{expected_transformation_sp}     ${transformation_dto}

Edit Server Profile From Transformation DTO
   [Tags]    DTO-SP
   [Documentation]    Edit server profile from transformation DTO on new server hardware
   ${responses}=   Edit Server Profiles from variable   ${sp_from_transform_dto}
   Run Keyword If  ${responses} is not ${null}     Wait For Task2   ${responses}   timeout=1200    interval=5\
   Verify Resources for List  ${expected_sp_from_transform_dto}

Edit Server Profile
   [Tags]    Edit-DTO-SP
   [Documentation]    Edit server profile bootmode and bios settings after transformation
   ${responses}=   Edit Server Profiles from variable   ${edit_sp_transform}
   Run Keyword If  ${responses} is not ${null}     Wait For Task2   ${responses}   timeout=1200    interval=5\
   Verify Resources for List  ${expected_edit_sp_transform}

Remove Server Profile
    [Tags]     REMOVE-TSP
    [Documentation]    Remove Server Profiles
    ${responses}=  Remove Server Profiles from variable  ${edit_sp_transform}
    Run Keyword If  ${responses} is not ${null}     Wait For Task2   ${responses}   timeout=600    interval=5