*** Settings ***
Documentation       Add Enclosure
Resource    ../resource.txt
Test Setup      Login to OneView Via REST API

Variables    ../data_variables.py

*** Variables ***
${APPLIANCE_IP}     unknown

*** Test Cases ***
Add Enclosure
    Log  Request to add enclosure   console=${True}
    ${response} =   Fusion Api Add Enclosure    body=${add_enclosure_body}
    ${actual_resp_code} =   get from dictionary     ${response}     status_code
    Run Keyword If  "${actual_resp_code}" is not '${202}'   Output Response Error Messages   ${response}
    Run Keyword If  "${actual_resp_code}" is not '${202}'  Fail    msg=Failed add enclosure since the response code is not 202
    Should Contain  ${response}  uri
    ${task} =   Wait For Task and Fail On Error  ${response}  timeout=1200    interval=5
