*** Settings ***
Library              FusionLibrary
Library              RoboGalaxyLibrary
Library              OperatingSystem
Library              BuiltIn
Library              Collections
Library              ../../../wpst_crm/crm_austin/lib/WPSTUtil.py

Resource             ../../../../Resources/api/fusion_api_resource.txt
Resource             ../global_variables.robot

*** Keywords ***
Delete and Re-configure VC Domain
    [Documentation]  Remove and Initialize VC, then send command to add networks/fcs/server profiles etc.
    [Arguments]      ${vc_credentials}  ${oa_credentials}  ${vc_config_file}  ${waitTime}=2 min  ${doubleDense}=${False}
    WPST Delete Domain VC          ${vc_credentials}    ${oa_credentials}
    Log    Success: Deleted VC Domain...    console=true
    Log    Waiting ${waitTime} minutes...    console=true
    Sleep    ${waitTime}

    WPST Configure VC   vc_credentials=${vc_credentials}  oa_credentials=${oa_credentials}  config=${vc_config_file}  doubleDense=${doubleDense}
    Log    Success: Configured VC Domain...    console=true

Clear Base Resources
    [Documentation]   Delete base resources
    Log    \nCleaning test environment before test...    console=true
    Power off ALL servers          control=PressAndHold
    Remove All Server Profiles     force=${True}
    Remove All Server Profile Templates
    Remove ALl Enclosures          param=?force=true
    Remove All Enclosure Groups    True
    Remove All LIGs
    Remove All Ethernet Networks
    Remove All FC Networks
    Remove All FCoE Networks
    Remove All Network Sets
    Remove All Server Hardware Types
    Remove ALL San Managers Async
