*** Settings ***
Documentation		C7000 Fusion Appliance deployment and common resources setup (users, networks, SAN manager, etc.)
Resource            ./../../../../Resources/api/fusion_api_resource.txt
Library				Collections
Library             json
Library             String
Library             Collections
Library             RoboGalaxyLibrary
Library             FusionLibrary
Library             robot.api.logger
Library             OperatingSystem
Library             SSHLibrary
Variables 		    ./data_variables.py


*** Variables ***
${APPLIANCE_IP}                 ${None}                    # leave it as NONE if you want this test to create a new one
${SSH_PASS}                     hpvse1
${Team_Name}                    SHQA
${admin_credentials}            ${C7000EnvSetup.${Team_Name}.Common.admin_credentials}


*** Keywords ***
Remove All Resources For C7000
    [Documentation]    Remove All Resources For C7000
    [Arguments]      ${APPLIANCE_IP}
    Fusion Api Login Appliance 		                            ${APPLIANCE_IP}		            ${admin_credentials}
    Log    \nCleaning test environment before test...    console=true
    Power off ALL servers          control=PressAndHold
    Run Keyword And Ignore Error    Wait For ALL Servers Complete Refresh
    Remove All Server Profiles     force=${True}
    Remove All Server Profile Templates
    ${rc} =  Run Keyword And Return Status
    ...         Remove ALl Enclosures
    ...         param=?force=true

    Log To Console      result of Remove All Enclosures is <${rc}>

    Run Keyword If  '${rc}' != 'True'
    ...         Remove ALl Enclosures
    ...         param=?force=true

    Remove All DL Server Hardware Async  ${TRUE}
    Remove All Enclosure Groups    True
    Remove All LIGs
    Remove All Ethernet Networks
    Remove All FC Networks
    Remove All FCoE Networks
    Remove All Network Sets
    Remove ALl Server Hardware Types
	Remove ALL Users
	Remove All San Managers
	Delete All Fusion License

Remove All Resources For Tbird
    [Documentation]    Remove All Resources For Tbird  
    [Arguments]      ${APPLIANCE_IP}
    Fusion Api Login Appliance 		                            ${APPLIANCE_IP}		            ${admin_credentials}
    Log    \nCleaning test environment before test...    console=true
    Power off ALL servers          control=PressAndHold
    Remove All Server Profiles     force=${True}
    Remove All Server Profile Templates
    Remove ALl Enclosures          param=?force=true
    Remove All Enclosure Groups    True
    Remove All LIGs
    Remove All Ethernet Networks
    Remove All FC Networks
    Remove All FCoE Networks
    Remove All Network Sets
    Remove ALl Server Hardware Types
	Remove ALL Users
	Remove All San Managers
	Delete All Fusion License

