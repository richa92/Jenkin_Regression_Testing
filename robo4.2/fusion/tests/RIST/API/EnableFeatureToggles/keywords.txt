*** Settings ***
Library                   FusionLibrary
Library                   RoboGalaxyLibrary
Library                   BuiltIn
Library                   robot.api.logger
Library                   Collections
Library                   OperatingSystem
Resource                  ./../../../../Resources/api/fusion_api_resource.txt

*** Keywords ***
Reboot appliance via API
    [Documentation]    Reboot appliance via API
    [Arguments]  ${APPLIANCE_IP}    ${admin_credentials}
    Fusion API Login Appliance      ${APPLIANCE_IP}     ${admin_credentials}
    ${resp} =  Fusion Api Appliance Shutdown        REBOOT
    ${task} =  wait for task2   ${resp}     20min   5   None Expected   Completed
    Log    -- Waiting for OneView state to change to "STARTING"    console=true
    Wait For Appliance State To Be Expected State    ExpectedState=STARTING
    Log    -- Waiting for OneView state to change to "OK"    console=true
    Wait For Appliance State To Be Expected State    ExpectedState=OK

Populate the role and reboot
    [Arguments]  ${APPLIANCE_IP}    ${admin_credentials}    ${ssh_credentials}      ${populateCMDs}
    [Documentation]     For Scope test need to populate the role
    Run Multi Cmd  ${APPLIANCE_IP}      ${ssh_credentials["userName"]}     ${ssh_credentials["password"]}   ${populateCMDs}
    Reboot appliance via API    ${APPLIANCE_IP}     ${admin_credentials}
