*** Settings ***
Documentation	CHO run for node maintenance operations on node

Library			FusionLibrary
Library			RoboGalaxyLibrary
Library			MgmtFWLibrary
Library			OperatingSystem
Library			BuiltIn
Library			Collections
Library			XML
Library			String
Library			json
Library			Process

Library			os_deployment.py
Library			OVA_deployment.py
Library			thumbprint.py
Library			vm_deployment.py
Resource		../../../Resources/api/fusion_api_resource.txt
Resource		../../../Resources/api/hellfire_api_resource.txt
Resource		../../../Resources/api/hellfire/sdi_system_profiles.txt
Variables		data_variables_hellfire_ovst.py


*** Test Cases ***

CHO_node_maintenance
	Fusion Api Login Appliance 		${new_appliance_ip}		${admin_credentials}
	:FOR	${x}	in	@{CHO_node_maintenance}
	\	Run Keyword And Continue On Failure		Put node in maintainence mode	${x[0]}	
	\	Run Keyword And Continue On Failure		Put node exit maintainence mode	${x[1]}
	\	Run Keyword And Continue On Failure		Put node in poweroff mode	${x[2]}
	\	Run Keyword And Continue On Failure		Put node in poweron mode	${x[3]}	${x[1]}	
	Fusion Api Logout Appliance
	
	
**** Keywords ****

Put node in maintainence mode
	[Documentation]	Put node in maintainence mode	
	[Arguments]		${req}
	Sleep	3 minutes
	${resp}=	Update specific host profile		${req}
	Run keyword if	${resp[0]['status']}==False			FAIL
	Run keyword if	${resp[0]['task_status']}==False	FAIL
	Log to console	${resp}

Put node exit maintainence mode
	[Documentation]	Put node exit maintainence mode
	[Arguments]		${req}
	Sleep	3 minutes
	${resp}=	Update specific host profile		${req}
	Run keyword if	${resp[0]['status']}==False			FAIL
	Run keyword if	${resp[0]['task_status']}==False	FAIL
	Log to console	${resp}
	
Put node in poweroff mode
	[Documentation]	Put node in poweroff mode
	[Arguments]		${req}
	Sleep	3 minutes
	${resp}=	Update specific host profile		${req}
	Run keyword if	${resp[0]['status']}==False			FAIL
	Run keyword if	${resp[0]['task_status']}==False	FAIL
	Log to console	${resp}
	
Put node in poweron mode
	[Documentation]	Put node in poweron mode
	[Arguments]		${req}	${req1}
	Sleep	3 minutes
	${resp}=	Update specific host profile		${req}
	Run keyword if	${resp[0]['status']}==False			FAIL
	Run keyword if	${resp[0]['task_status']}==False	FAIL
	Log to console	${resp}
	${resp}=	Update specific host profile		${req1}
	Run keyword if	${resp[0]['status']}==False			FAIL
	Run keyword if	${resp[0]['task_status']}==False	FAIL
	Log to console	${resp}
	Sleep	3 minutes
