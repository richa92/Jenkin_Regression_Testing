*** Settings ***
Documentation     SSH CLI one-liner  - US35634
...    = USAGE =
...    | pybot | -v ENCLOSURE:<NAME> or FUSION_IP:<IP> | -v VIEW:<VIEW> | -v COMMAND:<command> | cli_one-liner.txt |

Variables         ../resources/variables.py    ${ENCLOSURE}

Library           RoboGalaxyLibrary            # DVTs Robot Framework extensions
Library           FusionLibrary                # DVTs Fusion extensions
Library           OperatingSystem
Library           String
Library           robot.api.logger
Resource          ../resources/fusion_ssh.txt
Resource          ../resources/fusion_cli.txt
Resource          ../resources/defaults.txt
Suite Setup       Set Library Search Order     SSHLibrary      
Force Tags        DCS  HW  CLI

*** Variables ***
${prompt}             >
${FUSION_TIMEOUT}     20

*** Test Cases ***



Examples of SSH CLI one-liner

        #At user-view
	Set Suite Variable      ${VIEW}          ${EMPTY}
	Set Suite Variable      ${COMMAND}       help
	${response}        CLI One-liner         ssh ${FUSION_USERNAME}@${FUSION_IP} "${VIEW};${COMMAND}"
	Log     ${response}
		
	#At Console-view
	Set Suite Variable      ${VIEW}          console-view
	Set Suite Variable      ${COMMAND}       show enclosure list
    	${response}        CLI One-liner         ssh ${FUSION_USERNAME}@${FUSION_IP} "${VIEW};${COMMAND}"
	Log     ${response}
		
	#Multiple commands at multiple views
	${response}        CLI One-liner        ssh ${FUSION_USERNAME}@${FUSION_IP} "console-view;show enclosure list;quit;help"
	Log     ${response}
		
Negative Test: Use Invalid Command

	# Use Invalid console command
	${response}        CLI One-liner    ssh ${FUSION_USERNAME}@${FUSION_IP} "${VIEW};what"
	Should Contain     ${response}      is not a recognized command.
	   
Negative Test: Use Invalid Command Option

        ${response}        CLI One-liner    ssh ${FUSION_USERNAME}@${FUSION_IP} "${VIEW};show time"
	Should Contain     ${response}      The input is not a valid command

Negative Test: Use Invalid User

	# Use Invalid CLI User
	${response}    Run Keyword and expect Error     *     CLI One-liner    ssh root@${FUSION_IP} "${VIEW};${COMMAND}"
       	Should Contain     ${response}     Permission denied

Negative test: use Invalid Password
	   
        #Use Invalid Password
        Set Suite Variable     ${CLI_PASSWORD}    hpvse1
	${response}    Run Keyword and expect Error     *     CLI One-liner    ssh ${FUSION_USERNAME}@${FUSION_IP} "${VIEW};${COMMAND}"
        Should Contain     ${response}     Permission denied
		





