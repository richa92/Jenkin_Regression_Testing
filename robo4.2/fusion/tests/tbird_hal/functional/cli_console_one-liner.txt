*** Settings ***
Documentation     SSH one-liner command  - US35632 
...    = USAGE =
...    | pybot | -v FUSION_IP:<IP> | -v CONSOLE_COMMAND:<command> | cli_console_one-liner.txt |
...    = Variables =
...    | FUSION_IP | Fusion IP Address |
...    | CONSOLE_COMMAND |  CLI Console Command  |
...    Example:   pybot -v FUSION_IP:16.114.191.99 | -v CONSOLE_COMMAND:"show enclosure list" | cli_console_command.txt


Library           RoboGalaxyLibrary            # DVTs Robot Framework extensions
Library           FusionLibrary                # DVTs Fusion extensions
Library           OperatingSystem
Library           String
Library           robot.api.logger
Resource          ../resources/fusion_ssh.txt
Resource          ../resources/fusion_cli.txt
Resource          ../resources/defaults.txt
Variables       ../resources/variables.py	${ENCLOSURE}
Suite Setup       Set Library Search Order     SSHLibrary      
Force Tags        DCS  HW  CLI

*** Variables ***
${prompt}             >
${VIEW}               console-view
${CONSOLE_COMMAND}    console-view; show enclosure list
${FUSION_TIMEOUT}     20

*** Test Cases ***



SSH Console Command

        #At Console-View - default
    	${response}        CLI One-liner         ssh ${FUSION_USERNAME}@${FUSION_IP} "${CONSOLE_COMMAND}"
		Log    ${response}
		#Should Contain     ${response}       ${ENC_NAME}
		

		
Negative tests of SSH Console One-liner

	   # Use Invalid console command
	   ${response}        CLI One-liner    ssh ${FUSION_USERNAME}@${FUSION_IP} "console-view; show time"
	   Should Contain     ${response}      The input is not a valid command

	   # Use Invalid CLI User
	   ${response}    Run Keyword and expect Error     *     CLI One-liner    ssh root@${FUSION_IP} "${CONSOLE_COMMAND}"
       Should Contain     ${response}     Permission denied
		
       #Use Invalid Password
       Set Suite Variable     ${CLI_PASSWORD}    hpvse1
	   ${response}    Run Keyword and expect Error     *     CLI One-liner    ssh ${FUSION_USERNAME}@${FUSION_IP} "${CONSOLE_COMMAND}"
       Should Contain     ${response}     Permission denied
