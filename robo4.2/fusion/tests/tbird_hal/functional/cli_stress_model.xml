<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0" initial="ICM_1">
  <parallel id="ICM_1">

    <state id="A_Session" initial="A_Not_Started">
      <state id="A_Not_Started">
	<transition event="Start_A" target="A_Started"/>
      </state>
      <state id="A_Started" initial="A_Main_View">
	<transition event="Exit_A" target="A_Not_Started"/>
	<state id="A_Main_View">
	  <transition event="ConsoleView_A" target="A_Console_View"/>
	  <transition event="MainCommand_A" target="A_Main_View"/>
	</state>
	<state id="A_Console_View">
	  <transition event="ViewCommand_A" target="A_Console_View"/>
	  <transition event="Kill_B" target="A_Console_View B_Console_View" cond="In('B_Connection')"/>
 	  <transition event="Connect_ICM_A" target="A_Connection" cond="!In('B_Connected')"/>
	  <transition event="Connect_A_Force" target="A_Connection" cond="!In('B_Connection')" />
	  <transition event="Connect_A_Force" target="A_Connection B_Console_View" cond="In('B_Connection')" />
	  <transition event="Quit_Console_View_A" target="A_Main_View"/>
	</state>
      </state>
      <state id="A_Connection">
	<transition event="Quit_Connection_A" target="A_Console_View"/>
      </state>
    </state>

    <state id="B_Session" initial="B_Not_Started">
      <state id="B_Not_Started">
	<transition event="Start_B" target="B_Started"/>
      </state>
      <state id="B_Started" initial="B_Main_View">
	<transition event="Exit_B" target="B_Not_Started"/>
	<state id="B_Main_View">
	  <transition event="ConsoleView_B" target="B_Console_View"/>
	  <transition event="MainCommand_B" target="B_Main_View"/>
	</state>
	<state id="B_Console_View">
	  <transition event="ViewCommand_B" target="B_Console_View"/>
	  <transition event="Kill_A" target="B_Console_View A_Console_View" cond="In('A_Connection')"/>
	  <transition event="Connect_ICM_B" target="B_Connection" cond="!In('A_Connected')"/>
	  <transition event="Connect_B_Force" target="B_Connection" cond="!In('A_Connected')"/>
	  <transition event="Connect_B_Force" target="B_Connection A_Console_View" cond="In('A_Connection')"/>
	  <transition event="Quit_Console_View_B" target="B_Main_View"/>
	</state>
      </state>
      <state id="B_Connection">
	<transition event="Quit_Connection_B" target="B_Console_View"/>
      </state>
    </state>

  </parallel>
</scxml>
