*** Settings ***
Documentation     Verify CLI Exit commands  - US35633
...    = USAGE =
...    | pybot | -v ENCLOSURE:<NAME> or -v FUSION_IP:<IP>   | cli_Exit_command.txt |
...    = Variables =
...    | ENCLOSURE | Enclosure name from variables.py |
...    | FUSION_IP | Fusion IP Address |
...    | VIEW      | Fusion CLI view   |

Variables         ../resources/variables.py    ${ENCLOSURE}

Library           RoboGalaxyLibrary            # DVTs Robot Framework extensions
Library           FusionLibrary                # DVTs Fusion extensions
Library           OperatingSystem
Library           String
Library           robot.api.logger
Resource          ../resources/fusion_ssh.txt
Resource          ../resources/fusion_cli.txt
Resource          ../resources/defaults.txt
Suite Setup       Set Library Search Order     SSHLibrary
Force Tags        DCS  CLI  HW

*** Variables ***

*** Test Cases ***

Exit From Fusion CLI User View
    [Documentation]     Exit from a CLI user view
	Run                 rm -f c:\users\wpstuser\.ssh\know*
	@{commands}         Create List     exit    quit
	:For    ${cmd}    In    @{commands}
	\       Login to Fusion via SSH    ${FUSION_IP}    ${FUSION_USERNAME}     ${FUSION_PASSWORD}     ${CLI_PROMPT}    20
    \       Write     ${cmd}	
	
Exit From Fusion CLI Console View
    [Documentation]     Exit from a CLI console view
	Login to Fusion via SSH    ${FUSION_IP}    ${FUSION_USERNAME}     ${FUSION_PASSWORD}     ${CLI_PROMPT}    20
	@{commands}         Create List     quit    return 
	:For     ${cmd}     In     @{commands}
	\        Write      console-view
	\      	 Write      ${cmd}
	\        ${output}=     Read Until      ${CLI_PROMPT}
    # Remove the escape sequence characters from console view
	\        ${output}=     Fetch From Right     ${output}      1l
	\        Should Contain     ${output.strip()}    ${CLI_PROMPT} 
