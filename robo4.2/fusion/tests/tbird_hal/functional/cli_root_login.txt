*** Settings ***
Documentation     Verify root SSH Login without Devmode -  US35831
...    = USAGE =
...    | pybot | -v ENCLOSURE:<NAME> or -v FUSION_IP:<IP>   | cli_root_login.txt |
...    = Variables =
...    | ENCLOSURE | Enclosure name from variables.py |
...    | FUSION_IP | Fusion IP Address |
...    | VIEW      | Fusion CLI view   |

Variables         ../resources/variables.py    ${ENCLOSURE}

Library           RoboGalaxyLibrary            # DVTs Robot Framework extensions
Library           FusionLibrary                # DVTs Fusion extensions
Library           OperatingSystem
Library           String
Library           robot.api.logger
Resource          ../resources/fusion_ssh.txt
Resource          ../resources/fusion_cli.txt
Resource          ../resources/defaults.txt
Suite Setup       Set Library Search Order     SSHLibrary      
Force Tags        DCS  CLI  HW

*** Variables ***
${devmode}             

*** Test Cases ***

Verify root login via SSH with CLI and no devmod installed
    # Remove devmode if installed
	Login to Fusion via SSH
	${response}     Execute Command     rpm -qa | grep devmod-package
	Log     ${response}
	${line}         Get lines Containing String      ${response}      devmode-package
	Run Keyword if       '${line}'=='1'     Set Suite variable    ${devmode}     ${response.strip()}
	Log     ${devmode}
	Run Keyword if       '${line}'=='1'     Execute Command       yum erase ${devmode}
    Logout of Fusion Via SSH

    #Verify CLI is installed
	Login to Fusion CLI
	Logout of Fusion CLI

	#Verify SSH Can login with root account
	Login to Fusion via SSH

	#Re-install devmod-package if installed
	Run Keyword unless       '${line}'=='0'     Execute Command       yum install -y ${devmode}
