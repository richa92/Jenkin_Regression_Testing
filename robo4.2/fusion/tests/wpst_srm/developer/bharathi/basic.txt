*** Settings ***
Library				RoboGalaxyLibrary
Library				FusionLibrary
Library				OperatingSystem
Library				BuiltIn
Library				Collections
Library				XML
Library				String
Library            	json
Library				DebugLibrary


Variables			data_variables.py
Resource			resource.txt
*** Variables ***

${APPLIANCE_IP}                 16.114.220.167


*** Test Cases ***
Login As Admin
	Set Log Level	DEBUG
	login
	Log to console and logfile     "aaa"

#Verify user
#	VerifyUserByGetResource

#AddUsers
#	AddUsers
 	
#Verify users
#	VerifyUsers

#Verify user
#	VerifyUserByGetResource
	
#Verify eg
#	VerifyEGByGetResource

#Verify unknown
#	VerifyUnknownResource

#Verify Eth	
#	VerifyEthByGetResource

#Add Eth networks
#	Add networks

Add Storage
	Add San StorageSystem Pools Volumes

Verify San
	VerifySanMgrByGetResource

*** Keywords ***
 login
	Fusion Api Login Appliance		${APPLIANCE_IP}		${admin_credentials}
	
AddUsers
	Set Log Level	TRACE
	${users} =	Get Variable Value	${users}
	Log To Console	${users}
	Run Keyword If	${users} is not ${null}    Add Users from variable				${users}

VerifyUsers
	Set Log Level	TRACE
	${users} =	Get Variable Value	${users}
	Log To Console	${users}
	Run Keyword If	${users} is not ${null}		Verify Added Users from variable		${users}
	
VerifyUserByGetResource
	Set Log Level	TRACE
	${x} =	Set Variable		USER:nat
	${resp} =		Get Resource		${x}
	log to console	${resp}
	Run Keyword If	${resp['status_code']} == 200  Log To Console		Found user: nat
	...             ELSE		Log To Console	User not found: nat
	
VerifyEGByGetResource
	Set Log Level	TRACE
	${eg} =	Set Variable		EG:fake-eg
	${resp} =		Get Resource		${eg}
	log to console	${resp}
	Run Keyword If	${resp['status_code']} == 200  Log To Console		Found eg: fake-eg
	...             ELSE		Log To Console	eg not found: fake-eg

VerifyUnknownResource
	Set Log Level	TRACE
	${eg} =	Set Variable		EG1:fake-eg
	${resp} =		Get Resource		${eg}
	log to console	${resp}
	Run Keyword If	${resp['status_code']} == 200  Log To Console		Found eg: unknown
	...             ELSE		Log To Console	eg not found: good


VerifyEthByGetResource
	Set Log Level	TRACE
	${eth} =	Set Variable        net100
	${type} =	Set Variable		ETH
	${resp} =		Get Resource		${eth}		${type}
	Run Keyword If	${resp} == 200  Log To Console		Found eth: ${eth}
	...             ELSE		Log To Console	eth not found: ${eth}

Add networks
	Set Log Level	TRACE
	${networks} =	 Get Variable Value	${ethernet_networks}
	Log To Console	${networks}
	Run Keyword If	${networks} is not ${null}		Add Ethernet Networks from variable		${networks}
	${fc_networks} =	Get Variable Value	${fc_networks}
	Run Keyword If	${fc_networks} is not ${null}    Add FC Networks from variable		${fc_networks}

Add San StorageSystem Pools Volumes
	Set Log Level    TRACE
	${sans} =	 Get Variable Value	${sans}
	${type} =	Set Variable		Brocade San Plugin
	Run Keyword If    ${sans} is not ${null}    Add San Manager from variable       ${sans}     ${type}
	${ss} =	 Get Variable Value	${storage_systems}
	Run Keyword If    ${ss} is not ${null}    Add Storage System from variable      ${ss}

VerifySanMgrByGetResource
	Set Log Level	TRACE
	${san} =	Set Variable		SAN:16.125.71.184
	${resp} =		Get Resource		${san}
	log to console	${resp}
	Run Keyword If	${resp['status_code']} == 200  Log To Console		Found san: 16.125.71.184
	...             ELSE		Log To Console	san not found: 16.125.71.184