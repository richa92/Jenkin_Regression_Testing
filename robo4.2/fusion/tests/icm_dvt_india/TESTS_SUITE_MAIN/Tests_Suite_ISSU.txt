*** Settings ***
Documentation       Run the test cases in ISSU and MLAG Feature
...
Resource           ../../../Resources/api/fusion_api_resource.txt
Resource           FCoE.txt
Resource           ISSU_FirmwareUpdate.txt

Variables           Data_Variables.py

Library             RoboGalaxyLibrary
Library             FusionLibrary


*** Variables ***

*** Keywords ***

*** Test cases ***
Login
    Fusion Api Login Appliance      ${APPLIANCE_IP}     ${Appliance_credentials}

Set Suite Variables before running Automation Suite
    FCoE.Set Suite Variables before running Automation Suite  ${INTERCONNECT1}   ${INTERCONNECT2}

Set Random Password as Suite Variables before running Automation Suite
    ${Random_Password}=    FCoE.Get Random Password for Potash  ${APPLIANCE_IP}  ${OV_root_usr}  ${OV_root_pwd}  ${Enclosure1}   ${Enc1_Potash_Module_Bay_No}
    Set Suite Variable    ${Random_Password}
    #Set Firmware Version Suite Variable    ${FirmwareUpgrade_Package}   ${FirmwareDowngrade_Package}

Disable one of the uplink port which is part of MLAG and verify functionality
    Disable one of the uplink port which is part of MLAG and verify functionality    ${PotashIP1}  ${MLAG_Uplink_Port1}   ${MLAGRESULTS}disable_master_link.txt
    Disable one of the uplink port which is part of MLAG and verify functionality    ${PotashIP1}  ${MLAG_Uplink_Port2}   ${MLAGRESULTS}disable_subordinate_link.txt

Disable both the uplink ports which are part of MLAG and verify functionality
    Disable both the uplink ports which are part of MLAG and verify functionality    ${PotashIP1}  ${MLAG_Uplink_Port1}   ${MLAG_Uplink_Port2}  ${MLAGRESULTS}disable_bothuplinks.txt


Verify the ISSU firmware downgrade with tagged Ethernet traffic
    ${cmd_output}=  Download_ICM_Firmware  ${linuxip}  ${linuxuser}  ${linuxpassword}  ${firmwaredowngrade_url}  ${firmwaredowngrade_package}  ${PotashIP1}  ${PotashIP2}  ${Random_Password}
    ISSU:: Verify the ISSU firmware upgrade/downgrade with tagged Ethernet traffic     ${PotashIP1}   ${PotashIP2}   ${firmwaredowngrade_url}  ${firmwaredowngrade_package}  ${MLAGRESULTS}firmwaredowngrade.txt

Verify the ISSU firmware upgrade with tagged Ethernet traffic
    ${cmd_output}=  Download_ICM_Firmware  ${linuxip}  ${linuxuser}  ${linuxpassword}  ${firmwareupgrade_url}  ${firmwareupgrade_package}  ${PotashIP1}  ${PotashIP2}  ${Random_Password}
    ISSU:: Verify the ISSU firmware upgrade/downgrade with tagged Ethernet traffic     ${PotashIP1}   ${PotashIP2}   ${firmwareupgrade_url}  ${firmwareupgrade_package}  ${MLAGRESULTS}firmwareupgrade.txt

*** comments ***

#Verify the ISSU firmware upgrade/downgrade with untagged Ethernet traffic
    #ISSU:: Verify the ISSU firmware upgrade/downgrade with untagged Ethernet traffic     ${PotashIP1}   ${PotashIP2}   ${FirmwareUpdate_Package}

Continuous Ping teamed MLAGIP - Do a ICM reset and verify functionality
    Continuous Ping teamed MLAGIP - Do a ICM reset and verify functionality   ${PotashIP1}    ${PotashIP2}

Continuous Ping teamed MLAGIP - Do a Poweroff/ON ICM and verify  functionality
    Continuous Ping teamed MLAGIP - Do a Poweroff/ON ICM and verify  functionality

Verify the Module reset during the ISSU case B firmware update
    Verify the Module reset during the ISSU case B firmware update    ${PotashIP1}    ${PotashIP2}  ${FirmwareUpdate_Package}

