*** Settings ***
Documentation       Run Prerequisites and run the FC FCoE Test Suite
...
Resource           ../../../Resources/api/fusion_api_resource.txt
Resource           FCoE.txt

Variables           Data_Variables.py

Library             RoboGalaxyLibrary
Library             FusionLibrary


*** Variables ***

*** Keywords ***

*** Test cases ***

Login
    Fusion Api Login Appliance      ${APPLIANCE_IP}     ${Appliance_credentials}

Set Suite Variables before running Automation Suite
    Set Suite Variables before running Automation Suite  ${INTERCONNECT1}   ${INTERCONNECT2}

FC/FCOE :: Get Random Password for Potash
    ${Random_Password}=    Get Random Password for Potash  ${APPLIANCE_IP}  ${OV_root_usr}  ${OV_root_pwd}  ${Enclosure1}   ${Enc1_Potash_Module_Bay_No}
    Set Suite Variable    ${Random_Password}

Verify Setup Before Running Suite
    Verify Setup   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${FC_Downlink_Port1}  ${FC_Downlink_Port2}  ${FC_Uplink_Port1}  ${FC_Uplink_Port2}  ${FCOE_Downlink_Port1}  ${FCOE_Downlink_Port2}  ${FCOE_Uplink_Port1}  ${FCOE_Uplink_Port2}

Create Network Set
    Create networkset

Creating FC Fabric Networks
    Add FC Networks from variable     ${testing_fabric_networks}

Creating FC DA Networks
    Add FC Networks from variable     ${testing_direct_networks}

Creating FCoE networks
    Add FCoE Networks from variable    ${testing_fcoe_networks}

Creating FA LIG
    LIG creation    ${FA_ligs}

Creating DA LIG
    LIG creation     ${DA_ligs}

Creating FCOE LIG
    LIG creation     ${FCOE_ligs}


FC :: Check FC Connectivity whether the Flogi is happened in Potash ICM module
    FC :: Check FC Connectivity whether the Flogi is happened in Potash module   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}

FCoE :: Check FCoE Connectivity whether the Flogi is happened in Potash module
    Check FCoE Connectivity whether the Flogi is happened in Potash module   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}   ${FCOE_Uplink_Port1}   ${FCOE_Uplink_Port2}

FC :: Verify the scenario of creating a fabric login using automatic login distribution method without traffic
    FC :: Verify the scenario of creating a fabric login using automatic login distribution method without traffic    ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${FC_Uplink_Port1}  ${FC_Uplink_Port2}

FC :: Check the multipath by enabling and disabling the ports In Mezz
    FC/FCOE - Check the multipath by enabling and disabling the ports In Mezz    ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${FC_Downlink_Port1}  ${FC_Downlink_Port2}

FCOE :: Check the multipath by enabling and disabling the ports In Mezz
    FC/FCOE - Check the multipath by enabling and disabling the ports In Mezz    ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${FCOE_Downlink_port1}  ${FCOE_Downlink_port2}

FC/FCOE :: Remove one of the stacking cables when the ICMs in a stable state and verify traffic
    FC/FCOE - Check the multipath by enabling and disabling the ports In Mezz    ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${STACKING_PORT1}  ${STACKING_PORT2}
    FC/FCOE - Check the multipath by enabling and disabling the ports In Mezz    ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${STACKING_PORT2}  ${STACKING_PORT1}

FC/FCOE :: Remove and insert both the stacking cables, when the ICMs in a stable state and verify traffic
    FC/FCOE - Remove and insert both the stacking cables, when the ICMs in a stable state    ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${STACKING_PORT1}  ${STACKING_PORT2}  ${STACKING_PORT3}  ${STACKING_PORT4}

FCOE :: Kill and restart the ISS.exe from the Standby ICM and verify traffic
    FC/FCOE - Kill and restart the ISS exe from the Standby ICM and verify traffic    ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${PotashIP2}  ${FCOE_Downlink_port1}  ${FCOE_Downlink_port2}  ${potash_root_password}

FC :: Kill and restart the ISS.exe from the Standby ICM and verify traffic
    FC/FCOE - Kill and restart the ISS exe from the Standby ICM and verify traffic    ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${PotashIP2}  ${FC_Downlink_Port1}  ${FC_Downlink_Port2}  ${potash_root_password}

FCOE :: Reboot Potash module and Check Traffic flow
    FC/FCOE - Reboot Potash module and Check Traffic flow   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}   ${PotashIP2}  ${Enc1_Potash_Module_Bay_No}  ${FCOE_Downlink_Port2}  ${FCOE_Downlink_Port1}
    Sleep  2 minutes

FC :: Reboot Potash module again and Check Traffic flow
    FC/FCOE - Reboot Potash module and Check Traffic flow   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP2}  ${PotashIP1}   ${Enc2_Potash_Module_Bay_No}  ${FC_Downlink_Port1}  ${FC_Downlink_Port2}
    Sleep  2 minutes

Verify Traffic after Reapply Configuration
    Verify Traffic after Reapply Configuration    ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${FC_Downlink_Port1}  ${FC_Downlink_Port2}  ${FCOE_Downlink_Port1}  ${FCOE_Downlink_Port2}
    Sleep  3 minutes

Set Required Suite Variables before Hot Plug ICM
    Set Required Suite Variables before Hot Plug ICM    ${APPLIANCE_IP}   ${OV_root_usr}  ${OV_root_pwd}

FCoE :: Hot Plug the Potash module and Check Traffic flow
    FCoE/FC - Hot Plug the Potash module and Check Traffic flow   ${APPLIANCE_IP}  ${Random_Password}  ${Enclosure1}  ${Enc1_Potash_Module_Bay_No}  ${PotashIP1}  ${PotashIP2}    ${FCOE_Downlink_Port2}  ${FCOE_Downlink_Port1}
    Sleep  15 minutes

FC :: Hot Plug the Potash module again and Check Traffic flow
    FCoE/FC - Hot Plug the Potash module and Check Traffic flow   ${APPLIANCE_IP}  ${Random_Password}  ${Enclosure2}  ${Enc2_Potash_Module_Bay_No}  ${PotashIP2}  ${PotashIP1}   ${FC_Downlink_Port1}  ${FC_Downlink_Port2}
    Sleep  15 minutes

Verify Setup After Running All Tests
    Verify Setup   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${FC_Downlink_Port1}  ${FC_Downlink_Port2}  ${FC_Uplink_Port1}  ${FC_Uplink_Port2}  ${FCOE_Downlink_Port1}  ${FCOE_Downlink_Port2}  ${FCOE_Uplink_Port1}  ${FCOE_Uplink_Port2}

Power off/on interconnect1
    Power off/on interconnect    ${APPLIANCE_IP}  ${Random_Password}  ${INTERCONNECT1}  ${PotashIP2}

Power off/on interconnect2
    Power off/on interconnect    ${APPLIANCE_IP}  ${Random_Password}  ${INTERCONNECT2}  ${PotashIP1}

Verify Setup After Running Poweroff/on interconnect
    Verify Setup   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${FC_Downlink_Port1}  ${FC_Downlink_Port2}  ${FC_Uplink_Port1}  ${FC_Uplink_Port2}  ${FCOE_Downlink_Port1}  ${FCOE_Downlink_Port2}  ${FCOE_Uplink_Port1}  ${FCOE_Uplink_Port2}
