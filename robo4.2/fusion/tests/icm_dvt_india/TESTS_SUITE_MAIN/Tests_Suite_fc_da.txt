*** Settings ***
Documentation       Run Prerequisites and run the FC DA Tests Suite
...
Resource           ../../../Resources/api/fusion_api_resource.txt
Resource           FCoE.txt

Variables           Data_Variables.py

Library             RoboGalaxyLibrary
Library             FusionLibrary


*** Variables ***

*** Keywords ***

*** Test cases ***

Login
    Fusion Api Login Appliance      ${APPLIANCE_IP}     ${Appliance_credentials}

Set Suite Variables before running Automation Suite
    Set Suite Variables before running Automation Suite  ${INTERCONNECT1}   ${INTERCONNECT2}

FC/FCOE :: Get Random Password for Potash
    ${Random_Password}=    Get Random Password for Potash  ${APPLIANCE_IP}  ${OV_root_usr}  ${OV_root_pwd}  ${Enclosure1}   ${Enc1_Potash_Module_Bay_No}
    Set Suite Variable    ${Random_Password}

Verify Setup before running automation suite
    Verify Setup   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${FC_DA_Downlink_Port1}  ${FC_DA_Downlink_Port2}  ${FC_DA_Uplink_Port1}  ${FC_DA_Uplink_Port2}  ${FCOE_Downlink_Port1}  ${FCOE_Downlink_Port2}  ${FCOE_Uplink_Port1}  ${FCOE_Uplink_Port2}

FC :: Check the multipath by enabling and disabling the ports In Mezz
    FC/FCOE - Check the multipath by enabling and disabling the ports In Mezz    ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${FC_DA_Downlink_Port1}  ${FC_DA_Downlink_Port2}


FCOE :: Reboot Potash module and Check Traffic flow
    FC/FCOE - Reboot Potash module and Check Traffic flow   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}   ${PotashIP2}  ${Enc1_Potash_Module_Bay_No}  ${FCOE_Downlink_Port2}  ${FCOE_Downlink_Port1}
    Sleep  5 minutes

FC :: Reboot Potash module again and Check Traffic flow
    FC/FCOE - Reboot Potash module and Check Traffic flow   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP2}  ${PotashIP1}   ${Enc2_Potash_Module_Bay_No}  ${FC_DA_Downlink_Port1}  ${FC_DA_Downlink_Port2}
    Sleep  5 minutes

Verify Setup After Running All Tests
    Verify Setup   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${FC_DA_Downlink_Port1}  ${FC_DA_Downlink_Port2}  ${FC_DA_Uplink_Port1}  ${FC_DA_Uplink_Port2}  ${FCOE_Downlink_Port1}  ${FCOE_Downlink_Port2}  ${FCOE_Uplink_Port1}  ${FCOE_Uplink_Port2}

Power off/on interconnect1
    Power off/on interconnect    ${APPLIANCE_IP}  ${Random_Password}  ${INTERCONNECT1}  ${PotashIP2}
    Sleep  5 minutes

Power off/on interconnect2
    Power off/on interconnect    ${APPLIANCE_IP}  ${Random_Password}  ${INTERCONNECT2}  ${PotashIP1}

Verify Setup After Running Poweroff/on interconnect
    Verify Setup   ${APPLIANCE_IP}  ${Random_Password}  ${PotashIP1}  ${FC_DA_Downlink_Port1}  ${FC_DA_Downlink_Port2}  ${FC_DA_Uplink_Port1}  ${FC_DA_Uplink_Port2}  ${FCOE_Downlink_Port1}  ${FCOE_Downlink_Port2}  ${FCOE_Uplink_Port1}  ${FCOE_Uplink_Port2}
