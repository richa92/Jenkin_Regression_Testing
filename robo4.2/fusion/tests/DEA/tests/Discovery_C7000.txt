*** Settings ***
Documentation     Adapter Discovery Test Suite 
...    = Usage =
...    | pybot | -L DEBUG | GIT_REPO_ROOT:<path> | APPLIANCE_IP:<fusion_ipv4> | Discovery_C7000_Tbird.txt | 
...    = Variables =
...    | GIT_REPO_ROOT | Required; Repo root path if NOT defined in environment variable|
...    | APPLIANCE IP     | Required; OneView IP address under test | 

Library           RoboGalaxyLibrary
Library           FusionLibrary
Library           MgmtFWLibrary
Library           Selenium2Library
Library           Collections

Variables         ${GIT_REPO_ROOT}/fusion/tests/DEA/variables/dea_variables.py
Variables         ${GIT_REPO_ROOT}/fusion/tests/DEA/variables/data_variables.py
Variables         ${GIT_REPO_ROOT}/mgmtfw/tests/thunderbird/variables/tBird_variables.py
Resource          ${GIT_REPO_ROOT}${RESOURCE_ROOT}/resource_all.txt
Resource          ${GIT_REPO_ROOT}${EM_RESOURCE_ROOT}/thunderbird_all.txt

#Uncomment line in Suite Setup to run inital setup of enclosure
Suite Setup       Run Keywords    Login to Fusion Via REST    #AND    Clean UP C7000 Environment    AND    Setup C7000 Ethernet Appliance
Suite Teardown    Logout of Fusion Via REST

*** Test Cases ***

TC 01: Verify Adapter is Present
    [Documentation]    Discover and verify the server bay where the adapter is present
    [Tags]    DEA    API    Automated    CNA
    Get Server Bay Based on Adapter Model  ${C7000_Adapter_Models}
    [Teardown]    Run Keyword if test failed    Fatal Error    msg=No server with ${Adapter_Test} adapter present in the enclosure

TC 02: Verify Server Hardware information in OV matches iLO in Power Aux mode
    [Documentation]    Verify Server Hardware information against ILO in Power Aux mode
    [Tags]    DEA    API    Automated    CNA
    ${bay_list} =  Get Server Bay Based on Adapter Model  ${C7000_Adapter_Models}
    :FOR    ${bay}    IN    @{bay_list}
    \    Power off server bay    ${bay}
    \    Log to console and logfile    Verifying Server Hardware
    \    Verify Server Hardware With ILO  ${bay}

TC 05: Verify Server Hardware information in OV matches iLO in Power On mode
   [Documentation]    Verify Server Hardware information against ILO in Power On mode
    [Tags]    DEA    API    Automated    CNA
    ${bay_list} =  Get Server Bay Based on Adapter Model  ${C7000_Adapter_Models}
    :FOR    ${bay}    IN    @{bay_list}
    \    Power on server bay    ${bay}
    \    Log to console and logfile    Verifying Server Hardware
    \    Verify Server Hardware With ILO  ${bay}

