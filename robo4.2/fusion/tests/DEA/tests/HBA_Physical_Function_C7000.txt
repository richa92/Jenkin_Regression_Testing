*** Settings ***

Documentation     pybot -L Trace -v APPLIANCE_IP:<APP_IPv4-IPv6> -v OA_IP:<OA_IPv4-IPv6> -v Adapter_Bay:<Bay_Number>
...               -v Adapter_Name:<Adapter_Name> -v Enclosures:<Encl_Name> -v GIT_REPO_ROOT:<ROOT_DIR> HBA_Physical_Function_C7000.txt
...               Fill in command required field for APPLIANCE_IP, Adapter_Name, and Enclosures.
Variables         ${GIT_REPO_ROOT}/fusion/tests/DEA/variables/dea_variables.py
Variables         ${GIT_REPO_ROOT}${VARIABLE_ROOT}/data_variables.py
Variables         ${GIT_REPO_ROOT}${EM_VARIABLES_ROOT}/tBird_variables.py
Resource          ${GIT_REPO_ROOT}${RESOURCE_ROOT}/resource_all.txt
Resource          ${GIT_REPO_ROOT}${RESOURCE_ROOT}/Altair_Resource.txt
Resource          ${GIT_REPO_ROOT}${EM_RESOURCE_ROOT}/thunderbird_all.txt
Library           ${GIT_REPO_ROOT}/fusion/Resources/api/Uris.py

Library           RoboGalaxyLibrary
Library           FusionLibrary
Library           Collections
Library           OperatingSystem
Library           AltairLibrary

Suite Setup       Login to Fusion Via REST
Suite Teardown    Logout of Fusion Via REST

*** Test Cases ***

TC 01: Verify HBA Primary Boot in Legacy Mode on Port 1 and BW Online for C7000 Server 
    [Documentation]    Verify HBA Primary Boot in Legacy Mode on Port 1 and BW Online chnages for C7000 Server for ${Adapter_Name}
    [Tags]    HBA    Primary    FC    Legacy    Automate
    ${bay_list} =  Create List  ${Adapter_Bay}
    ${connections} =  Change Connection Values for ID 1 and 2  ${enet_fc_connection}  FibreChannel  FC:${FC_Name}  FC:${FC_Name2}  ${fc_connection_target_primary_legacy}  ${NONE}
    Delete Server Profile    ${bay_list}
    fusion api set default api version    api=1000
    Create Server Profile with Connections Bootmode and BootOrder    ${bay_list}  ${server_profiles_eth[0]}  ${connections}  ${Legacy_bootmode}  ${Gen9_boot_HardDisk}
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    Change BW Values    ${bay_list}    ${server_profiles_eth[0]}    ${connections}    ${Legacy_bootmode}    ${Gen9_boot_HardDisk}    5000
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    [Teardown]    Run Keyword if test failed    Send Email Notify

TC 02: Verify HBA Secondary Boot in Legacy Mode on Port 2 and BW Online for C7000 Server
    [Documentation]    Verify HBA Primary Boot in Legacy  Mode on Port 2 and BW Online changes for C7000 Server for ${Adapter_Name}
    [Tags]    HBA    Secondary    FC    Legacy    Automate
    ${bay_list} =  Create List  ${Adapter_Bay}
    ${connections} =  Change Connection Values for ID 1 and 2  ${enet_fc_connection}  FibreChannel  FC:${FC_Name}  FC:${FC_Name2}  ${fc_connection_target_primary_legacy}  ${fc_connection_target_secondary_legacy}
    Delete Server Profile    ${bay_list}
    fusion api set default api version    api=1000
    Create Server Profile with Connections Bootmode and BootOrder    ${bay_list}  ${server_profiles_eth[0]}  ${connections}  ${Legacy_bootmode}  ${Gen9_boot_HardDisk}
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    Change BW Values    ${bay_list}    ${server_profiles_eth[0]}    ${connections}    ${Legacy_bootmode}    ${Gen9_boot_HardDisk}    5000
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    [Teardown]    Run Keyword if test failed    Send Email Notify

TC 03: Verify HBA Primary Boot in UEFI Mode on Port 1 and BW Online for C7000 Server
    [Documentation]    Verify HBA Primary Boot in UEFI Mode on Port 1 and BW Online changes for C7000 Server for ${Adapter_Name}
    [Tags]    HBA    Primary1    FC    UEFI
    ${bay_list} =  Create List  ${Adapter_Bay}
    ${connections} =  Change Connection Values for ID 1 and 2  ${enet_fc_connection}  FibreChannel  FC:${FC_Name}  FC:${FC_Name2}  ${fc_connection_target_primary}  ${NONE}
    Delete Server Profile    ${bay_list}
    fusion api set default api version    api=1000
    Create Server Profile with Connections Bootmode and BootOrder    ${bay_list}  ${server_profiles_eth[0]}  ${connections}  ${UEFI_bootmode}  ${Gen9_boot_HardDisk}
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    Change BW Values    ${bay_list}    ${server_profiles_eth[0]}    ${connections}    ${UEFI_bootmode}    ${Gen9_boot_HardDisk}    5000
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    [Teardown]    Run Keyword if test failed    Send Email Notify

TC 04: Verify HBA Secondary Boot in UEFI Mode on Port 2 and BW Online for C7000 Server
    [Documentation]    Verify HBA Secondary Boot in UEFI Mode on Port 2 and BW Online changes for C7000 Server for ${Adapter_Name}
    [Tags]    HBA    Secondary1    FC    UEFI
    ${bay_list} =  Create List  ${Adapter_Bay}
    ${connections} =  Change Connection Values for ID 1 and 2  ${enet_fc_connection}  FibreChannel  FC:${FC_Name3}  FC:${FC_Name2}  ${fc_connection_target_primary}  ${fc_connection_target_secondary}
    Delete Server Profile    ${bay_list}
    fusion api set default api version    api=1000
    Create Server Profile with Connections Bootmode and BootOrder    ${bay_list}  ${server_profiles_eth[0]}  ${connections}  ${UEFI_bootmode}  ${Gen9_boot_HardDisk}
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    Change BW Values    ${bay_list}    ${server_profiles_eth[0]}    ${connections}    ${UEFI_bootmode}    ${Gen9_boot_HardDisk}    5000
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    [Teardown]    Run Keyword if test failed    Send Email Notify

TC 05: Verify HBA Primary Boot in UEFIOptimized Mode on Port 1 and BW Online for C7000 Server
    [Documentation]    Verify HBA Primary Boot in UEFIOptimized Mode on Port 1 and BW Online changes for C7000 Server for ${Adapter_Name}
    [Tags]    HBA    Primary    FC    UEFIOptimized
    ${bay_list} =  Create List  ${Adapter_Bay}
    ${connections} =  Change Connection Values for ID 1 and 2  ${enet_fc_connection}  FibreChannel  FC:${FC_Name}  FC:${FC_Name2}  ${fc_connection_target_primary}  ${NONE}
    Delete Server Profile    ${bay_list}
    fusion api set default api version    api=1000
    Create Server Profile with Connections Bootmode and BootOrder    ${bay_list}  ${server_profiles_eth[0]}  ${connections}  ${UEFIOptimized_bootmode}  ${Gen9_boot_HardDisk}
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    Change BW Values    ${bay_list}    ${server_profiles_eth[0]}    ${connections}    ${UEFIOptimized_bootmode}    ${Gen9_boot_HardDisk}    5000
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    [Teardown]    Run Keyword if test failed    Send Email Notify

TC 06: Verify HBA Secondary Boot in UEFIOptimized Mode on Port 2 and BW Online for C7000 Server
    [Documentation]    Verify HBA Secondary Boot in UEFIOptimized Mode on Port 2 and BW Online changes for C7000 Server for ${Adapter_Name}
    [Tags]    HBA    Secondary    FC    UEFIOptimized
    ${bay_list} =  Create List  ${Adapter_Bay}
    ${connections} =  Change Connection Values for ID 1 and 2  ${enet_fc_connection}  FibreChannel  FC:${FC_Name3}  FC:${FC_Name2}  ${fc_connection_target_primary}  ${fc_connection_target_secondary}
    Delete Server Profile    ${bay_list}
    fusion api set default api version    api=1000
    Create Server Profile with Connections Bootmode and BootOrder    ${bay_list}  ${server_profiles_eth[0]}  ${connections}  ${UEFIOptimized_bootmode}  ${Gen9_boot_HardDisk}
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    Change BW Values    ${bay_list}    ${server_profiles_eth[0]}    ${connections}    ${UEFIOptimized_bootmode}    ${Gen9_boot_HardDisk}    5000
    Verify Network Connection by Pinging to OS IP    ${bay_list}
    [Teardown]    Run Keywords    Delete Server Profile    ${bay_list}    AND    Run Keyword if test failed    Send Email Notify
    