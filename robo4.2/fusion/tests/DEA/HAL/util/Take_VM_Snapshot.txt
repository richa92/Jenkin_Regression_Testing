*** Settings ***
Documentation   Takes a snapshot of a specified VM name
...             = USAGE =
...             | pybot | -v VM_NAME:<Name> | -v SNAPSHOT:Initial | Take_VM_Snapshot.txt |
...             = Variables =
...             | FUSION_IP | Fusion IP Address |
...             | SNAPSHOT      | Title of snapshot to be taken |

Library             RoboGalaxyLibrary       # DVTs Robot Framework extensions
Resource            ../resources/defaults.txt
Suite Setup         Connect to VI Server    ${vSphere HostName}     ${vSphere Username}     ${vSphere Password}
Suite Teardown      Disconnect from VI Server
Force Tags          DCS

*** Variables ***


*** Test Cases ***
Take Snapshot of VM
	${VM Name}=    Get VM Name by IP    ${FUSION IP}
	Set Suite Variable    ${VM Name}    ${VM Name}
    Create VM Snapshot      ${VM Name}      ${Snapshot}

VM has completed Snapshot
    ${Status}=                      Get VM Status   ${VM Name}
    Should be Equal As Strings      POWERED ON      ${Status}   msg=VM ${VM Name} is not in Powered On State.

