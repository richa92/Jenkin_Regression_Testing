*** Settings ***
Documentation   Reverts Specified VM to a specific Snapshot
...             = USAGE =
...             | pybot | -v VM_NAME:<Name> | -v SNAPSHOT:Initial | Revert_VM_to_Snapshot.txt |
...             = Variables =
...             | FUSION_IP | Fusion IP Address |
...             | SNAPSHOT      | Title of snapshot to be reverted to |

Library             RoboGalaxyLibrary       # DVTs Robot Framework extensions
Resource            ../resources/defaults.txt
Suite Setup         Connect to VI Server    ${vSphere HostName}     ${vSphere Username}     ${vSphere Password}
Suite Teardown      Disconnect from VI Server
Force Tags          DCS


*** Variables ***


*** Test Cases ***
Revert VM to Snapshot
	${VM Name}=    Get VM Name by IP    ${FUSION IP}
	Set Suite Variable    ${VM Name}    ${VM Name}
    Revert VM To Named Snapshot     ${VM Name}      ${Snapshot}

VM has completed reverting to Snapshot
    ${Status}=                      Get VM Status   ${VM Name}
    Should be Equal As Strings      POWERED ON      ${Status}   msg=VM ${VM Name} is not in Powered On State.

