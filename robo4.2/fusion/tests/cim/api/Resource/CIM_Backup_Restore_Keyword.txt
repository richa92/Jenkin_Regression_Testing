*** Settings ***
Library    json
Library     RoboGalaxyLibrary
Library     FusionLibrary
Library     OperatingSystem
Library     BuiltIn
Library     Collections
Library     XML
Library     SSHLibrary
Library     String
Library    requests
Library     robot.api.logger
Resource    ../Resource/CIM_Common_Resource.txt

*** Keywords ***


Download Backup for OneView
    [Documentation]    Download backup
    [Arguments]    ${filename}=None
    ${uri}=    Get Backup URI
    ${Backup} =    Fusion Api Get Backup
    @{members} =    Get From Dictionary    ${Backup}    members
    ${file} =    Run Keyword If    '${filename}'=='None'
    ...    Set Variable    ${members[0]['id']}
    ...    ELSE    Set Variable    ${filename}
    Set Global Variable   ${file}
    ${resp} =    Download Backup    ${uri}    ${file}
    Should Be Equal    '${resp['status_code']}'    '200'    msg= Backup DOwnload Fail
    [return]    ${file}