*** Settings ***
Documentation		Read Only Directory users Happy path
Resource			../Resource/CIM_CommonResource.txt
Resource			../Resource/CIM_Activity.txt
Library				FusionLibrary
Force Tags			Buildup
Suite Setup			Load Test Data and Open Browser
Suite Teardown		Logout And Close All Browsers
Variables			../../../../FusionLibrary/ui/general/login_elements.py
#Variables			../../../../FusionLibrary/ui/business_logic/general/dashboard_elements.py
Variables			../../../../FusionLibrary/ui/settings/settings_elements.py
Variables			../../../../../rg/RoboGalaxyLibrary/ui/common/PerfConstants_File.py

*** Variables ***

${activityname}			Create support dump
${resource}				Appliance
${activitystate}		Completed
${activityowner}		Atlas Readonly

*** Test Cases ***

Login as Read only Directory User
	[Documentation]	Login as read only directory User
	${user} =	Get data by property	${TestData.DirectoryUsers}	role	Readonly
	Login as Directory User	${user[0].domainName}	${user[0].userName}	${user[0].userPswd}

	#Verify create support dump
	Navigate to page	Settings
	${status} =	Fusion UI Create Support Dump From Data File	@{TestData.supportdump}
	Should Be True	${status}	msg=Failed to create Support Dump
	wait for element visible	${FusionSettingsPage.ID_VALIDATE_SUCCESS}	${PerfConstants.RESTART_LABEL_VISIBLE}

	#Verify Create Support Dump activity in Activity Page
	Verify Activity Existence in Activity Page	${activityname}	${resource}	${activitystate}	${activityowner}

