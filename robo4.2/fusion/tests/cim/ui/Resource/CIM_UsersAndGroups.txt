*** Settings ***
Library			RoboGalaxyLibrary
Library			FusionLibrary
Library			BuiltIn
Library			String
Library			Collections
Variables		../../../../FusionLibrary/ui/business_logic/general/base_elements.py
Variables		../../../../FusionLibrary/ui/business_logic/usersandgroups/usersandgroups_elements.py

*** Keywords ***
Verify user logged in
	[Arguments]	${user}	${roles}
	[return]	${blnElemetVisible}
	wait for element visible	${FusionBasePage.ID_MAIN_MENU_CONTROL}
	wait for element visible	${FusionUserandGroupsPage.ID_ELEMENT_USER_SESSION}
	Click Element	${FusionUserandGroupsPage.ID_ELEMENT_USER_SESSION}
	${user_name_object}=	Get Ui Object	${FusionUserandGroupsPage.ID_ELEMENT_USER_NAME}	${user}
	wait for element visible	${FusionUserandGroupsPage.ID_ELEMENT_EDIT}	10

	Click Element	${FusionUserandGroupsPage.ID_ELEMENT_EDIT}
	wait for element visible	${FusionUserandGroupsPage.ID_ELEMENT_USER_ROLE_LABEL}	10
	${user_role_object}=	Get Ui Object	${FusionUserandGroupsPage.ID_ELEMENT_ROLE}	${roles}
	${session_user_object}=	Get Ui Object	${FusionUserandGroupsPage.ID_ELEMENT_SESSION_USER}	${user}
	Log	${session_user_object}
	wait for element visible	${user_role_object}	10
	wait for element visible	${session_user_object}	10

	#Page Should Contain Element	${user_role_object}
	${blnElemetVisible}=	wait for element visible	${FusionUserandGroupsPage.ID_ELEMENT_USER_ROLE_LABEL}	10
	${user}=	Get Ui Object	${FusionUserandGroupsPage.ID_ELEMENT_USER_ROLE_LABEL}
	wait for element visible	${FusionUserandGroupsPage.ID_USER_EDIT_CANCEL}	10
	Click Element	${FusionUserandGroupsPage.ID_USER_EDIT_CANCEL}
	
Create user by Name
	[Arguments]	${fusionuser}
	[return]	${blnCreateUser}
	${user} =	Get data by property	${TestData.users}	name	${fusionuser}
	${blnCreateUser}=	Fusion UI Create User	${user[0]}

Verify user data by Name
	[Arguments]	${fusionuser}
	[return]	${blnUserData}
	${user} =	Get data by property	${TestData.users}	name	${fusionuser}
	${blnUserData}=		Fusion UI verify userdata	${user[0]}

#-----------------------------------------------------------------------------------
#	Keywords related to Add/Edit User page
#-----------------------------------------------------------------------------------

Enter data in 'Login name' field - Add User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${CreateUserElements.ID_INPUT_USER_LOGIN_NAME}	60
	Input Text	${CreateUserElements.ID_INPUT_USER_LOGIN_NAME}	${data}
	Remove focus from active element

Enter data in 'Full name' field - Add User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${CreateUserElements.ID_INPUT_USER_FULL_NAME}	60
	Input Text	${CreateUserElements.ID_INPUT_USER_FULL_NAME}	${data}
	Remove focus from active element

Enter data in 'Initial password' field - Add User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${CreateUserElements.ID_INPUT_USER_INITIAL_PASSWORD}	60
	Input Text	${CreateUserElements.ID_INPUT_USER_INITIAL_PASSWORD}	${data}
	Remove focus from active element

Enter data in 'Confirm password' field - Add User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${CreateUserElements.ID_INPUT_USER_CONFIRM_PASSWORD}	60
	Input Text	${CreateUserElements.ID_INPUT_USER_CONFIRM_PASSWORD}	${data}
	Remove focus from active element

Select option in 'Role' field - Add User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${CreateUserElements.ID_RADIO_ROLE_SPECIALIZED}	60
	Run Keyword If	'${data}'=='Specialized'	Click Element	${CreateUserElements.ID_RADIO_ROLE_SPECIALIZED}
	...	ELSE IF	'${data}'=='Full'	Click Element	${CreateUserElements.ID_RADIO_ROLE_FULL}
	...	ELSE IF	'${data}'=='Read only'	Click Element	${CreateUserElements.ID_RADIO_ROLE_READ_ONLY}
	...	ELSE	Log	Option not selected in 'Role' field	WARN
	Remove focus from active element

Enter data in 'Email' field - Add User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${CreateUserElements.ID_INPUT_USER_EMAIL}	60
	Input Text	${CreateUserElements.ID_INPUT_USER_EMAIL}	${data}
	Remove focus from active element

Enter data in 'Office phone' field - Add User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${CreateUserElements.ID_INPUT_USER_OFFICE_PHONE}	60
	Input Text	${CreateUserElements.ID_INPUT_USER_OFFICE_PHONE}	${data}
	Remove focus from active element

Enter data in 'Mobile phone' field - Add User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${CreateUserElements.ID_INPUT_USER_MOBILE_PHONE}	60
	Input Text	${CreateUserElements.ID_INPUT_USER_MOBILE_PHONE}	${data}
	Remove focus from active element

Enter data in 'Login name' field - Edit User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${EditUserElements.ID_INPUT_EDIT_LOGIN_NAME}	60
	Input Text	${EditUserElements.ID_INPUT_EDIT_LOGIN_NAME}	${data}
	Remove focus from active element

Enter data in 'Full name' field - Edit User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${EditUserElements.ID_INPUT_EDIT_FULL_NAME}	60
	Input Text	${EditUserElements.ID_INPUT_EDIT_FULL_NAME}	${data}
	Remove focus from active element

Enter data in 'Initial password' field - Edit User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${EditUserElements.ID_INPUT_EDIT_INITIAL_PASSWORD}	60
	Input Text	${EditUserElements.ID_INPUT_EDIT_INITIAL_PASSWORD}	${data}
	Remove focus from active element

Enter data in 'Confirm password' field - Edit User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${EditUserElements.ID_INPUT_EDIT_CONFIRM_PASSWORD}	60
	Input Text	${EditUserElements.ID_INPUT_EDIT_CONFIRM_PASSWORD}	${data}
	Remove focus from active element

Select option in 'Role' field - Edit User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${EditUserElements.ID_RADIO_EDIT_ROLE_SPECIALIZED}	60
	Run Keyword If	'${data}'=='Specialized'	Click Element	${EditUserElements.ID_RADIO_EDIT_ROLE_SPECIALIZED}
	...	ELSE IF	'${data}'=='Full'	Click Element	${EditUserElements.ID_RADIO_EDIT_ROLE_FULL}
	...	ELSE IF	'${data}'=='Read only'	Click Element	${EditUserElements.ID_RADIO_EDIT_ROLE_READ_ONLY}
	...	ELSE	Log	Option not selected in 'Role' field	WARN
	Remove focus from active element

Enter data in 'Email' field - Edit User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${EditUserElements.ID_INPUT_EDIT_EMAIL}	60
	Input Text	${EditUserElements.ID_INPUT_EDIT_EMAIL}	${data}
	Remove focus from active element

Enter data in 'Office phone' field - Edit User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${EditUserElements.ID_INPUT_EDIT_OFFICE_PHONE}	60
	Input Text	${EditUserElements.ID_INPUT_EDIT_OFFICE_PHONE}	${data}
	Remove focus from active element

Enter data in 'Mobile phone' field - Edit User page
	[Arguments]	${data}
	Wait Until Element Is Visible	${EditUserElements.ID_INPUT_EDIT_MOBILE_PHONE}	60
	Input Text	${EditUserElements.ID_INPUT_EDIT_MOBILE_PHONE}	${data}
	Remove focus from active element
