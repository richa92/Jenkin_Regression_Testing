*** Settings ***
Documentation		Add Licenses to Fusion Appliance
Resource			../Resource/CIM_CommonResource.txt
Resource			../Resource/CIM_Activity.txt
Test Setup			Load Test Data and Open Browser
Test Teardown		Logout and close all browsers
Variables			../../../../FusionLibrary/ui/business_logic/general/activity_elements.py
Library				XML

*** Variables ***
${searchtext}		ADD_LICENSE_SUCCESS

*** Test Cases ***
As an Administrator I want to Add License to Fusion Appliance
	Log into Fusion appliance as Administrator
	${status} =	Fusion UI Add License	@{TestData.licenses}
	Should Be True	${status}	msg=Failed to add license

	#Verify Add License activity in Activity Page.
	Navigate to Activity page
	${dataele} =	XML.Get Elements	${DATAFILE}	licenses/license
	${datacount}=	Get Length	${dataele}
	${count}=	Get Matching XPath Count	//*[@id='hp-activities']/tbody//tr[//span[text()='Add License'] and td/a[text()='Licenses']]
	Run Keyword If	${count} >= ${datacount}	Log	Given alert "Add License -- Licenses" is listed in activity page
	Run Keyword Unless	${count} >= ${datacount}	Fail	Given alert "Add License -- Licenses" is not present in the activity page

	#Verify entry in auditlog file.
	Download and verify entry in Audit log file	${DownloadPath}	${searchtext}
