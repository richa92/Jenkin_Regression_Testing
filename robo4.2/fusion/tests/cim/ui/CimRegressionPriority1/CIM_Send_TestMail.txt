*** Settings ***
Documentation       Send Test Email For the Alert Filter Created
Resource            ../Resource/CIM_CommonResource.txt
Resource            ../Resource/CIM_Settings.txt
Resource            ../Resource/CIM_Activity.txt
Library             FusionLibrary
Library             SSHLibrary
Force Tags          Buildup
Suite Setup         Load Test Data and Open Browser
Suite Teardown      Logout and close all browsers
Variables           ../../../../FusionLibrary/ui/business_logic/settings/notifications_elements.py

*** Variables***
${searchtext}       Sending test email completed successfully
${activityname}     Send test email
${resource}         Appliance
${activitystate}    Completed
${activityowner}    Administrator


*** Test Cases ***

Send Test Email
    [Documentation]    Send Test Email To Validate that Emails are reaching to Recipent
    Log into Fusion appliance as Administrator
    :FOR    ${alert}    IN    @{TestData.send_test_mail}
    \    wait for element and click    ${FusionBasePage.ID_MAIN_MENU_CONTROL}
    \    wait for element and click    ${FusionBasePage.ID_MENU_LINK_SETTINGS}
    \    wait for element and click    ${NotificationElements.ID_NOTIFICATION}
    \    ${sendmail_locator} =    Set Variable    //table[@id='cic-notification-alerts-table']//tr[td [contains(text(),'%s')]]/td/a[contains(text(),'Send Test Email')]
    \    ${sendmail} =    Get UI Object    ${sendmail_locator}   ${alert.name}
    \    wait for element and click    ${sendmail}
    \    wait for element and click    ${NotificationElements.ID_BUTTON_NOTIFICATION_SEND_MAIL}
    \    wait for element visible    xpath=.//*[@id='hp-page-notifications']//div[contains(text(),'Completed')] 60
    \    Verify Activity Existence in Activity Page    ${activityname}    ${resource}    ${activitystate}    ${activityowner}
