*** Settings ***
Documentation	Add users - negative
Resource		../Resource/CIM_CommonResource.txt
Resource		../Resource/CIM_UsersAndGroups.txt
Test Setup		Load Test Data and Open Browser
Test Teardown	Logout and close all browsers
Variables		../../../../FusionLibrary/ui/business_logic/usersandgroups/usersandgroups_elements.py

*** Test Cases ***
Add Users - Negative test case
	Log into Fusion appliance as Administrator
	Navigate to page	Users and Groups
	Select action	Add user
	Enter name of existing user in 'Login name' field and verify validation message
	Enter invalid value in 'Login name' field and verify validation message
	Skip entering value in 'Login name' field and verify validation message
	Enter invalid value in 'Full name' field and verify validation message
	Skip entering value in 'Initial password' field and verify validation message
	Enter a short password in 'Initial/Confirm password' field and verify validation message
	Enter invalid value in 'Email' field and verify validation message
	Skip selecting value in 'Role' field and verify validation message
	wait for element and click	${CreateUserElements.ID_BTN_USER_ADD_CANCEL}

*** Keywords ***
Enter name of existing user in 'Login name' field and verify validation message
	Enter data in 'Login name' field - Add User page	administrator
	Verify validation error message	LOGIN_NAME_EXISTS

Enter invalid value in 'Login name' field and verify validation message
	Enter data in 'Login name' field - Add User page	invalid@hpe.com
	Verify validation error message	LOGIN_NAME_INVALID

Skip entering value in 'Login name' field and verify validation message
	Enter data in 'Login name' field - Add User page	${EMPTY}
	Verify validation error message	LOGIN_FIELD_REQUIRED

Enter invalid value in 'Full name' field and verify validation message
	Enter data in 'Full name' field - Add User page	Fullname! Invalid?@
	Verify validation error message	FULLNAME_INVALID

Skip entering value in 'Initial password' field and verify validation message
	Enter data in 'Initial password' field - Add User page	${EMPTY}
	wait for element and click	${CreateUserElements.ID_BTN_USER_ADD}
	Verify validation error message	PASSWORD_FIELD_REQUIRED

Enter a short password in 'Initial/Confirm password' field and verify validation message
	Enter data in 'Initial password' field - Add User page	123
	Enter data in 'Confirm password' field - Add User page	123
	Verify validation error message	PASSWORD_SHORT

Enter invalid value in 'Email' field and verify validation message
	Enter data in 'Email' field - Add User page	invalidemail
	Verify validation error message	EMAIL_INVALID

Skip selecting value in 'Role' field and verify validation message
	Select option in 'Role' field - Add User page	${EMPTY}
	wait for element and click	${CreateUserElements.ID_BTN_USER_ADD}
	Verify validation error message	ROLE_REQUIRED

#-----------------------------------------------------------------------------------
Keyword	verify validation errors
#-----------------------------------------------------------------------------------
Verify validation error message
	[Arguments]	${Error_Message}
	Run Keyword If	'${Error_Message}'=='LOGIN_NAME_EXISTS'	Wait Until Element is Visible	//label[@for='fs-user-loginname' and @class='hp-error' and text()='This login name is already in use.']
	...	ELSE IF	'${Error_Message}'=='LOGIN_NAME_INVALID'	Wait Until Element is Visible	//label[@for='fs-user-loginname' and @class='hp-error' and contains(text(), 'Login name should contain only letters, digits and the characters')]
	...	ELSE IF	'${Error_Message}'=='LOGIN_FIELD_REQUIRED'	Wait Until Element is Visible	//label[@for='fs-user-loginname' and @class='hp-error' and text()='Required']
	...	ELSE IF	'${Error_Message}'=='FULLNAME_INVALID'	Wait Until Element is Visible	//label[@for='fs-user-fullname' and @class='hp-error' and text()="Full name should contain only letters, digits and the characters ' . - _ and space."]
	...	ELSE IF	'${Error_Message}'=='PASSWORD_FIELD_REQUIRED'	Wait Until Element is Visible	//label[@for='fs-user-initialpasswd' and @class='hp-error' and text()='Required']
	...	ELSE IF	'${Error_Message}'=='PASSWORD_SHORT'	Wait Until Element is Visible	//label[@for='fs-user-initialpasswd' and @class='hp-error' and text()='Enter at least 8 characters.']
	...	ELSE IF	'${Error_Message}'=='EMAIL_INVALID'	Wait Until Element is Visible	//label[@for='fs-user-email' and @class='hp-error' and text()='Enter a valid email address.']
	...	ELSE IF	'${Error_Message}'=='ROLE_REQUIRED'	Wait Until Element is Visible	//label[@for='fs-user-role-validator' and @class='hp-error' and text()='At least one role must be selected.']
