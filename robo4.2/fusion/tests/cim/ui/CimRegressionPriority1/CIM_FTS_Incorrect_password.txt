*** Settings ***
Documentation				First time Setup with Incorrect Initial and Change password
Resource					../Resource/CIM_CommonResource.txt
Resource					../Resource/CIM_Settings.txt
Variables					../../../../FusionLibrary/ui/general/login_elements.py
Test Setup					Load All Test Data
Test Teardown				Logout and close all browsers

*** Test Cases ***
As an Administrator I want to set Incorrect password in Login and Initial password page.
	Open Browser	${ApplianceURL}	${Browser}

	#Validate Agree and Disagree in EULA page.
	Wait Until Element Is Visible	${FusionLoginPage.ID_BTN_EULA_DISAGREE}
	Click Element	${FusionLoginPage.ID_BTN_EULA_DISAGREE}
	Page Should Contain	you cannot proceed
	Wait Until Element Is Visible	${FusionLoginPage.ID_BTN_EULA_CONFIRM_DISAGREE}
	Click Button	${FusionLoginPage.ID_BTN_EULA_CONFIRM_DISAGREE}
	wait for element and click	${FusionLoginPage.ID_BTN_EULA_AGREE}

	#Validate Serivce access is Enabled by default
	Wait Until Element Is Visible	id=hp-eula-supportaccess-content
	${Status}=	Run Keyword And Return Status	Element Should Be Visible	${FusionLoginPage.ID_TOGGLE_HP_SUPPORT_ACCESS_ENABLE}
	Should Be True	${Status}	msg=Service access is not enabled
	Click Button	${FusionLoginPage.ID_BTN_EULA_OK}

	#Validate Incorrect password for First time login page.
	Wait Until Element Is Visible	${FusionLoginPage.ID_INPUT_LOGIN_USER}
	Enter First Time Login credentials	${TestData.envconfigs[0].appliance_username}	${TestData.envconfigs[0].appliance_password}
	Wait Until Element Is Visible	${FusionLoginPage.ID_LABEL_LOGIN_STATUS}
	Enter First Time Login credentials	${TestData.envconfigs[0].appliance_username}	${TestData.envconfigs[0].appliance_default_password}

	#Validate Incorrect password for Initial password page
	Wait Until Element Is Visible	${FusionLoginPage.ID_INPUT_CONFIRM_PASSWORD}
	Set Initial password	${TestData.envconfigs[0].appliance_password}	${TestData.envconfigs[0].appliance_default_password}
	Wait Until Element Is Visible	//*[text()='Passwords must match.']
	Set Initial password	${TestData.envconfigs[0].appliance_password}	${TestData.envconfigs[0].appliance_password}
	Wait Until Element Is Visible	${FusionLoginPage.ID_INPUT_APPLIANCE_HOSTNAME}
