*** Settings ***
Documentation    Delete the scope
Resource            ../Resource/CIM_CommonResource.txt
Resource            ../Resource/CIM_Activity.txt
Library             XML
Library             FusionLibrary
Force Tags          Buildup
Suite Setup         Load Test Data and Open Browser
Suite Teardown      Logout And Close All Browsers


*** Test Cases ***

#################################Scenario############################################

Delete Scope
    [Documentation]    Delete the scope and validate that scope is deleted
    Log into Fusion appliance as Administrator
    ${status} =  Fusion UI Delete Scope   @{TestData.remove_scopes}
    Should Be True   ${status}    msg=Failed to Delete All scopes

    #Verify Delete Scope Activity in Activity Page
    Navigate to Activity page
    wait for element visible    ${FusionActivityPage.ID_ACTIVITY_TABLE} 10
    ${dataele}=   XML.Get Elements    ${DATAFILE}    remove_scopes/scope
    ${datacount}=   Get Length  ${dataele}
    :FOR    ${scope}    IN    @{TestData.remove_scopes}
    \   ${locator} =    Set Variable    //*[@id='hp-activities']/tbody//tr[${datacount}][//span[contains(text(),'Delete')]][td[contains(text(),'%s')]][td/span[contains(text(),'Completed')]]
    \   ${delete_activity} =    Get UI Object    ${locator}   ${scope.name}
    \   ${count}=   Get Matching XPath Count    ${delete_activity}
    \   Run Keyword If  ${count} == 1   Log    Scope Deleted is listed in activity page
    \   Run Keyword Unless  ${count} == 1   Fail    Scope Deleted is not listed in activity page
    \   ${datacount}=   Evaluate    ${datacount}-${count}