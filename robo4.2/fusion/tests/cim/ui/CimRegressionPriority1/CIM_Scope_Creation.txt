*** Settings ***
Documentation       Create Scope On DCS or Hardware
Resource            ../Resource/CIM_CommonResource.txt
Resource            ../Resource/CIM_Activity.txt
Library             FusionLibrary
Library             XML
Force Tags          Buildup
Suite Setup         Load Test Data and Open Browser
Suite Teardown      Logout and Close All Browsers

*** Variables ***

${count}            1

*** Test Cases ***


#################################Scenario############################################

Create Scope
    [Documentation]    Create Scope and assign to Enclosure
    Log into Fusion appliance as Administrator
    Fusion UI Create Scope    @{TestData.empty_scopes}
    Fusion UI Edit Scope For Enclosure    @{TestData.scope_enclosures}
    Fusion UI Validate Resource Assigned To Scope    @{TestData.create_enclsoure_scopes}

    #Validate Scope in Activity Page
    Navigate to Activity page
    wait for element visible    ${FusionActivityPage.ID_ACTIVITY_TABLE} 10
    ${dataele}=   XML.Get Elements    ${DATAFILE}    scope_enclosures/enclosure
    ${datacount}=   Get Length  ${dataele}
    :FOR    ${enclosure}    IN    @{TestData.scope_enclosures}
    \   ${value} =  get variable value  ${enclosure.name}
    \   ${count}=   Get Matching XPath Count    //*[@id='hp-activities']/tbody//tr[${datacount}][//span[text()='Update'] and td/a[text()='${value}']]
    \   Run Keyword If  ${count} >= 1   Log    Given alert "Add -- ${value}" is listed in activity page
    \   Run Keyword Unless  ${count} >= 1   Fail    Given alert "Add -- ${value}" is not present in the activity page
    \   ${datacount}=   Evaluate    ${datacount}-${count}
