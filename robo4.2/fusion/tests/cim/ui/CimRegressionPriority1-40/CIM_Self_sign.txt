*** Settings ***
Documentation       Creation Of Self Sign Certificate
Resource            ../Resource/CIM_CommonResource.txt
Resource            ../Resource/CIM_Certificate.txt
Resource            ../Resource-40/CIM_Certificate.txt
Force Tags          Buildup
Library             String
Library             Collections
Library             DateTime
Variables         ../../../../FusionLibrary/ui/business_logic/general/base_elements.py
Variables         ../../../../FusionLibrary/ui/business_logic/general/activity_elements.py
Suite Setup         Load Test Data and Open Browser
Suite Teardown      Logout And Close All Browsers

*** Variables ***
${activityname}     Certificate SelfSigned Configuration.
${activitystate}    Completed
${activityowner}    Administrator

*** Test Cases ***
Create Self Signed certificate
    [Documentation]    Create Appliance Self Signed Certificate
    Log into Fusion appliance as Administrator
    Create Appliance Self-Signed Certificate

    #Validate activity Page
    Verify Activity Existence in Activity Page  ${activityname}   ${activitystate}   ${activityowner}

*** Keywords ***
Verify Activity Existence in Activity Page
    [Documentation]    Verify Certificate SelfSigned Configuration activity in Activity page
    [Arguments]    ${activityname}    ${activitystate}    ${activityowner}
    Navigate to page    Activity
    wait for element visible    //*[@id='hp-activities']/tbody//tr[1][//span[text()='${activityname}'] and td/span[text()='${activitystate}'] and td/div[text()='${activityowner}']] 10
    ${count}=    Get Matching XPath Count    //*[@id='hp-activities']/tbody//tr[1][//span[text()='${activityname}'] and td/span[text()='${activitystate}'] and td/div[text()='${activityowner}']]
    Run Keyword If  ${count} == ${activityCount}   Log   Given alert '${activityname}' with state '${activitystate}' is present in the activity page
    Run Keyword Unless  ${count} == ${activityCount}   Fail   Given alert '${activityname}' with state '${activitystate}' is not present in the activity page ${activityCount} and ${count}
