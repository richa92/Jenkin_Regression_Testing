*** Settings ***
Documentation        Firts Time Setup
Resource            ../Resource/CIM_CommonResource.txt
Resource            ../Resource-41/CIM_CommonResource.txt
Resource            ../Resource/CIM_Activity.txt
Resource            ../Resource-41/CIM_Settings.txt
Test Setup            Load Test Data and Open Browser
Test Teardown        Logout and close all browsers
Library                RoboGalaxyLibrary\\utilitylib\\file_utils.py

*** Variables ***
${activityname}        Network Configuration
${resource}            Networking
${activitystate}    Completed
${activityowner}    Administrator

*** Test Cases ***
As an Administrator I want to do First Time Setup
    Fusion UI Configure First Time Wizard
    #Close Oneview Tutorial Dialog Box if Exits
    Close OneView Tutorial Dialog

    #Verify Create FTS activity in Activity Page
    Navigate to page    Activity
    ${applianceIP} =    Get appliance ip from url
    ${activityname}=    Catenate    ${TestData.ftwizard[0].appliance_hostname}        does not resolve to     ${applianceIP}    address.
    ${count}=     Get Matching XPath Count    .//*[@id='hp-activities']/tbody/tr[1]//span[text()='${activityname}']
    Run Keyword If    ${count} >= 1     Log     Given alert "Hostname does not resolve IP address" is listed in activity page
    Run Keyword Unless        ${count} >= 1     Fail    Given alert "Hostname does not resolve IP address" is not present in the activity page

    #Verify entry in auditlog file
    ${filepath}=        Download and unzip Audit log file    ${DownloadPath}
    @{searchtextlist} =    Create List    User has accepted Eula     Successfully updated support access status     Password changed for user: Administrator    User "Administrator" reconfigured the appliance network settings
    :FOR    ${searchtext}     IN    @{searchtextlist}
    \     Search entry in audit log file        ${filepath}    ${searchtext}
