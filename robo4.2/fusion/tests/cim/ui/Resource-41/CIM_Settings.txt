*** Settings ***
Documentation    Updated keywords related to remote backup settings
Library          RoboGalaxyLibrary
Library          BuiltIn
Library          String
Library          Collections
Variables    ../../../../FusionLibrary/ui/business_logic/general/base_elements.py
Variables    ../../../../FusionLibrary/ui/settings/settings_elements.py

*** Variables ***
${delimit}    Filename

*** Keywords ***

Clear EULA and Service access
    [Documentation]    Clears EULA and Service Access page
    wait for element visible    //*[@id='hp-header-eula-type']
    ${eulaPage} =        Get Text    //*[@id='hp-header-eula-type']
    Log    ${eulaPage}
    Run Keyword If    '${eulaPage}' == 'License'    Log        eula page found
    Run Keyword Unless    '${eulaPage}' == 'License'    Fail    Error eula page is not found
    wait for element and click    ${FusionLoginPage.ID_BTN_EULA_AGREE}
    wait for element and click    ${FusionLoginPage.ID_BTN_OK_CONVERGED_INFRA_SUPPORT}

Edit Remote Backup Location Updated
    [Documentation]    Configures the Remote Backup server using the details passed in Data file
    [Arguments]    ${protocol}    ${ipaddress}    ${backupdirectory}    ${username}    ${password}
    Select Checkbox    ${FusionSettingsPage.ID_CHECKBOX_EDIT_BACKUP}
    wait for element and click    //input[@type='radio'][./following-sibling::*[contains(., '${protocol}')]]
    Input Text    ${FusionSettingsPage.ID_INPUT_REMOTESERVER_IP_HOST_NAME}    ${ipaddress}
    Input Text    ${FusionSettingsPage.ID_INPUT_REMOTE_BACKUP_FOLDER}    ${backupdirectory}
    Input Text    ${FusionSettingsPage.ID_INPUT_REMOTESERVER_USERNAME}    ${username}
    Input Text    ${FusionSettingsPage.ID_INPUT_REMOTESERVER_PASSWORD}    ${password}

Verify Remote Location In Backup Page Updated
    [Documentation]    Verifies the Remote Location in Backup page
    [Arguments]    ${protocol}    ${ipaddress}    ${backupdirectory}    ${username}
    Element Should Contain      ${FusionSettingsPage.ID_BACKUP_PAGE_REMOTE_PROTOCOL}    ${protocol}
    Element Should Contain    ${FusionSettingsPage.ID_BACKUP_PAGE_REMOTE_HOST}  ${ipaddress}
    Element Should Contain      ${FusionSettingsPage.ID_BACKUP_PAGE_REMOTE_FOLDER}  ${backupdirectory}
    Element Should Contain      ${FusionSettingsPage.ID_BACKUP_PAGE_REMOTE_USERNAME}  ${username}

Select frequency Updated
    [Documentation]    Sets the frequency for Remote Backup schedule as specified in data file
    [Arguments]    ${frequency}    ${time}    ${day}
    Click Element    ${FusionSettingsPage.ID_DROPDOWN_FREQUENCY_SELECTOR_NEW}
    Run Keyword If    '${frequency}'=='DAILY'    Run Keywords
    ...    Click Element    //*[@id='fs-settings-backup-panel']//ol/li[@data-id='${frequency}']    AND
    ...    Input Text    ${FusionSettingsPage.ID_BACKUP_EDIT_TIME}    ${time}
    ...    ELSE IF    '${frequency}'=='WEEKLY'    Run Keywords
    ...    Click Element    //*[@id='fs-settings-backup-panel']//ol/li[@data-id='${frequency}']    AND
    ...    Input Text    ${FusionSettingsPage.ID_BACKUP_EDIT_TIME}    ${time}    AND
    ...    Select Checkbox    //*[@id='fs-settings-backup-schedule-choice-${day}']
    ...    ELSE    Click Element    //*[@id='fs-settings-backup-panel']//ol/li[@data-id='${frequency}']
