*** Settings ***
Documentation		Create user as Server Administrator
Resource          	../resource.txt
Test Setup			Load Test Data and Open Browser
Test Teardown		Logout and close all browsers
Force Tags          dcs  users

***Variables***
${user}					cosmosuser
${adminrole}			Infrastructure administrator
${multiroleuser}		Server administrator
${cosmosusers}			ServerAdminUser


*** Test Cases ***
As an Administrator I want to add Server Admin user to Fusion
	Log into Fusion appliance as Administrator
	${blnLoggedInUser}=	Verify user logged in    Administrator	 ${adminrole}
	Run Keyword Unless	'${blnLoggedInUser}' == '${blnExpected}'	Fail	Failed to verify logged in User and user role

	Log		create Server users
	${blnCreateUser}=	Create user by Name		${cosmosusers}
	Set Suite Variable		${blnCreateUser}
	Run Keyword If	'${blnCreateUser}' == '${blnExpected}'	Log		User created successfully
	Run Keyword Unless	'${blnCreateUser}' == '${blnExpected}'	Fail	Fail to created User

Page validation for all the users, verify user data by Name
	Run Keyword Unless	'${blnCreateUser}' == '${blnExpected}'	Fail	Fail to created User
	Log into Fusion appliance as Administrator
	${blnVerifyUserData}=		Verify user data by Name	${cosmosusers}
	Run Keyword If	'${blnVerifyUserData}' == '${blnExpected}'	Log		User data validation was successfully
	Run Keyword Unless	'${blnVerifyUserData}' == '${blnExpected}'	Fail	Failed to validate user data

Verify Server Admin user and roles
	Run Keyword Unless	'${blnCreateUser}' == '${blnExpected}'	Fail	Fail to created User
	Fusion UI login to appliance   ${cosmosusers}
	${blnVerifyUserLogged}=		Verify user logged in    ${cosmosusers}	 	${multiroleuser}
	Run Keyword If	'${blnVerifyUserLogged}' == '${blnExpected}'	Log		logged in user was verified Successfully
	Run Keyword Unless	'${blnVerifyUserLogged}' == '${blnExpected}'	Fail	Failed to verify logged in User and user role

As an Server Administrator I want to Create Enclosure group:
	Run Keyword Unless	'${blnCreateUser}' == '${blnExpected}'	Fail	Fail to created User
	Fusion UI login to appliance   ${cosmosusers}
	${blnCreateEG}=		Fusion UI create enclosure group	@{TestData.encgroups}
	set Global variable 	${blnCreateEG}
	Run Keyword If	'${blnCreateEG}' == '${blnExpected}'	Log		Enclosure group is created successfully
	Run Keyword Unless	'${blnCreateEG}' == '${blnExpected}'	Fail	Failed to create enclosure group

As an Server Administrator I want to Add enclosures with existing enclosure group and existing LIG:
	Run Keyword Unless	'${blnCreateUser}' == '${blnExpected}'	Fail	Fail to created User
	Run Keyword Unless	'${blnCreateEG}' == '${blnExpected}'	Fail	Failed to create enclosure group
	Fusion UI login to appliance   ${cosmosusers}
	${blnAddEnclosure}=		Fusion UI add enclosure   	@{TestData.encl_existingEG}
	set Global variable 	${blnAddEnclosure}
	Run Keyword If	'${blnAddEnclosure}' == '${blnExpected}'	Log		Enclosure is added Successfully
	Run Keyword Unless	'${blnAddEnclosure}' == '${blnExpected}'	Fail	Failed to add enclosure

Create 1 profile booting from a local disk (HardDisk as first on boot order), and one SAN connection to a non-bootable shared disk
	Run Keyword Unless	'${blnCreateUser}' == '${blnExpected}'	Fail	Fail to created User
	Run Keyword Unless	'${blnAddEnclosure}' == '${blnExpected}'	Fail	Failed to add enclosure
	Fusion UI login to appliance   ${cosmosusers}
	${blnAddProfile}=		Fusion UI create Server Profile		@{TestData.profile1_US2078}
	Run Keyword If	'${blnAddProfile}' == '${blnExpected}'	Log		Profile is created Successfully
	Run Keyword Unless	'${blnAddProfile}' == '${blnExpected}'	Fail	Failed to create server profile
	