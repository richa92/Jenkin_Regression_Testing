*** Settings ***
Documentation       Create user as Network Administrator and Create Networks
Resource            ../resource.txt
Test Setup          Load Test Data and Open Browser
Test Teardown       Logout and close all browsers
Force Tags          dcs  users  network

***Variables***
${user}                 cosmosuser
${adminrole}            Infrastructure administrator
${multiroleuser}        Network administrator
${cosmosusers}          NetworkAdminUser


*** Test Cases ***
As an Administrator I want to add Network Admin user to Fusion
    [Documentation]    Create Network Admin
    Log into Fusion appliance as Administrator
    ${blnLoggedInUser}=    Verify user logged in    Administrator    ${adminrole}
    Run Keyword Unless    '${blnLoggedInUser}' == '${blnExpected}'    Fail    Failed to verify logged in User and user role

    Log  create Network users
    ${blnCreateUser}=    Create user by Name    ${cosmosusers}
    Set Suite Variable    ${blnCreateUser}
    Run Keyword If    '${blnCreateUser}' == '${blnExpected}'    Log    User created successfully
    Run Keyword Unless  '${blnCreateUser}' == '${blnExpected}'  Fail    Fail to created User

Page validation for all the users, verify user data by Name
    [Documentation]    Validate All User
    Run Keyword Unless  '${blnCreateUser}' == '${blnExpected}'  Fail    Fail to created User
    Log into Fusion appliance as Administrator
    ${blnVerifyUserData}=    Verify user data by Name    ${cosmosusers}
    Run Keyword If  '${blnVerifyUserData}' == '${blnExpected}'  Log    User data validation was successfully
    Run Keyword Unless  '${blnVerifyUserData}' == '${blnExpected}'  Fail    Failed to validate user data

Verify Network Admin user and roles
    [Documentation]    Verify Network User
    Run Keyword Unless  '${blnCreateUser}' == '${blnExpected}'  Fail    Fail to created User
    Fusion UI login to appliance   ${cosmosusers}
    ${blnVerifyUserLogged}=    Verify user logged in    ${cosmosusers}    ${multiroleuser}
    Run Keyword If    '${blnVerifyUserLogged}' == '${blnExpected}'  Log    logged in user was verified Successfully
    Run Keyword Unless  '${blnVerifyUserLogged}' == '${blnExpected}'    Fail    Failed to verify logged in User and user role

As an Network Administrator I want to Create FC Networks:
    [Documentation]    Create Fibre Channel Network
    Run Keyword Unless  '${blnCreateUser}' == '${blnExpected}'  Fail    Fail to created User
    Fusion UI login to appliance    ${cosmosusers}
    ${blnCreateFC}=    Fusion UI create fc network    @{TestData.fcnetworks}
    Run Keyword If  '${blnCreateFC}' == '${blnExpected}'  Log    FC network(s) were created Successfully
    Run Keyword Unless  '${blnCreateFC}' == '${blnExpected}'    Fail    Failed to create FC network(s)

Create FCoE Networks:
    [Documentation]    Create Fibre Channel over Ethernet Networks
    [Tags]  esxi
    Log into Fusion appliance as Administrator
    Fusion UI create fcoe network    @{TestData.fcoenetworks}

As an Network Administrator I want to Create Ethernet Networks:
    [Documentation]    Create Ethernet Networks
    Run Keyword Unless  '${blnCreateUser}' == '${blnExpected}'  Fail    Fail to created User
    Fusion UI login to appliance    ${cosmosusers}
    ${blnCreateETH}=    Fusion UI create ethernet network    @{TestData.networks}
    Run Keyword If  '${blnCreateETH}' == '${blnExpected}'  Log    Ethernet(s) were created Successfully
    Run Keyword Unless  '${blnCreateETH}' == '${blnExpected}'  Fail    Failed to create Ethernet(s)

As an Network Administrator I want to Add network sets
    [Documentation]    Add Networks sets
    Run Keyword Unless  '${blnCreateUser}' == '${blnExpected}'    Fail    Fail to created User
    Fusion UI login to appliance    ${cosmosusers}
    ${blnCreateNetSet}=    Fusion UI create network set    @{TestData.networksets}
    Run Keyword If  '${blnCreateNetSet}' == '${blnExpected}'    Log    Network set(s) were created Successfully
    Run Keyword Unless  '${blnCreateNetSet}' == '${blnExpected}'    Fail    Failed to create Network set(s)

As an Network Administrator I want to Create Logical Interconnect Group:
    [Documentation]    Create Create Logical Interconnect Group
    Run Keyword Unless  '${blnCreateUser}' == '${blnExpected}'  Fail    Fail to created User
    Fusion UI login to appliance    ${cosmosusers}
    ${blnCreateLIG}=    Fusion UI create logical interconnect group    @{TestData.ligs}
    Run Keyword If  '${blnCreateLIG}' == '${blnExpected}'    Log    LIG(s) were created Successfully
    Run Keyword Unless  '${blnCreateLIG}' == '${blnExpected}'    Fail    Failed to create LIG(s)
