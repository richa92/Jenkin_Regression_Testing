*** Settings ***
Documentation	Monitor Over Heated Servers
Resource 		../resource.txt
Library			OperatingSystem

***Variables***
${blnExpected}		True

*** Test Cases ***
Refresh Server
	Load Test Data and Open Browser
	maximize browser window
	Log into Fusion appliance as Administrator
	Fusion UI Refresh Server	@{TestData.altairilo}

Send trap to simulate high temperature on managed devices
	${blnSendTrap} =	Set Variable  False
	${blnSendTrap} =    Send Trap		@{TestData.trap_details}
	Set Global Variable		${blnSendTrap}
	Run Keyword If		'${blnSendTrap}' == '${blnExpected}'    Log		Trap has been sent successfully to simulate high temperature on managed device
	Run Keyword Unless		'${blnSendTrap}' == '${blnExpected}'    Fail	Failed to send Trap to simulate high temperature on managed device

Check for the alert received in appliance for over heat on device
	Run Keyword Unless		'${blnSendTrap}' == '${blnExpected}'    Fail	Failed to send Trap to simulate high temperature on managed device
	${blnAlert} =  Fusion UI Verify Alert Generated In Appliance	@{TestData.trap_activity}
	Run Keyword If		'${blnAlert}' == '${blnExpected}'    Log		Trap Alert for over heat on managed device received in appliance successfully
	Run Keyword Unless		'${blnAlert}' == '${blnExpected}'    Fail	Failed to receive Trap Alert in appliance for over heat on managed device
	Logout and close all browsers