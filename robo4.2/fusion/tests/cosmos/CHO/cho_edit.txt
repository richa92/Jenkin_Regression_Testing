*** Settings ***
Library				RoboGalaxyLibrary
Library				Collections
Library				String
Library				FusionLibrary
Resource			cho_resource.txt


*** Variables ***
${DataFile}			C:\\solution3.0\\fusion\\tests\\cho\\data-acceptance.xml
${FUSION_IP}		10.10.11.12
${FUSION_USERNAME}	Administrator
${FUSION_PASSWORD}	Cosmos123


*** Test Cases ***
Login to Fusion
	Login to Fusion Via REST	${FUSION_IP}	${FUSION_USERNAME}	${FUSION_PASSWORD}

Edit Server Profiles
	Load Test Data  ${DataFile}
	${Profiles} =    Get Data By Property		${TestData.editprofiles}    Affinity		Device Bay
	${JobList}=		Create List
	: FOR	${profile}	in	@{Profiles}
	\	${eTag}=		Get Server Profile eTag		${profile.ProfileName}
	\	${Payload}=		Build Server Profile Payload	${profile.ProfileName}		${profile.Description}		${profile.ServerHardwareName}
	\					...								${profile.ServerHardwaretype}		${profile.EnclosureGroup}		${profile.EnclosureName}	${eTag}
	\	${Payload}=		Add Multiple Connections to Server Profile Payload		${Payload}		${profile}
	\	${Payload}=		Add Boot Order to Server Profile	${Payload}		${profile.BootOrder}
	\	${Payload}=		Add San Storage to Edit Server Profile Payload		${Payload}		${profile}		${profile.SanStoragehostOSType}
	\	${URI}=			Get Profile Uri		${profile.ProfileName}
	\	${JobList}=		Edit Profile		${Payload}		${JobList}		${profile.ProfileName}		${URI}
	Wait For Task		${JobList}

Power On Server
	${Profiles} =    Get Data By Property		${TestData.editprofiles}    Affinity		Device Bay
	: FOR	${profile}	in	@{Profiles}
	\	Power On Server		${profile.ServerHardwareName}

Logout of Fusion
	Logout of Fusion Via REST