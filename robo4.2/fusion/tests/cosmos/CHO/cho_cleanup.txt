*** Settings ***
Library				RoboGalaxyLibrary
Library				Collections
Library				String
Library				FusionLibrary
Resource			cho_resource.txt

*** Variables ***
${DataFile}			C:\\solution3.0\\fusion\\tests\\cho\\data-acceptance.xml
${FUSION_IP}		10.10.11.12
${FUSION_USERNAME}	Administrator
${FUSION_PASSWORD}	Cosmos123


*** Test Cases ***
Login to Fusion
	Login to Fusion Via REST	${FUSION_IP}	${FUSION_USERNAME}	${FUSION_PASSWORD}

Power Off Server And Delete Profile
	Load Test Data   ${DataFile}
	${Profiles} =    Get Data By Property		${TestData.profiles}    Affinity		Device Bay
	${JobList}=		Create List
	: FOR	${profile}	in	@{Profiles}
	\	Power Off Server	${profile.ServerHardwareName}
	\	${JobList}=		Delete Profile		${profile.ProfileName}		${JobList}
	Wait For Task		${JobList}

Delete Shared Volume
	${Volumes} =    Get Data By Property		${TestData.volumes}    shareable		true
	: FOR	${volume}	in	@{Volumes}
	\	Delete Storage Volume		${volume.name}

	# Deleting Volumes detached but Unremoved QXCR1001425915
	#${Profiles} =    Get Data By Property		${TestData.profiles}    Affinity		Device Bay
	#: FOR	${profile}	in	@{Profiles}
	#\	Delete All Detached Volumes		${profile}

Logout of Fusion
	Logout of Fusion Via REST