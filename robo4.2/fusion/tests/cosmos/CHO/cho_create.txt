*** Settings ***
Library				RoboGalaxyLibrary
Library				Collections
Library				String
Library				FusionLibrary
Resource			cho_resource.txt


*** Variables ***
${DataFile}			C:\\solution3.0\\fusion\\tests\\cho\\data-acceptance.xml
${FUSION_IP}		10.10.11.12
${FUSION_USERNAME}	Administrator
${FUSION_PASSWORD}	Cosmos123


*** Test Cases ***
Login to Fusion
	Login to Fusion Via REST	${FUSION_IP}	${FUSION_USERNAME}	${FUSION_PASSWORD}

Create Shared Storage Volume
	Load Test Data  ${DataFile}
	${Volumes} =    Get Data By Property		${TestData.volumes}    shareable		true
	: FOR	${volume}	in	@{Volumes}
	\	Create Storage Volume	${volume.name}		${volume.size}		${volume.shareable}		${volume.provisionType}		${volume.storagePool}

Create Server Profiles
	${Profiles} =    Get Data By Property		${TestData.profiles}    Affinity		Device Bay
	${JobList}=		Create List
	: FOR	${profile}	in	@{Profiles}
	\	${Payload}=		Build Server Profile Payload	${profile.ProfileName}		${profile.Description}		${profile.ServerHardwareName}
	\					...								${profile.ServerHardwaretype}		${profile.EnclosureGroup}		${profile.EnclosureName}
	\	${Payload}=		Add Multiple Connections to Server Profile Payload		${Payload}		${profile}
	\	${Payload}=		Add Boot Order to Server Profile	${Payload}		${profile.BootOrder}
	\	${Payload}=		Add San Storage to Server Profile Payload		${Payload}		${profile}		${profile.SanStoragehostOSType}
	\	${JobList}=		Create Profile		${Payload}		${JobList}		${profile.ProfileName}
	Wait For Task		${JobList}

Logout of Fusion
	Logout of Fusion Via REST