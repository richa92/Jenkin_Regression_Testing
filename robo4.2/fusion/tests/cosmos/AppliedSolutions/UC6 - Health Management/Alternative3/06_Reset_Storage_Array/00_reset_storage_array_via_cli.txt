*** Settings ***
Documentation	Reset storage array via cli
Resource		../resource.txt
Test Setup		Load Test Data and Open Browser
Test Teardown	Logout and close all browsers

*** Test Cases ***
Capture storage user details
	Load Test Data  ${DataFile}
	${storage_admin} =	Set Variable	${Testdata.storageadmindetails[0]}
	${USERNAME} =	Set Variable	${storage_admin.userid}
	${PASSWORD} =	Set Variable	${storage_admin.pswd}
	
	${storage_details} =	Set Variable	${Testdata.storagesystems[0]}
	${HOST} =	Set Variable	${storage_details.name}
	${NEW_USER} =	Set Variable	${storage_details.userid}
	${NEW_USER_PSWD} =	Set Variable	${storage_details.pswd}

	Set Global Variable		${USERNAME}
	Set Global Variable		${PASSWORD}
	Set Global Variable		${HOST}

Stop storage array via cli
	Stop 3Par using wsapi command	${HOST}	${USERNAME}	${PASSWORD}

Verify email received for notification alerts
	Load Test Data  ${DataFile}
	${mail_details} =	Set Variable	${TestData.mail_info[0]}
 	${blnVerifyEmail} =  check mailbox for email	${mail_details}
	Run Keyword If		'${blnVerifyEmail}' == '${blnExpected}'    Log		Mail verification is successful.
	Run Keyword Unless		'${blnVerifyEmail}' == '${blnExpected}'    Fail	Failed to verify mail.

Start storage array via cli
	Start 3Par using wsapi command	${HOST}	${USERNAME}	${PASSWORD}

*** Keywords ***	
Open Browser for Email Verification
	Open Browser    ${EmailUrl}    ${Browser}
    Maximize Browser Window
    Run Keyword If  "${Browser}" == "IE"   Go To  javascript:document.getElementById('overridelink').click()
    Set Selenium Speed    ${SeleniumSpeed}
    Set Browser Version Metadata
