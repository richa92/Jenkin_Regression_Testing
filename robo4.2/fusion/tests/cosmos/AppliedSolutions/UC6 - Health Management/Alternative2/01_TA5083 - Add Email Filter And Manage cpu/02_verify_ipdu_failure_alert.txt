*** Settings ***
Documentation		Send Ipdu Failure and Verify Alert in fusion
Resource            ../resource.txt
Test Setup			Load Test Data and Open Browser
Test Teardown		Logout and close all browsers
Force Tags          critical

***Variables***
${blnExpected}		True

*** Test Cases ***
Send trap to simulate ipdu failure
	Log into Fusion appliance as Administrator
	${blnSendTrap} =	Set Variable  False
	${blnSendTrap} =	Send Trap		@{TestData.trap_TA5083}
	Set Global Variable		${blnSendTrap}
	Run Keyword If		'${blnSendTrap}' == '${blnExpected}'    Log		Trap has been sent successfully to simulate high temperature on managed device
	Run Keyword Unless		'${blnSendTrap}' == '${blnExpected}'    Fail	Failed to send Trap to simulate high temperature on managed device

Check for the alert received in appliance for over heat on device
	Log into Fusion appliance as Administrator
	Run Keyword Unless		'${blnSendTrap}' == '${blnExpected}'    Fail	Failed to send Trap to simulate high temperature on managed device
	${blnAlert} =  Fusion UI Verify Alert Generated In Appliance	@{TestData.activity_TA5083}
	Run Keyword If		'${blnAlert}' == '${blnExpected}'    Log		Trap Alert for over heat on managed device received in appliance successfully
	Run Keyword Unless		'${blnAlert}' == '${blnExpected}'    Fail	Failed to receive Trap Alert in appliance for over heat on managed device
	Logout and close all browsers
