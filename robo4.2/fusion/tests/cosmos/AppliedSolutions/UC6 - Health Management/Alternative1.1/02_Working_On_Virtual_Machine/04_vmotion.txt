*** Settings ***
Documentation		VM Live Migration
Resource			../resource.txt
Test Setup			Load Test Data	${DataFile}

*** Test Cases ***
VM1 Migration
	${var} =	Set Variable	${TestData.vmotion[0]}
	connect_to_vi_server	${var.vcenter}	${var.username}	${var.password}
	vi_server_should_be_connected
	${vmotionStatus} =	migrate_vm_host		${var.vmname}	${var.hostname}
	Run Keyword If    '${vmotionStatus}' == '${blnExpected}'		Log		VM is successfully migrated to another host
	Run Keyword Unless    '${vmotionStatus}' == '${blnExpected}'		Fail	Failed to migrate VM to another host

VM2 Migration
	${var} =	Set Variable	${TestData.vmotion[1]}
	connect_to_vi_server	${var.vcenter}	${var.username}	${var.password}
	vi_server_should_be_connected
	${vmotionStatus} =	migrate_vm_host		${var.vmname}	${var.hostname}
	Run Keyword If    '${vmotionStatus}' == '${blnExpected}'		Log		VM is successfully migrated to another host
	Run Keyword Unless    '${vmotionStatus}' == '${blnExpected}'		Fail	Failed to migrate VM to another host