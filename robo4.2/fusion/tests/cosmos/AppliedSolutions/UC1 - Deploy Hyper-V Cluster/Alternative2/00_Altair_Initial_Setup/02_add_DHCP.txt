*** Settings ***
Documentation		Add DHCP
Resource			../resource.txt
Resource			../../../altair_keywords.txt
Test Setup			Load Test Data and Open Browser
Test Teardown		Logout and close all browsers
Force Tags			altair	critical
Variables			../../../../../../../altair/AltairLibrary/ui/objectrepo/altair_elements_settings_page.py
Library				AltairLibrary

*** Test Cases ***
Add DHCP
	Log into Altair appliance as Administrator
	Maximize Browser Window
	${dhcp} =	Set Variable	${TestData.dhcp[0]}
	Altair UI Go To Settings Page
	wait for element and click	${AltairSettingsPage.ID_PAGE_LABEL}
	Altair UI open settings edit dhcp dialog
	wait for element and click		//input[@id='osdsettings-dhcp-pxe-edit-dhcp-pxe-enabled']
	wait for element and input text		${AltairSettingsPage.ID_INPUT_DHCP_START_ADDRESS_RANGE}	${dhcp.start_addr_range}
	wait for element and input text		${AltairSettingsPage.ID_INPUT_DHCP_END_ADDRESS_RANGE}	${dhcp.end_addr_range}
	wait for element and input text		${AltairSettingsPage.ID_INPUT_DHCP_GATEWAY}	${dhcp.gateway}
	wait for element and input text		${AltairSettingsPage.ID_INPUT_DHCP_DNS_SERVER}	${dhcp.dnsserver}
	wait for element and click		${AltairSettingsPage.ID_BTN_EDIT_DHCP_OK}
	${blnactual} =	wait for element visible		//div[@id='osdsettings-dhcp-pxe-gateway']	${dhcp.gateway}
	Run Keyword If		'${blnactual}' == '${blnExpected}'    Log		DHCP datas are added successfully
	Run Keyword Unless		'${blnactual}' == '${blnExpected}'    Fail	Fail to add datas to the DHCP

Power off servers
	Log into Fusion appliance as Administrator
	${bln_powerOffServer1} =	Fusion UI Power Off Server	${TestData.profile1[0].server}
	${bln_powerOffServer2} =	Fusion UI Power Off Server	${TestData.profile2[0].server}
	Run Keyword If		'${bln_powerOffServer1}' == '${blnExpected}'    Log		Server is successfully powered off.
	Run Keyword Unless		'${bln_powerOffServer1}' == '${blnExpected}'    Fail	Failed power off server profile
	Run Keyword If		'${bln_powerOffServer2}' == '${blnExpected}'    Log		Server is successfully powered off.
	Run Keyword Unless		'${bln_powerOffServer2}' == '${blnExpected}'    Fail	Failed power off server profile

Power on servers
	Log into Fusion appliance as Administrator
	${bln_powerOnServer1} =	Fusion UI Power On Server	${TestData.profile1[0].server}
	${bln_powerOnServer2} =	Fusion UI Power On Server	${TestData.profile2[0].server}
	Run Keyword If		'${bln_powerOnServer1}' == '${blnExpected}'    Log		Server is successfully powered on.
	Run Keyword Unless		'${bln_powerOnServer1}' == '${blnExpected}'    Fail	Failed power on server profile
	Run Keyword If		'${bln_powerOnServer2}' == '${blnExpected}'    Log		Server is successfully powered on.
	Run Keyword Unless		'${bln_powerOnServer2}' == '${blnExpected}'    Fail	Failed power on server profile
	Sleep	900
