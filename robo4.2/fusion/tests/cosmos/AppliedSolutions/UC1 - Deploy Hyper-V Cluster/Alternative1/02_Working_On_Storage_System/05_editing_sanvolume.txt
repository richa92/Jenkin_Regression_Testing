*** Settings ***
Documentation		Editing San Volume
Resource 	        ../resource.txt
Test Setup          Load Test Data and Open Browser
Test Teardown       Logout and close all browsers
Variables			../../../../../../FusionLibrary/ui/servers/serverprofiles_elements.py


*** Test Cases ***
Editing San Volume
	Log into Fusion appliance as Administrator
	Fusion UI navigate to server profiles page
	Fusion UI Select Server Profiles	${TestData.profile2[0].name}
	${san_edit} =	Set Variable	//tr[@id='storageVolumeId-edit-2']//div[@class='hp-edit']
	${edit_storage_path} =	Set Variable	//table[@id='cic-profile-storage-paths-table']//div[@class='hp-edit']
	${edit_storage_target} =	Set Variable	//input[@id='profile-storage-edit-targets-manual']
	${target_ok_button} =	Set Variable	//button[@id='profile-storage-edit-targets-add']
	${storage_ok_button} =	Set Variable	//input[@id='cic-profile-storage-add']
	${progress_bar} =	Set Variable	//div[@class='hp-progress']
	wait for element and click	${FusionServerProfilesPage.ID_MENU_MAIN_ACTION}
	wait for element and click	${FusionServerProfilesPage.ID_MENU_ACTION_EDIT}
	wait for element and click	${FusionServerProfilesPage.ID_EDIT_SAN_COMBO_MENU_VIEW}
	wait for element and click	${FusionServerProfilesPage.ID_EDIT_LINK_SANSTORAGE}
	wait for element and click	${san_edit}
	wait for element and click	${edit_storage_path}
	wait for element and click	${edit_storage_target}
	wait for element and click	${target_ok_button}
	wait for element and click	${storage_ok_button}
	wait for element and click	${storage_ok_button}
	wait for element and click	${FusionServerProfilesPage.ID_UPDATE_SERVER_PROFILE}
	Sleep	2
	wait for element not visible	${progress_bar}	100
	${completed_state} =	Set Variable	//div[@id='hp-page-notifications']//header/div[4][text()='Completed']
	${status} =	wait for element visible	${completed_state}	500
	Run Keyword If		${status} == ${blnExpected}    Log		San Volume is successfully edited
	Run Keyword Unless		${status} == ${blnExpected}    Fail		Failed to edit san volume
