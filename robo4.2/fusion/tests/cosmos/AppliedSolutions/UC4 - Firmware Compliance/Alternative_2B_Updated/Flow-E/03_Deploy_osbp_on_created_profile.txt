*** Settings ***
Documentation		Add server and deploy Firmware OSBP
Resource			../resource.txt
Resource			../../altair_keywords.txt
Test Setup			Load Test Data	${DataFile}
Force Tags			altair	critical
Variables			../../../../../../altair/AltairLibrary/ui/objectrepo/altair_elements_servers_page.py
Library				AltairLibrary



*** Test Cases ***
Add Servers
	Log into Altair appliance as Administrator
	Maximize Browser Window
	Altair UI_Go_To Servers Page
	Altair_ui_add_server		${TestData.server}
	Sleep	20
	Altair UI Logout Appliance Console
	Close All Browsers
	
Get Add Server Job status
	Log into Altair appliance as Administrator
	Maximize Browser Window
	Altair UI Go to Servers Page
	${ilo_ip} =		Set Variable	${server.ip}
	${status} =		Select Server and get job status		${ilo_ip}
	Run keyword and Continue on failure		Should Be Equal As Strings		${status}		True
	${job_status} =		Set variable if		'${status}'=='${init_status1}'	Succeeded	Failed
	Altair UI Logout Appliance Console
	Close All Browsers

Run OS Build Plan
	Log into Altair appliance as Administrator
	Maximize Browser Window
	Altair UI Go to Servers Page
	${serial_no} =	Altair Get Serial Number	${server}
	Altair UI Go To OS Build Plans Page
	Altair UI Run OS Buildplan From OS Buildplans Page		${server.altairOs}	${serial_no}
	Sleep	10
	Altair UI Logout Appliance Console
	Close All Browsers

Get Deployment Job Status
	Log into Altair appliance as Administrator
	Maximize Browser Window
	Altair UI Go to Servers Page
	${ilo_ip} =		Set Variable	${server.ip}
	${status} =		Select Server and get job status		${ilo_ip}
	Run keyword and Continue on failure		Should Be Equal As Strings		${status}		True
	${job_status} =		Set variable if		'${status}'=='${init_status1}'	Succeeded	Failed
	Log		job - deployment ${job_status} for ${server.ip}		WARN
	Altair UI Logout Appliance Console
	Close All Browsers
		