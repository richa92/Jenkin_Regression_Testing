*** Settings ***
Documentation		Create Backup for Fusion
Resource			../resource.txt
Test Setup			Load Test Data and Open Browser
Test Teardown		Logout and close all browsers
Variables			../../../../../../FusionLibrary/ui/facilities/settings_elements.py
Variables			../../../../../../FusionLibrary/ui/general/login_elements.py


*** Test cases ***
Initiate Restore for fusion
	Log into Fusion appliance as Administrator
	Fusion ui navigate to page	Settings
	wait for element and click	${FusionSettingsPage.ID_LINK_SETTINGS_BACKUP}
	wait for element and click	${FusionSettingsPage.ID_MENU_ACTION_MAIN_BTN}
    wait for element and click	${FusionSettingsPage.ID_MENU_ACTION_RESTORE_FROM_BACKUP}
    wait for element and click	${FusionSettingsPage.ID_RADIO_RESTORE_FROM_BACKUP_FILE}
    wait for element and click	${FusionSettingsPage.ID_BTN_RESTORE}
    select checkbox	${FusionSettingsPage.ID_CHECKBOX_RESTORE_CONFIRMATION}
    wait for element and click	${FusionSettingsPage.ID_BTN_RESTORE_FROM_BACKUP}

Check Restore Status
	wait for element visible	${FusionSettingsPage.ID_LABEL_RESTORING}
	wait until keyword succeeds		60 min		5 min	Wait For Restore to complete
	Load test data and Open Browser
	wait for element visible	${FusionLoginPage.ID_BTN_LOGIN_BUTTON}	300
	Close All Browsers


*** keywords ***
Wait For Restore to complete
	Load test data and Open Browser
	Sleep	5
	${item} =		wait for element notvisible	${FusionSettingsPage.ID_LABEL_RESTORING}
	Log		${item}
	Close All Browsers
	Run Keyword Unless		'${item}' == '${blnExpected}'		Fail	Restore not Found
