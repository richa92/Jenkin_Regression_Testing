*** Settings ***
Documentation		Create Backup for Altair
Resource			../resource.txt
Test Setup			Load Test Data	${DataFile}
Test Teardown		Logout and close all browsers
Variables			../../../../../../../altair/AltairLibrary/ui/objectrepo/altair_elements_settings_page.py
Variables			../../../../../../../altair/AltairLibrary/ui/objectrepo/altair_elements_login_page.py



*** Test cases ***
Initiate Restore for altair
	Log into Altair appliance as Administrator
	Altair UI go to settings page
	wait for element and click	${AltairSettingsPage.ID_MENU_ACTION_MAIN_BTN}
    wait for element and click	${AltairSettingsPage.ID_MENU_ACTION_RESTORE_FROM_BACKUP}
    wait for element and click	${AltairSettingsPage.ID_RADIO_RESTORE_FROM_BACKUP_FILE}
    wait for element and click	${AltairSettingsPage.ID_BTN_RESTORE}
    select checkbox	${AltairSettingsPage.ID_CHECKBOX_RESTORE_CONFIRMATION}
    Sleep	5
    wait for element and click	${AltairSettingsPage.ID_BTN_RESTORE_FROM_BACKUP}
    Sleep	5

Check Restore Status
	wait until keyword succeeds		60 min		5 min	Wait For Restore
	Open Browser		${TestData.altairappliances[0].AltairApplianceUrl}	${Browser}
	wait for element notvisible	${AltairSettingsPage.ID_LABEL_RESTORING}	3600
	wait for element visible	${AltairLoginPage.ID_BTN_LOGIN_BUTTON}	300
	Close All Browsers


*** keywords ***
Wait For Restore
	Open Browser		${TestData.altairappliances[0].AltairApplianceUrl}	${Browser}
	Sleep	5
	${item} =		wait for element notvisible	${AltairLoginPage.ID_BTN_LOGIN_BUTTON}
	Log		${item}
	Close All Browsers
	Run Keyword Unless		'${item}' == '${blnExpected}'		Fail	Restore not Found
