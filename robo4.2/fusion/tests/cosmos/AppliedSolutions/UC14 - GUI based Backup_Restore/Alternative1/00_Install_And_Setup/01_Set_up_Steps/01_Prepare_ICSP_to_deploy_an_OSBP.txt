*** Settings ***
Documentation		Prepare ICSP to deploy an OSBP
Resource			../../resource.txt
Library				AltairLibrary
Test Setup			Load Test Data  ${DataFile}
Test Teardown		Logout and close all browsers
Force Tags			altair
Variables			../../../../../../../../altair/AltairLibrary/ui/objectrepo/altair_elements_settings_page.py


*** Variables ***
${IP}				TestData.mediaserver[0].file_share_host
${Filesharehost}	//div[@id='osdsettings-media-filesharehost' and text()='${IP}']
${gatewayip}		TestData.dhcp[0].gateway
${gateway}			//div[@id='osdsettings-dhcp-pxe-gateway' and text()='${gatewayip}']


*** Test Cases ***
Add all required information in the ICSP setting page
	${mediaserver} =	Set Variable	${TestData.mediaserver[0]}
	${dhcp} =	Set Variable	${TestData.dhcp[0]}
	Log into Altair appliance as Administrator
	Altair UI go to settings page
	Sleep	5
	Altair UI open settings edit media server dialog
	wait for element and input text		${AltairSettingsPage.ID_INPUT_FILE_SHARE_HOST}	${mediaserver.file_share_host}
	wait for element and input text		${AltairSettingsPage.ID_INPUT_FILE_SHARE_NAME}	${mediaserver.file_share_name}
	wait for element and input text		${AltairSettingsPage.ID_INPUT_FILE_SHARE_USER}	${mediaserver.file_share_user}
	wait for element and input text		${AltairSettingsPage.ID_INPUT_FILE_SHARE_PASSWORD}	${mediaserver.file_share_pssword}
	wait for element and input text		${AltairSettingsPage.ID_INPUT_HTTP_SERVER_HOST}		${mediaserver.http_serv_host}
	wait for element and input text		${AltairSettingsPage.ID_INPUT_HTTP_SERVER_PATH}	${mediaserver.http_serv_path}
	wait for element and click		${AltairSettingsPage.ID_BTN_MEDIA_SERVER_OK}
	${blnactual} =	wait for element visible		//div[@id='osdsettings-media-filesharehost']	${mediaserver.file_share_host}
	Run Keyword If		'${blnactual}' == '${blnExpected}'		Log		Media Server datas are added successfully
	Run Keyword Unless		'${blnactual}' == '${blnExpected}'	Fail	Fail to add datas to the Media Server
	Run keyword and Continue on failure		Should Be Equal As Strings		${blnactual}		True
	Altair UI open settings edit dhcp dialog
	wait for element and click		//input[@id='osdsettings-dhcp-pxe-edit-dhcp-pxe-enabled']
	wait for element and input text		${AltairSettingsPage.ID_INPUT_DHCP_START_ADDRESS_RANGE}	${dhcp.start_addr_range}
	wait for element and input text		${AltairSettingsPage.ID_INPUT_DHCP_END_ADDRESS_RANGE}	${dhcp.end_addr_range}
	wait for element and input text		${AltairSettingsPage.ID_INPUT_DHCP_GATEWAY}	${dhcp.gateway}
	wait for element and click		${AltairSettingsPage.ID_BTN_EDIT_DHCP_OK}
	${blnactual} =	wait for element visible		//div[@id='osdsettings-dhcp-pxe-gateway']	${dhcp.gateway}
	Run Keyword If		'${blnactual}' == '${blnExpected}'		Log		DHCP datas are added successfully
	Run Keyword Unless		'${blnactual}' == '${blnExpected}'	Fail	Fail to add datas to the DHCP
