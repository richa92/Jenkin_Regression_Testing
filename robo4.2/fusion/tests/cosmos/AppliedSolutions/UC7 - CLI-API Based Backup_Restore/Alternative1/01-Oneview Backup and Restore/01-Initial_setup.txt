*** Settings ***
Documentation		Creating work environment
Resource			../resource.txt
Test Setup			Load Test Data and Open Browser
Test Teardown		Logout and close all browsers
Force Tags			buildup  network


*** Variables ***
${blnExpected}		True


*** Test Cases ***
Configure Networks
	Log into fusion appliance as administrator
	Fusion UI create ethernet network		@{TestData.networks}

Create FC Networks:
	Log into Fusion appliance as Administrator
	Fusion UI create fc network		@{TestData.fcnetworks}

Configure Network set
	Log into fusion appliance as administrator
	Fusion UI create network set		@{TestData.networksets}

As an Administrator I want to add SAN Manager to my fusion appliance
	Log into Fusion appliance as Administrator
	Fusion UI Add San Manager 	@{TestData.sanmanagers}

As an Administrator I want Add Storage Systems to Fusion Appliance
	Log into Fusion appliance as Administrator
	${blnAddedStorage} =	Fusion UI add storage systems	@{TestData.storagesystems}
	Set Global Variable		${blnAddedStorage}
	Run Keyword If		'${blnAddedStorage}' == '${blnExpected}'	Log		All Storage Systems are added successfully.
	Run Keyword Unless		'${blnAddedStorage}' == '${blnExpected}'	Fail	Failed to add Some/all of 

As an Administrator I want add storage pool to Fusion
	${blnStoragePool} =	Set Variable  False
	Set Global Variable		${blnStoragePool}
	Run Keyword Unless		'${blnAddedStorage}' == '${blnExpected}'	Fail	Since adding Some/all Storage systems is failed, we can't proceed with creation of storage pools
	Log into Fusion appliance as Administrator
	${blnStoragePool} =		Fusion UI add storage pools	@{TestData.storagepools}
	Run Keyword If		'${blnStoragePool}' == '${blnExpected}'		Log		All the Storage Pools are added successfully
	Run Keyword Unless		'${blnStoragePool}' == '${blnExpected}'		Fail		Failed to add Some/all of the Storage Pools mentioned in data file
	Set Global Variable		${blnStoragePool}

As an Administrator I want add storage template to Fusion
	${blnAddTemplate} =	Set Variable  False
	Set Global Variable		${blnAddTemplate}
	Run Keyword Unless		'${blnStoragePool}' == '${blnExpected}'		Fail		Since adding Some/all Storage pools is failed, we can't proceed with creation of storage templates
	Log into Fusion appliance as Administrator
	${blnAddTemplate} =		Fusion UI create storage volume templates	@{TestData.storagevts}
	Run Keyword If		'${blnAddTemplate}' == '${blnExpected}'		Log		All the Storage template are added successfully
	Run Keyword Unless		'${blnAddTemplate}' == '${blnExpected}'		Fail		Failed to add Some/all of the Storage templates mentioned in data file
	Set Global Variable		${blnAddTemplate}

As an Administrator I want add storage volumes to Fusion
	${blnAddvolume} =	Set Variable  False
	Set Global Variable			${blnAddvolume}
	Run Keyword Unless		'${blnAddTemplate}' == '${blnExpected}'		Fail		Since adding Some/all Storage pools is failed, we cont proceed with creation of storage Volumes
	Log into Fusion appliance as Administrator
	${blnAddvolume} =	Fusion UI create_storage_volumes	@{TestData.storagevolumes}
	Run Keyword If		'${blnAddvolume}' == '${blnExpected}'	Log	All the Storage volumes are added successfully
	Run Keyword Unless		'${blnAddvolume}' == '${blnExpected}'	Fail		Failed to add Some/all of the Storage volumes mentioned in data file

Create Logical Interconnect Group: 
	[Tags]	lig
	Log into Fusion appliance as Administrator
	Fusion UI create logical interconnect group		@{TestData.ligs}

Create Enclosure group:
	[Tags]	eg
	Log into Fusion appliance as Administrator
	Fusion UI create enclosure group	@{TestData.encgroups}

Add Enclosure:
	[Tags]	enc
	Log into Fusion appliance as Administrator
	Fusion UI add enclosure		@{TestData.add_enclosure}

Create profile for first server
	Log into Fusion appliance as Administrator
	Fusion UI create Server Profile		@{TestData.profile_1}

Create profile for second server
	Log into Fusion appliance as Administrator
	Fusion UI create Server Profile		@{TestData.profile_2}
	
Create one un-assigned profile
	Log into Fusion appliance as Administrator
	Fusion UI create Server Profile		@{TestData.profile_3}

Power off All Servers
	Log into Fusion appliance as Administrator
	Fusion UI Power off All Servers
