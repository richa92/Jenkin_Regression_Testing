*** Settings ***
Library           RoboGalaxyLibrary
Library           BuiltIn
Library           String
Library           Collections

#Resource          resource.txt

Variables         ../../../FusionLibrary/ui/business_logic/general/base_elements.py
Variables         ../../../FusionLibrary/ui/servers/serverhardware_elements.py
Variables         ../../../FusionLibrary/ui/usersandgroups/usersandgroups_elements.py


*** Keywords ***

Navigate to Activity page
    [Documentation]    Navigate to Activity page
    Open Fusion Main Menu
    wait for element visible    ${FusionBasePage.ID_MENU_LINK_ACTIVITY}
    wait for element and click    ${FusionBasePage.ID_MENU_LINK_ACTIVITY}
    ${status}    ${value} =  Run Keyword And Ignore Error    wait for element visible    ${FusionServerHardwarePage.ID_PAGE_LABEL}    10
    Run Keyword If    '${status}' == 'PASS'    Log    Successfully navigated to Activity page
    Run Keyword Unless    '${status}' == 'PASS'    Fail    Failed while navigating to Activity page.

Verify Alert In Activity Page
    [Documentation]    Verify Alert In Activity Page
    [Arguments]    ${Name}    ${Resource}    ${Date}
    Navigate to Activity page
    ${Activity_object} =    Get Ui Object    ${FusionServerHardwarePage.ID_SERVER_ACTIVITY_ACTIVITY_PAGE}    ${Name}    ${Resource}    ${Date}
    ${status}    ${value} =    Run Keyword And Ignore Error    wait for element visible    ${Activity_object}
    Run Keyword If    '${status}' == 'PASS'    Log    Given alert "${Name} -- ${Resource} -- ${Date}"is listed in activity page
    Run Keyword Unless    '${status}' == 'PASS'    Fail    Given alert "${Name} -- ${Resource} -- ${Date}" is not present in the activity page

Verify user logged in
    [Documentation]    Verify user logged in
    [Arguments]     ${user}    ${roles}
    [return]        ${blnElemetVisible}
    wait for element visible    ${FusionBasePage.ID_MAIN_MENU_CONTROL}
    wait for element visible    ${FusionUserandGroupsPage.ID_ELEMENT_USER_SESSION}
    Click Element    ${FusionUserandGroupsPage.ID_ELEMENT_USER_SESSION}
    ${user_name_object}=  Get Ui Object    ${FusionUserandGroupsPage.ID_ELEMENT_USER_NAME}    ${user}

    wait for element visible    ${FusionUserandGroupsPage.ID_ELEMENT_USER_ROLE_LABEL}    10
    ${user_role_object}=  Get Ui Object    ${FusionUserandGroupsPage.ID_ELEMENT_ROLE}    ${roles}
    wait for element visible    ${user_role_object}    10
    ${blnElemetVisible}=    wait for element visible    ${FusionUserandGroupsPage.ID_ELEMENT_USER_ROLE_LABEL}    10
    Click Element    ${FusionUserandGroupsPage.ID_ELEMENT_USER_SESSION}

Create user by Name
    [Documentation]    Create user by Name
    [Arguments]     ${fusionuser}
    [return]        ${blnCreateUser}
    ${user} =  Get data by property  ${TestData.users}  name  ${fusionuser}
    ${blnCreateUser}=    Fusion UI Create User   ${user[0]}

Verify user data by Name
    [Documentation]    Verify user data by Name
    [Arguments]    ${fusionuser}
    [return]       ${blnUserData}
    ${user} =  Get data by property  ${TestData.users}  name  ${fusionuser}
    ${blnUserData}=    Fusion UI verify userdata   ${user[0]}

Add active directory users and groups to appliance by userName
    [Documentation]    Add active directory users and groups
    [Arguments]    ${ADUsername}
    ${ADusers} =  Get data by property  ${TestData.ADdomainUsers}  userName  ${ADUsername}
    fusion ui add activedirectory users    ${ADusers[0]}
