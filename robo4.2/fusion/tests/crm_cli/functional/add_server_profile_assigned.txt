*** Settings ***
Documentation     Add Server Profile with assigned Hardware
...    = Usage =
...    | pybot | -L DEBUG | add_server_profile_assigned.txt | 
...    = Variables =
...    | Fusion IP           | Required; IP address of the FusionVM to use | 
...    | Server HW Name      | Required; Server Hardware Name |
...    | Server Profile Name | Optional; Server Profile Name; default *Profile 1* |
...    = Preconditions =
...    None

Library           RoboGalaxyLibrary            # DVTs Robot Framework extensions
Library           FusionLibrary                # DVTs Robot Framework extensions
Library           String
Library           Collections
Resource          ../resources/fusion_api.txt  # Comet-DVT fusion API extensions
Resource          ../resources/defaults.txt    # Comet-DVT default variables
Suite Setup       Login to Fusion Via REST
Suite Teardown    Logout of Fusion Via REST

*** Variables ***

*** Test Cases ***
Create Server Profile with assigned Hardware
    ${Payload}=     Build Server Profile with assigned Hardware    ${Server Profile Name}    ${Server Hw Name}

    # Set Bios Settings
    # ${BiosValue}=    Create Dictionary    id=91
    # ...                                  value=1
    # ${OverrideValues}=        Create List
    # Append To List    ${OverrideValues}    ${BiosValue}
    # ${Payload}=     Add Bios Settings to Server Profile    ${Payload}     OverriddenSettings=${OverrideValues}    Manage=${True}

    # Add Network Connections
    # ${Payload}=     Add Connection to Server Profile    ${Payload}     type=Ethernet        networkName=v103
    # ${Payload}=     Add Connection to Server Profile    ${Payload}     type=FibreChannel    networkName=fc1

    # Add Storage
    ${Payload}=     Add San Storage Volume to Server Profile    ${Payload}     HostOSType=Windows 2012 / WS2012 R2
    # ${Payload}=     Add Local Storage to Server Profile    ${Payload}     RaidLevel=Raid0

    # Add FW baseline
    # ${Payload}=     Add Firmware Baseline to Server Profile    ${Payload}     Name=HP Service Pack for ProLiant    Manage=${True}    ForceInstall=${False}

    # Add Boot Order
    # ${BootOrder}=    Create List    PXE    HardDisk    CD     Floppy     USB
    #  ${Payload}=     Add Boot Order to Server Profile    ${Payload}     Order=${BootOrder}    Manage=${True}

    # Create Profile
    Create Server Profile    ${Payload}

Verify Server Profile with assigned hardware
    ${Profile}=    Get Server Profile    ${Server Profile Name}
    Log Dictionary     ${profile}
    # Verify Name
    ${name}=       Get From Dictionary    ${Profile}      name
    Should Be Equal as Strings    ${name}    ${Server Profile Name}          msg=Enclosure Group Name did not match ${Enc Group Name}.
    # Verify State
    ${state}=       Get From Dictionary    ${Profile}     state
    Should Be Equal as Strings    ${state}    Normal         msg=State did not match ${state}.
    # Verify Status
    ${status}=       Get From Dictionary    ${Profile}    status
    Should Be Equal as Strings    ${status}    OK                msg=Status did not match ${status}.