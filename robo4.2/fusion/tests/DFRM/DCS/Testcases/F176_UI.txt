*** Settings ***
Documentation     Verifying the feature F176 through UI 

Suite Setup 	Open Browser and Login
Suite Teardown		Close All Browsers
Library			../UserInputs/functions.py
Resource		../Resources/resources.txt
Variables		../UserInputs/variables.py


*** Test Cases ***

Creation of LIG
	[Documentation]		Create LIG passed in the Ligdata.xml file \n
	[Tags]			F176	Smoke	critical
	[setup]			Run keywords
										
										Set Log Level 		TRACE 
										Fusion UI Navigate To Logical Interconnect Groups Page
										Load Test data		${CURDIR}/../UserInputs/Ligdata.xml	
										:FOR 	${Ligs} 	IN		@{Testdata.ligs}
										\	Logger		Creating LIG ${Ligs.name}
										\	Run Keyword And Continue On Failure		Fusion UI Create Natasha Logical Interconnect Group 		${Ligs}  # Creates the LIG and verifies the existence of the same 
										\	Sleep	 3

Editing LIG
	[Documentation]		Edit LIG as per the inputs in Ligdata.xml file \n
	[Tags]			F176	Smoke		
	[setup]			Run keywords
										#Open Browser and Login
										Set Log Level 		TRACE 
										Sleep 	4
										Load Test data		${CURDIR}/../UserInputs/Ligdata.xml	
										${resp} = 	Fusion UI Edit Logical Interconnect Group		@{Testdata.ligs_edit}
										Logger		${resp}		DEBUG
										Run keyword If		'${resp}' is 'False'	Fail	msg=RGLIG1-edit does not exist, so editing did not happen
	
										
Verify LIG exists 															
	[Documentation]			Verifying the LIG specified in the variables.py. used to check only one at a time  \n
	[Tags]					F176	Smoke
	[setup]			Run Keywords		
										
										Set Log Level 		TRACE 
										Sleep	 02
										Load Test data		${CURDIR}/../UserInputs/Ligdata.xml
										${resp} =		Fusion Ui Validate Logical Interconnect Group				@{TestData.verifyligs}
										Logger		${resp}		DEBUG
										Run keyword If		'${resp}' is 'False'	Fail	msg=RGLIGbay1updated is not available (continuation of edit test case)
										
	   
										
Creation of EG with 1 Enclosure 
	[Documentation]		Creating EG having one enclosure count in the EGdata.xml file \n
	[Tags]			F176	Smoke	
	[setup]			Run keywords
										#Open Browser and Login
										Sleep		5
										#Login to Fusion Via REST
										Set Log Level		TRACE
										${EG_count} =		Set Variable	1
										#${LIG_LIST}=  Combinations  ${LIG_Names}  ${${EG_count}}
										#Logger		lig LIst is : ${LIG_LIST}		DEBUG
										#Append the LIG xml output to a file		${EG_count}		${LIG_LIST}
										#Sleep	3
										Load Test data		${CURDIR}/../UserInputs/EGdata.xml
										:FOR 	${EG} 	IN		@{Testdata.Eggrp1}
										\	Logger		Creating EG ${EG.name}
										\	Run Keyword And Continue On Failure		Fusion UI Create TBird Enclosure Group		${EG}
										\	Sleep	4

Deletion of EG with 1 Enclosure
	[Documentation]		 Deleting the EG having one enclosure count in the EGdata.xml file \n
	[Tags]			F176	Smoke
	[setup]			Run keywords	
										Sleep	5
										Load Test data		${CURDIR}/../UserInputs/EGdata.xml
										:FOR 	${EG} 	IN		@{Testdata.Eggrp1}
										\	Logger		Deleting EG ${EG.name}
										\	Run Keyword And Continue On Failure		Fusion UI Delete Enclosure Group		${EG}
										\	Sleep	3								

Creation of EG with 2 Enclosure combinations
	[Documentation]		Creating EG having two enclosure count in the EGdata.xml file \n
	[Tags]			F176	Regression
	[setup]			Run keywords
										Sleep	5
										Set Log Level		TRACE
										${EG_count} =		Set Variable	2
										#Open Browser and Login
										#Login to Fusion Via REST
										${LIG_LIST}=  Combinations  ${LIG_Names}  ${${EG_count}}
										Logger		lig LIst : ${LIG_LIST}		DEBUG
										#Append the LIG xml output to a file		${EG_count}		${LIG_LIST}
										Sleep	3
										Load Test data		${CURDIR}/../UserInputs/EGdata.xml
										:FOR 	${EG} 	IN		@{Testdata.Eggrp2}
										\	Logger		Creating EG ${EG.name}
										\	Run Keyword And Continue On Failure		Fusion UI Create TBird Enclosure Group		${EG}
										\	Sleep	3
										
Deletion of EG with 2 Enclosures
	[Documentation]		 Deleting the EG having two enclosure count in the EGdata.xml file \n
	[Tags]			F176	Regression
	[setup]			Run keywords	
										Load Test data		${CURDIR}/../UserInputs/EGdata.xml
										:FOR 	${EG} 	IN		@{Testdata.Eggrp2}
										\	Logger		Deleting EG ${EG.name}
										\	Run Keyword And Continue On Failure		Fusion UI Delete Enclosure Group		${EG}	
										\	Sleep	3
											
Creation of EG with 3 Enclosure combinations
	[Documentation]		Creating EG having three enclosure count in the EGdata.xml file \n
	[Tags]			F176	Regression
	[setup]			Run keywords
										Set Log Level		TRACE
										${EG_count} =		Set Variable	3
										#Open Browser and Login
										#Login to Fusion Via REST
										${LIG_LIST}=  Combinations  ${LIG_Names}  ${${EG_count}}
										Logger		lig LIst : ${LIG_LIST}		DEBUG
										#Append the LIG xml output to a file		${EG_count}		${LIG_LIST}
										Sleep	3
										Load Test data		${CURDIR}/../UserInputs/EGdata.xml
										:FOR 	${EG} 	IN		@{Testdata.Eggrp3}
										\	Logger		Creating EG ${EG.name}
										\	Run Keyword And Continue On Failure		Fusion UI Create TBird Enclosure Group		${EG}	
										\	Sleep	3
																					
Deletion of EG with 3 Enclosures
	[Documentation]		 Deleting the EG having three enclosure count in the EGdata.xml file \n
	[Tags]			F176	Regression		
	[setup]			Run keywords		
										Sleep	5
										Load Test data		${CURDIR}/../UserInputs/EGdata.xml
										:FOR 	${EG} 	IN		@{Testdata.Eggrp3}
										\	Logger		Deleting EG ${EG.name}
										\	Run Keyword And Continue On Failure		Fusion UI Delete Enclosure Group		${EG}
										\	Sleep	3	
										
										
Creation of LE
	[Documentation]		Creating Logical Enclosure from three enclosure combination provided in the LEdata.xml file \n
	[Tags]		F176	Smoke	
	[setup]		Run Keywords			
										#Open Browser and Login
										Load Test data 		${CURDIR}/../UserInputs/LEdata.xml
										Fusion UI Create TBird Enclosure Group		@{Testdata.Eggrp_le}	#Create one enclosure group for the LE creation  
										Sleep	4
										Fusion UI Navigate to Logical Enclosures Page
										Fusion UI Create Logical Enclosure		@{Testdata.LE_create}

Verify LI after creation of LE
	[Documentation]    Verify the creation of LI after LE is created \n
    [Tags]             F176	 Smoke
    [setup]			   Run Keywords
    					#Open Browser and Login 
    					Sleep		5
    					Load Test data 		 ${CURDIR}/../UserInputs/LEdata.xml
    					:FOR	${LI}		IN		@{Testdata.LIS}
    					\	Logger		Verifying ${LI.name}
    					\	Fusion UI Verify Logical Interconnects Status		${LI}
    					\	Sleep	3s


Update group for LE from EG
	[Documentation]    Edit the EG and update the group on LE page
    [Tags]             F176	 smoke
    [setup]			   Run keywords
    					Sleep		2
    					Load Test data		${CURDIR}/../UserInputs/LEdata.xml
    					Fusion UI Edit Tbird Enclosure Group		@{Testdata.EGgrp_edit}
    					Fusion UI Navigate to Logical Enclosures Page		
    					Fusion UI Logical Enclosure Update From Group		@{Testdata.LE_create}
    					
    					


Update group for LE from LIG
	[Documentation]    Edit the LIG and update the group on LE page
    [Tags]             F176	 smoke
        [setup]			   Run keywords
    					Sleep		2
	   					#Load Test data		${CURDIR}/../UserInputs/LEdata.xml
	   					Fusion UI Edit Logical Interconnect Group		@{Testdata.ligs_edit}
	   					Fusion UI Navigate to Logical Enclosures Page		
    					Fusion UI Logical Enclosure Update From Group		@{Testdata.LE_create}
    					#Fusion UI Edit Logical Interconnect Group		@{Testdata.ligs}	#reverting back to the orginal LIG name
	   					
    					
    					
    					
    
Deletion of LE
	[Documentation]    Deletion of LE \n
    [Tags]             F176  Smoke	Deletion
    [setup]			   Run Keywords
    					#Open Browser and Login 
    					Sleep		5
    					Load Test data 		 ${CURDIR}/../UserInputs/LEdata.xml
						Fusion Ui Delete Logical Enclosure		@{Testdata.LE_create}
						Sleep 	5
						Fusion UI Delete Enclosure Group		@{Testdata.Eggrp_le}		#Delete enclosure group after its been used 


Verify LI after deletion of LE
	[Documentation]    Verify the deletion of LI after LE is deleted \n
    [Tags]             F176	 Smoke	Deletion
    [setup]			   Run Keywords
    					#Open Browser and Login 
    					Sleep		5
    					Load Test data 		 ${CURDIR}/../UserInputs/LEdata.xml
    					Run keyword and expect error	Logical interconnect RGLE123-RGLIG14-1 not found in the page		Fusion UI Verify Logical Interconnects Status		@{Testdata.LIS}
    					
    					
    						
    					

Deletion of LIG
	[Documentation]		Deletes the LIG passed \n
	[Tags]				F176	Smoke	Deletion
	[setup]			Run keywords
										#Open Browser and Login
										Sleep	5
										Set Log Level		TRACE
										Load Test data		${CURDIR}/../UserInputs/Ligdata.xml	
										Fusion UI Navigate To Logical Interconnect Groups Page
										:FOR 	${Ligs} 	IN		@{Testdata.ligs}
										\	Logger		Deleting LIG ${Ligs.name}
										\	Run Keyword And Continue On Failure		Fusion UI Delete Logical Interconnect Group				${Ligs}
										\	Sleep	3																						
																																											
										
Logout of Fusion UI							
	[Documentation]			Logouts of fusion and closes the Browser \n
	[Tags]					F176	Smoke
	[setup]			Run Keywords
											FUSION UI LOGOUT OF APPLIANCE
											Close All Browsers			
					