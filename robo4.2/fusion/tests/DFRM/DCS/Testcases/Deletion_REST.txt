*** Settings ***
Documentation    Deleting the LIG EG  SP etc through REST

Suite Setup	 	Login to Fusion Via REST	
#Suite Teardown		Close All Browsers
Library			../UserInputs/functions.py
Resource		../Resources/resources.txt
Variables		../UserInputs/variables.py


*** Test Cases ***
Delete ServerProfile
	[Documentation]    Delete Server Profiles
    [Tags]             F177  Smoke
	[setup]			   Run Keywords
	${SPResp}=  Fusion Api Get Resource   uri=${serverProfileUri}
	Logger 		\n Validating for ${serverProfileUri}
    Validate resource attribute  status_code  ${serverProfileUri}  ${SPResp}    200
    Validate resource attribute  uri  ${serverProfileUri}  ${SPResp}
	${length} =		Get Length			${SPResp['members']}
	Run keyword If 		'${length}' == '0'		Pass With Warnings		msg=No server profile available for deletion
	:FOR  ${x}  IN RANGE  0  ${length}
	\	  ${SPUri}=   Set Variable  ${SPResp['members'][${x}]['uri']}
	\	  Logger   Deleting ${SPUri} Server Profile	
	\	  ${SPoutResp}=  Fusion Api delete Server Profile   uri=${SPUri}
	\	  Logger   ******${SPoutResp}		DEBUG
	\     Validate resource attribute  status_code  ${SPUri}  ${SPoutResp}    200
	\	  Wait Until Keyword Succeeds  4 min    15 sec  Validate computedPercentComplete   ${SPoutResp}	

Deletion of LE
	[Documentation]         Delete Logical Enclosure with three enclosures and verifies LE and LI deletion
    [Tags]                  F176  Smoke		
	[setup]			Run Keywords 
	${resp}   Fusion Api Get Resource    uri=${logicalEnclosureUri}
	Logger 		\n Validating for ${logicalEnclosureUri}
    Validate resource attribute  status_code  ${logicalEnclosureUri}  ${resp}    200
    Validate resource attribute  uri  ${logicalEnclosureUri}  ${resp}
    ${length} =		Get Length  ${resp['members']}
    Run keyword If 		'${length}' == '0'		Pass With Warnings		msg=No LE available for deletion
    :FOR	${x}	IN RANGE	0	${length}    
    \	${resp1_uri}=  Set Variable    ${resp['members'][${x}]['uri']}
    \	Logger 		\n Deleting ${resp1_uri} Logical Enclosure
    \	${resp1}=		Fusion Api Delete Logical Enclosure		uri=${resp1_uri}
    \	Validate resource attribute  status_code  ${resp1_uri}  ${resp1}    200
    \	Wait Until Keyword Succeeds  20 min    1 min  Validate computedPercentComplete   ${resp1}
	\	Fusion Api Delete Enclosure Group  ${EG_NAME}
	Logger		LE and LI got successfully deleted
    
   
Deletion of EG with 1 Enclosure
    [Documentation]         Delete Enclosure Groups which have one enclosure combination \n
    [Tags]                  F176	Smoke		
    
    ${LIG_LIST}=  Combinations  ${LIG_Names}  ${1}
    ${LIG_LENGTH} =  Get Length  ${LIG_LIST}
    :FOR  ${i}   IN RANGE  0  ${LIG_LENGTH}
    \   ${EG_NAME}=  catenate   RGEG1${i}
    \	Log to console  **************************************************${EG_NAME}********************************************************************************
    \	${LIG_ENC}=  Convert to List  ${LIG_LIST[${i}]}
    \	Fusion Api Delete Enclosure Group  ${EG_NAME} 
    \	Log to console  **************************************************${EG_NAME}********************************************************************************

Deletion of EG with 2 Enclosures
    [Documentation]         Delete Enclosure Groups which have two enclosure combinations \n
    [Tags]                  F176	Regression	Deletion
    
    ${LIG_LIST}=  Combinations  ${LIG_Names}  ${2}
    ${LIG_LENGTH} =  Get Length  ${LIG_LIST}
    :FOR  ${i}   IN RANGE  0  ${LIG_LENGTH}
    \   ${EG_NAME}=  catenate   RGEG2${i}
    \	Log to console  **************************************************${EG_NAME}********************************************************************************
    \	${LIG_ENC}=  Convert to List  ${LIG_LIST[${i}]}
    \	Fusion Api Delete Enclosure Group  ${EG_NAME} 
    \	Log to console  **************************************************${EG_NAME}********************************************************************************
    
Deletion of EG with 3 Enclosures
    [Documentation]         Delete Enclosure Groups which have three enclosure combinations \n
    [Tags]                  F176	Regression 	Deletion
    
    ${LIG_LIST}=  Combinations  ${LIG_Names}  ${3}
    ${LIG_LENGTH} =  Get Length  ${LIG_LIST}
    :FOR  ${i}   IN RANGE  0  ${LIG_LENGTH}
    \   ${EG_NAME}=  catenate   RGEG3${i}
    \	Log to console  **************************************************${EG_NAME}********************************************************************************
    \	${LIG_ENC}=  Convert to List  ${LIG_LIST[${i}]}
    \	Fusion Api Delete Enclosure Group  ${EG_NAME} 
    \	Log to console  **************************************************${EG_NAME}********************************************************************************
    
Deletion of LIG 
	[Documentation]			Deletes LIGS from a given list \n
	[Tags]					F176	Smoke	

	Delete LIG from a list	${LIG_Names}


*** Keywords ***


			