*** Settings ***
Library              APICOperations
Library              json

*** Keywords ***
Get ACI APIC session
    [Documentation]  Get ACI APIC login session with the given URL, username, password
    [Arguments]  ${url}  ${username}  ${password}
    ${session} =  get_apic_session  ${url}  ${username}  ${password}
    Set suite variable  ${session}

Create Tenant in APIC
    [Documentation]  Create a tenant in APIC using the tenant details provided.
    [Arguments]  ${tenants_details}
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    create tenant  ${session}  ${tenant_name}

Delete Tenant in APIC
    [Documentation]  Delete an existing tenant in APIC using the tenant details provided.
    [Arguments]  ${tenants_details}
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    delete_tenant  ${session}  ${tenant_name}

Get ACI APIC Version
    [Documentation]  Gets the version of ACI APIC.
    ${ver} =  get_APIC_Version  ${session}
    [Return]  ${ver}

Get ACI APIC VLAN Pool
    [Documentation]  Gets the ACI APIC VLAN Pool.
    ${vpool} =  getf_vlan_pools  ${session}
    [Return]  ${vpool}

Get ACI APIC Leaf Profiles
    [Documentation]  Gets the ACI APIC leaf profiles.
    ${lf} =  getf_switch_leaf_profiles  ${session}
    [Return]  ${lf}

Get ACI APIC AEP
    [Documentation]  Gets the ACI APIC Access Entity profiles.
    ${aep} =  getf_access_entity_profiles  ${session}
    [Return]  ${aep}

Get ACI APIC Domains
    [Documentation]  Gets the ACI APIC Domains for the given AEP.
    [Arguments]  ${aep_name}
    ${domains} =  get_domains  ${session}  ${aep_name}
    [Return]  ${domains}

Get ACI APIC CDP interface policies
    [Documentation]  Gets the ACI APIC CDP interface policies.
    ${cpd_policies} =  getf_cdp_interface_policies  ${session}
    [Return]  ${cpd_policies}

Get ACI APIC LLDP interface policies
    [Documentation]  Gets the ACI APIC LLDP interface policies.
    ${lldp_policies} =  getf_lldp_interface_policies  ${session}
    [Return]  ${lldp_policies}

Get ACI APIC Physical domains
    [Documentation]  Gets the ACI APIC Physical domains.
    ${phy_domains} =  get_physical_domain  ${session}
    [Return]  ${phy_domains}

Get ACI APIC PC policies
    [Documentation]  Gets the ACI APIC PC policies.
    ${pc_policies} =  getf_portchannel_policies  ${session}
    [Return]  ${pc_policies}

Get ACI APIC VMM Domain
    [Documentation]  Gets the ACI APIC VMM domain.
    ${vmm_domain} =  get_vmm_domain  ${session}
    [Return]  ${vmm_domain}

Create EPG in APIC without domain attachment
    [Documentation]  Creates an EPG without domain attachment.
    [Arguments]  ${tenantName_inWhich_epgToBeCreated}  ${appProfileName_inWhich_epgToBeCreated}  ${epg_name_tobe_created}
    EPG_creation  ${session}  ${tenantName_inWhich_epgToBeCreated}  ${appProfileName_inWhich_epgToBeCreated}  ${epg_name_tobe_created}

Create EPG in APIC with domain attachment
    [Documentation]  Creates EPG in APIC with domain attachment.
    [Arguments]  ${tenants_details}  ${domain_name}
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_profile_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    ${epg_name} =  Get Variable Value  ${tenants_details['epg_name']}
    EPG_creation_and_domainAttch  ${session}  ${tenant_name}  ${app_profile_name}  ${epg_name}  ${domain_name}

Create Application Profile in APIC
    [Documentation]  Creates Application profile in EPG.
    [Arguments]  ${tenants_details}
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_profile_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    createApplicationProfile  ${session}  ${tenant_name}  ${app_profile_name}

Dynamic VLAN pool creation in APIC
    [Documentation]  Creates a dynamic VLAN pool.
    [Arguments]  ${vlan_pool_data}
    ${POOL_NAME} =  Get Variable Value  ${vlan_pool_data['pool_name']}
    ${ENCAP_TYPE} =  Get Variable Value  ${vlan_pool_data['encap_type']}
    ${VLAN_START} =  Get Variable Value  ${vlan_pool_data['vlan_start']}
    ${VLAN_END} =  Get Variable Value  ${vlan_pool_data['vlan_end']}
    dynamic_VLAN_pool_creation  ${session}  ${POOL_NAME}  ${ENCAP_TYPE}  ${VLAN_START}  ${VLAN_END}

Static VLAN pool creation in APIC
    [Documentation]  Creates a Static VLAN pool in APIC.
    [Arguments]  ${POOL_NAME}  ${ENCAP_TYPE}  ${VLAN_START}  ${VLAN_END}
    static_VLAN_pool_creation  ${session}  ${POOL_NAME}  ${ENCAP_TYPE}  ${VLAN_START}  ${VLAN_END}

Create physical domain in APIC
    [Documentation]  Creates a physical domain in APIC.
    [Arguments]  ${physical_domain}
    create_physical_domain  ${session}  ${physical_domain}

Push data to APIC
    [Documentation]  Pushes given configuration to APIC.
    [Arguments]  ${url}  ${data}
    ${resp} =  push_configuration  ${session}  ${url}  ${data}
    [Return]  ${resp}

Create cdp interface policy in APIC
    [Documentation]  Creates a CDP interface policy in APIC.
    [Arguments]  ${url}  ${data}
    create_and_edit_cdpIfpol  ${session}  ${url}  ${data}

Build Policy group body for create
    [Documentation]  Builds policy group body for create operation.
    [Arguments]  ${policygrp_data}
    ${policygrp_name} =  Get Variable Value  ${policygrp_data['policygrp_name']}
    ${lldpPolicy_name} =  Get Variable Value  ${policygrp_data['lldp_policygrp_name']}
    ${cdpPolicy_name} =  Get Variable Value  ${policygrp_data['cdp_policygrp_name']}
    ${aep} =  Get Variable Value  ${policygrp_data['aep']}
    ${payload} =  policygrp_body_build_forCreate  ${policygrp_name}  ${aep}  ${cdpPolicy_name}  ${lldpPolicy_name}
    [Return]  ${payload}

Build Policy group body for edit
    [Documentation]  Builds policy group body for edit operation.
    [Arguments]  ${policygrp_data}
    ${policygrp_name} =  Get Variable Value  ${policygrp_data['policygrp_name']}
    ${lldpPolicy_name} =  Get Variable Value  ${policygrp_data['lldp_policygrp_name']}
    ${cdpPolicy_name} =  Get Variable Value  ${policygrp_data['cdp_policygrp_name']}
    ${aep} =  Get Variable Value  ${policygrp_data['aep']}
    ${payload} =  policygrp_body_build_forEdit  ${policygrp_name}  ${aep}  ${cdpPolicy_name}  ${lldpPolicy_name}
    [Return]  ${payload}

Build payload for interface profile
    [Documentation]  Creates payload for Inerface profile.
    [Arguments]  ${profile_data}
    ${sw_profile} =  Get Variable Value  ${profile_data['switch_profile']}
    ${profile_name} =  Get Variable Value  ${profile_data['profile_name']}
    ${from_port} =  Get Variable Value  ${profile_data['from_port']}
    ${to_port} =  Get Variable Value  ${profile_data['to_port']}
    ${policygrp_name} =  Get Variable Value  ${profile_data['policygrp']}
    ${pload} =  interface_profile_payload_forCreate  ${sw_profile}  ${profile_name}  ${from_port}  ${to_port}  ${policygrp_name}
    [Return]  ${pload}

Build URL for policy group creation and edit
    [Documentation]  Build URL for policy group creation and edit.
    [Arguments]  ${policygrp_data}
    ${policygrp_name} =  Get Variable Value  ${policygrp_data['policygrp_name']}
    ${preurl} =  Catenate  /api/node/mo/uni/infra/funcprof/accportgrp-${policygrp_name}
    ${url} =  Catenate  ${preurl}.json
    [Return]  ${url}

Build URL for CDP interface policy create and edit
    [Documentation]  Build URL for CDP interface policy.
    [Arguments]  ${cdp_policygrp_data}
    ${cdp_policygrp_name} =  Get Variable Value  ${cdp_policygrp_data['cdp_polgrp_name']}
    ${preurl} =  Catenate   /api/node/mo/uni/infra/cdpIfP-${cdp_policygrp_name}
    ${url} =  Catenate  ${preurl}.json
    [Return]  ${url}

Build URL for LLDP interface policy create and edit
    [Documentation]  Build URL for LLDP interface policy create and edit.
    [Arguments]  ${lldp_policygrp_data}
    ${lldp_policygrp_name} =  Get Variable Value  ${lldp_policygrp_data['lldp_polgrp_name']}
    ${preurl} =  Catenate   /api/node/mo/uni/infra/lldpIfP-${lldp_policygrp_name}
    ${url} =  Catenate  ${preurl}.json
    [Return]  ${url}

Build URL for AEP create
    [Documentation]  Build URL for AEP create.
    [Arguments]  ${aep_data}
    ${aep_name} =  Get Variable Value  ${aep_data['aep_name']}
    ${url} =  Catenate  /api/node/mo/uni/infra.json
    [return]  ${url}

Build URL for AEP edit
    [Documentation]  Build URL for AEP edit.
    [Arguments]  ${aep_data}
    ${aep_name} =  Get Variable Value  ${aep_data['aep_name']}
    ${preurl} =  Catenate   /api/node/mo/uni/infra/attentp-${aep_name}
    ${url} =  Catenate  ${preurl}.json
    [return]  ${url}

Build URL for Physical Domain
    [Documentation]  Build URL for physical domain.
    [Arguments]  ${physicalDomain_data}
     ${pd_name} =  Get Variable Value  ${physicalDomain_data['pd_name']}
     ${preurl} =  Catenate   /api/node/mo/uni/phys-${pd_name}
     ${url} =  Catenate  ${preurl}.json
     [return]  ${url}

Build URL to attach AEP to physical domain
    [Documentation]  Build URL to attach AEP tp physical domain.
    [Arguments]  ${physicalDomain_data}
    ${aep_name} =  Get Variable Value  ${physicalDomain_data['aep_name']}
    ${preurl} =  Catenate   /api/node/mo/uni/infra/attentp-${aep_name}
    ${url} =  Catenate  ${preurl}.json
    [return]  ${url}

Build URL for edit physical domain
    [Documentation]  Build URL for edit physical domain.
    [Arguments]  ${physicalDomain_data}
    ${pd_name} =  Get Variable Value  ${physicalDomain_data['pd_name']}
    ${preurl} =  Catenate   /api/node/mo/uni/phys-${pd_name}
    ${url} =  Catenate  ${preurl}/rsvlanNs.json
    [return]  ${url}

Build URL for create interface profile
    [Documentation]  Build URL for create interface profile
    [Arguments]  ${profile_data}
    ${sw_profile} =  Get Variable Value  ${profile_data['switch_profile']}
    ${profile_name} =  Get Variable Value  ${profile_data['profile_name']}
    ${preurl} =  Catenate   /api/node/mo/uni/infra/accportprof-${sw_profile}
    ${preurl1} =  Catenate  ${preurl}/hports-${profile_name}-typ-range.json
    [return]  ${preurl1}

Build interface cdp policy group body for create
    [Documentation]  Build interface cdp policy group body for create
    [Arguments]  ${cdp_policygrp_data}
    ${cdp_policygrp_name} =  Get Variable Value  ${cdp_policygrp_data['cdp_polgrp_name']}
    ${adminstate} =  Get Variable Value  ${cdp_policygrp_data['adminState']}
    ${payload} =  CDP_policygrp_body_for_create  ${cdp_policygrp_name}  ${adminstate}
    [Return]  ${payload}

Build interface cdp policy group body for edit
    [Documentation]   Build interface cdp policy group body for edit
    [Arguments]  ${cdp_policygrp_data}
    ${cdp_policygrp_name} =  Get Variable Value  ${cdp_policygrp_data['cdp_polgrp_name']}
    ${adminstate} =  Get Variable Value  ${cdp_policygrp_data['adminState']}
    ${payload} =  CDP_policygrp_body_for_edit  ${cdp_policygrp_name}  ${adminstate}
    [Return]  ${payload}

Build interface lldp policy group body for create
    [Documentation]    Build interface lldp policy group body for create
    [Arguments]  ${lldp_policygrp_data}
    ${lldp_policygrp_name} =  Get Variable Value  ${lldp_policygrp_data['lldp_polgrp_name']}
    ${payload} =  lldp_interfacepol_body_for_create  ${lldp_policygrp_name}
    [Return]  ${payload}

Build interface lldp policy group body for edit
    [Documentation]    Build interface lldp policy group body for edit
    [Arguments]  ${lldp_policygrp_data}
    ${lldp_policygrp_name} =  Get Variable Value  ${lldp_policygrp_data['lldp_polgrp_name']}
    ${adminRxSt} =  Get Variable Value  ${lldp_policygrp_data['adminRxSt']}
    ${adminTxSt} =  Get Variable Value  ${lldp_policygrp_data['adminTxSt']}
    ${payload} =  lldp_interfacepol_body_for_edit  ${lldp_policygrp_name}  ${adminRxSt}  ${adminTxSt}
    [Return]  ${payload}

Build AEP body for create
    [Documentation]    Build AEP body for create.
    [Arguments]  ${aep_data}
    ${aep_name} =  Get Variable Value  ${aep_data['aep_name']}
    ${domain_name} =  Get Variable Value  ${aep_data['domain_name']}
    ${payload} =  aep_bodyBuild_for_create  ${aep_name}  ${domain_name}
    [Return]  ${payload}

Build AEP body for edit
    [Documentation]   Build AEP body for edit.
    [Arguments]  ${aep_data}
    ${domain_name} =  Get Variable Value  ${aep_data['domain_name']}
    ${payload} =  aep_bodyBuild_for_edit  ${domain_name}
    [Return]  ${payload}

Build physical domain body for create
    [Documentation]    Build physical domain body for create
    [Arguments]  ${physicalDomain_data}
    ${pd_name} =  Get Variable Value  ${physicalDomain_data['pd_name']}
    ${vlanPool_name} =  Get Variable Value  ${physicalDomain_data['vlanPool_name']}
    ${payload} =  physicalDomain_bodyBuild_forCreate  ${pd_name}  ${vlanPool_name}
    [Return]  ${payload}

Build payload to attach AEP to physical domain
    [Documentation]   Build payload to attach AEP to physical domain
    [Arguments]  ${physicalDomain_data}
    ${pd_name} =  Get Variable Value  ${physicalDomain_data['pd_name']}
    ${payload} =  attach_aep_to_physicalDomain_bodyBuild  ${pd_name}
    [Return]  ${payload}

Build payload for edit physical domain
    [Documentation]   Build payload for edit physical domain 
    [Arguments]  ${physicalDomain_data}
    ${vlanPool_name} =  Get Variable Value  ${physicalDomain_data['vlanPool_name']}
    ${payload} =  edit_physical_domain  ${vlanPool_name}
    [Return]  ${payload}

AEP creation
    [Documentation]    AEP Creation
    ${url} =  Build URL for AEP create  ${aep_data}
    ${pload} =  Build AEP body for create  ${aep_data}
    Push data to APIC  ${url}  ${pload}

AEP edit
    [Documentation]    AEP edit
    ${url} =  Build URL for AEP edit  ${aep_data}
    ${pload} =  Build AEP body for edit  ${aep_data}
    Push data to APIC  ${url}  ${pload}

Physical Domain creation
    [Documentation]    Physical Domain creation
    ${url} =  Build URL for Physical Domain  ${physicalDomain_data}
    ${pload} =  Build physical domain body for create  ${physicalDomain_data}
    Push data to APIC  ${url}  ${pload}

    ${aep_url} =  Build URL to attach AEP to physical domain  ${physicalDomain_data}
    ${payload} =  Build payload to attach AEP to physical domain  ${physicalDomain_data}
    Push data to APIC  ${aep_url}  ${payload}

Physical Domain Edit
    [Documentation]    Physical Domain Edit
    ${url} =  Build URL for edit physical domain  ${physicalDomain_data}
    ${pload} =  Build payload for edit physical domain  ${physicalDomain_data}
    Push data to APIC  ${url}  ${pload}

VMM Domain creation
    [Documentation]    VMM Domain creation
    [Arguments]  ${vlan_pool_data}  ${vcenter_credentials}  ${VMMvSwitchInfo}
    ${POOL_NAME} =  Get Variable Value  ${vlan_pool_data['pool_name']}
    ${ENCAP_TYPE} =  Get Variable Value  ${vlan_pool_data['encap_type']}
    ${VLAN_START} =  Get Variable Value  ${vlan_pool_data['vlan_start']}
    ${VLAN_END} =  Get Variable Value  ${vlan_pool_data['vlan_end']}
    ${POOL_MODE} =  Get Variable Value  ${vlan_pool_data['pool_mode']}

    ${VCENTER_USER} =  Get Variable Value  ${vcenter_credentials['vcenter_user']}
    ${VCENTER_PASS} =  Get Variable Value  ${vcenter_credentials['vcenter_pass']}
    ${VCENTER_IP} =  Get Variable Value  ${vcenter_credentials['vcenter_ip']}

    ${VMM_TYPE} =  Get Variable Value  ${VMMvSwitchInfo['vmm_type']}
    ${DATACENTER_NAME} =  Get Variable Value  ${VMMvSwitchInfo['datacenter_name']}
    ${DVS_NAME} =  Get Variable Value  ${VMMvSwitchInfo['dvs_name']}
    Create_VMMDomain  ${session}  ${POOL_NAME}  ${ENCAP_TYPE}  ${VLAN_START}  ${VLAN_END}  ${POOL_MODE}  ${VCENTER_USER}  ${VCENTER_PASS}  ${VMM_TYPE}  ${DATACENTER_NAME}  ${DVS_NAME}  ${VCENTER_IP}

Get VMM Domain All VLANS
    [Documentation]    Get VMM Domain All VLANS
    ${domain} =   Get Variable Value  ${vmmDomain_data['vmmDomain_name']}
    ${controller} =  get_controllers  ${session}  ${domain}
    ${listofvlans} =  get_portGroups_listOfAll  ${session}  ${domain}  ${controller}
    [Return]  ${listofvlans}

Get VLAN For Given EPG
    [Documentation]    Get VLAN For Given EPG
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    ${epg_name} =  Get Variable Value  ${tenants_details['epg_name']}
    ${string_for_vlan} =  catenate  SEPARATOR=|  ${tenant_name}  ${app_name}  ${epg_name}
    ${domain} =   Get Variable Value  ${vmmDomain_data['vmmDomain_name']}
    ${controller} =  get_controllers  ${session}  ${domain}
    ${vlan} =  get_portGroups  ${session}  ${domain}  ${controller}  ${string_for_vlan}
    [Return]  ${vlan}

Get VMM Domain All VLANS For Given Tenant
    [Documentation]    Get VMM Domain All VLANS For Given Tenant
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${domain} =   Get Variable Value  ${vmmDomain_data['vmmDomain_name']}
    ${controller} =  get_controllers  ${session}  ${domain}
    ${vlans} =  get_portGroups_vlansList_givenTenant  ${session}  ${domain}  ${controller}  ${tenant_name}
    [Return]  ${vlans}

Adding EPG to Tenant and attach VMM Domain
    [Documentation]    Adding EPG to Tenant and attach VMM Domain
    [Arguments]  ${epg_name}
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_profile_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    ${domain_name} =   Get Variable Value  ${vmmDomain_data['vmmDomain_name']}
    EPG_creation_and_domainAttch  ${session}  ${tenant_name}  ${app_profile_name}  ${epg_name}  ${domain_name}

Get VLAN For Given EPG Name
    [Documentation]    Get VLAN For Given EPG Name
    [Arguments]    ${epg_name}
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    #${epg_name} =  Get Variable Value  ${tenants_details['epg_name']}
    ${string_for_vlan} =  catenate  SEPARATOR=|  ${tenant_name}  ${app_name}  ${epg_name}
    ${domain} =   Get Variable Value  ${vmmDomain_data['vmmDomain_name']}
    ${controller} =  get_controllers  ${session}  ${domain}
    ${vlan} =  get_portGroups  ${session}  ${domain}  ${controller}  ${string_for_vlan}
    [Return]  ${vlan}

Delete EPG in specified ApplicationProfile of given Tenant
    [Documentation]    Delete EPG in specified ApplicationProfile of given Tenant
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    ${epg_name} =  Get Variable Value  ${tenants_details['epg_name']}
    EPG_domainDetach  ${session}  ${tenant_name}  ${app_name}  ${epg_name}

Attach staticBinding interface to EPG
    [Documentation]    Attach staticBinding interface to EPG
    ${interface} =  Get Variable Value  ${INTERFACE_Details}
    ${vlan} =  Get Variable Value  ${VLAN_Details}
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    ${epg_name} =  Get Variable Value  ${tenants_details['epg_name']}
    add_static_binding_interface  ${session}  ${tenant_name}  ${app_name}  ${epg_name}  ${interface}  ${vlan}

Get VMM domain and static binding vlans of given Tenant
    [Documentation]    Get VMM domain and static binding vlans of given Tenant
    [Arguments]  ${tenant_name}  ${domain_name}
    ${vlan} =  get_tenant_staticBinding_dynamic_vlans  ${session}  ${tenant_name}  ${domain_name}
    [Return]  ${vlan}

Remove staticBinding interface from EPG
    [Documentation]    Remove staticBinding interface from EPG
    ${interface} =  Get Variable Value  ${INTERFACE_Details}
    ${vlan} =  Get Variable Value  ${VLAN_Details}
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    ${epg_name} =  Get Variable Value  ${tenants_details['epg_name']}
    remove_static_binding_interface  ${session}  ${tenant_name}  ${app_name}  ${epg_name}  ${interface}  ${vlan}

Attach staticBinding interface portchannel to EPG
    [Documentation]    Attach staticBinding interface portchannel to EPG
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    ${epg_name} =  Get Variable Value  ${tenants_details['epg_name']}
    ${interface1} =  Get Variable Value  ${PC_INTERFACE1_Details}
    ${vlan} =  Get Variable Value  ${PC_VLAN_Details}
    ${interface2} =  Get Variable Value  ${PC_INTERFACE2_Details}
    Log to Console and Logfile    ${tenant_name} ${app_name} ${epg_name} ${interface1} ${interface2} ${vlan}
    add_static_binding_PC  ${session}  ${tenant_name}  ${app_name}  ${epg_name}  ${interface1}  ${interface2}  ${vlan}

Remove staticBinding interface portchannel from EPG
    [Documentation]    Remove staticBinding interface portchannel from EPG
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    ${epg_name} =  Get Variable Value  ${tenants_details['epg_name']}
    ${interface1} =  Get Variable Value  ${PC_INTERFACE1_Details}
    ${vlan} =  Get Variable Value  ${PC_VLAN_Details}
    ${interface2} =  Get Variable Value  ${PC_INTERFACE2_Details}
    remove_static_binding_PC  ${session}  ${tenant_name}  ${app_name}  ${epg_name}  ${interface1}  ${interface2}  ${vlan}

Attach staticBinding interface virtualPortChannel to EPG
    [Documentation]    Attach staticBinding interface virtualPortChannel to EPG
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    ${epg_name} =  Get Variable Value  ${tenants_details['epg_name']}
    ${interface1} =  Get Variable Value  ${vPC_INTERFACE1_Details}
    ${vlan} =  Get Variable Value  ${vPC_VLAN_Details}
    ${interface2} =  Get Variable Value  ${vPC_INTERFACE2_Details}
    add_static_binding_vPC  ${session}  ${tenant_name}  ${app_name}  ${epg_name}  ${interface1}  ${interface2}  ${vlan}

Remove staticBinding interface virtualPortChannel from EPG
    [Documentation]    Remove staticBinding interface virtualPortChannel from EPG
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    ${epg_name} =  Get Variable Value  ${tenants_details['epg_name']}
    ${interface1} =  Get Variable Value  ${vPC_INTERFACE1_Details}
    ${vlan} =  Get Variable Value  ${vPC_VLAN_Details}
    ${interface2} =  Get Variable Value  ${vPC_INTERFACE2_Details}
    remove_static_binding_vPC  ${session}  ${tenant_name}  ${app_name}  ${epg_name}  ${interface1}  ${interface2}  ${vlan}

Attach staticBinding interface portchannel to EPG with existing policy group
    [Documentation]    Attach staticBinding interface portchannel to EPG with existing policy group
    [Arguments]  ${tenant_name}  ${app_name}  ${epg_name}
    ${url} =  Catenate  /api/node/mo/uni/tn-${tenant_name}/ap-${app_name}/epg-${epg_name}.json
    ${vlan} =  Get Variable Value  ${PC_details_url['vlan']}
    ${polgrp_name} =  Get Variable Value  ${PC_details_url['policygrp']}
    ${node} =  Get Variable Value  ${PC_details_url['node']}
    ${payload} =  attach_PCpolicy_to_EPG_payload  ${vlan}  ${polgrp_name}  ${node}
    Push data to APIC  ${url}  ${payload}

Remove staticBinding interface portchannel to EPG with existing policy group
    [Documentation]    Remove staticBinding interface portchannel to EPG with existing policy group
    [Arguments]  ${tenant_name}  ${app_name}  ${epg_name}
    ${polgrp_name} =  Get Variable Value  ${PC_details_url['policygrp']}
    ${node} =  Get Variable Value  ${PC_details_url['node']}
    ${pload_and_url} =  remove_PCpolicy_from_EPG_payload  ${tenant_name}  ${app_name}  ${epg_name}  ${polgrp_name}  ${node}
    ${payload} =  Get From List  ${pload_and_url}  0
    ${url} =  Get From List  ${pload_and_url}  1
    Push data to APIC  ${url}  ${payload}

Attach staticBinding interface virtual portchannel to EPG with existing policy group
    [Documentation]   Attach staticBinding interface virtual portchannel to EPG with existing policy group
    [Arguments]  ${tenant_name}  ${app_name}  ${epg_name}
    ${url} =  Catenate  /api/node/mo/uni/tn-${tenant_name}/ap-${app_name}/epg-${epg_name}.json
    ${vlan} =  Get Variable Value  ${vPC_details_url['vlan']}
    ${polgrp_name} =  Get Variable Value  ${vPC_details_url['policygrp']}
    ${payload} =  attach_vPCpolicy_to_EPG_payload  ${vlan}  ${polgrp_name}
    Push data to APIC  ${url}  ${payload}

Remove staticBinding interface virtual portchannel to EPG with existing policy group
    [Documentation]    Remove staticBinding interface virtual portchannel to EPG with existing policy group
    [Arguments]  ${tenant_name}  ${app_name}  ${epg_name}
    ${polgrp_name} =  Get Variable Value  ${vPC_details_url['policygrp']}
    ${pload_and_url} =  remove_vPCpolicy_from_EPG_payload  ${tenant_name}  ${app_name}  ${epg_name}  ${polgrp_name}
    ${payload} =  Get From List  ${pload_and_url}  0
    ${url} =  Get From List  ${pload_and_url}  1
    Push data to APIC  ${url}  ${payload}

Edit AccessPort PolicyGroup with CDP policy
    [Documentation]   Edit AccessPort PolicyGroup with CDP policy
    [Arguments]  ${PolicyGrp_name}  ${cdpPolicy_name}
    ${pload_and_url} =  edit_cdpPolicy_AccessPortPolicyGroup  ${PolicyGrp_name}  ${cdpPolicy_name}
    ${payload} =  Get From List  ${pload_and_url}  0
    ${url} =  Get From List  ${pload_and_url}  1
    Push data to APIC  ${url}  ${payload}

Edit AccessPort PolicyGroup with LLDP policy
    [Documentation]   Edit AccessPort PolicyGroup with LLDP policy
    [Arguments]  ${PolicyGrp_name}  ${cdpPolicy_name}
    ${pload_and_url} =  edit_lldpPolicy_AccessPortPolicyGroup  ${PolicyGrp_name}  ${cdpPolicy_name}
    ${payload} =  Get From List  ${pload_and_url}  0
    ${url} =  Get From List  ${pload_and_url}  1
    Push data to APIC  ${url}  ${payload}

Edit PCorvPC PolicyGroup with CDP Policy
    [Documentation]    Edit PCorvPC PolicyGroup with CDP Policy
    [Arguments]  ${PolicyGrp_name}  ${cdpPolicy_name}
    ${pload_and_url} =  edit_cdppolicy_InPCorvPC_policyGroup  ${PolicyGrp_name}  ${cdpPolicy_name}
    ${payload} =  Get From List  ${pload_and_url}  0
    ${url} =  Get From List  ${pload_and_url}  1
    Push data to APIC  ${url}  ${payload}

Edit PCorvPC PolicyGroup with lldp Policy
    [Documentation]    Edit PCorvPC PolicyGroup with lldp Policy
    [Arguments]  ${PolicyGrp_name}  ${cdpPolicy_name}
    ${pload_and_url} =  edit_lldpPolicy_InPCorvPC_policyGroup  ${PolicyGrp_name}  ${cdpPolicy_name}
    ${payload} =  Get From List  ${pload_and_url}  0
    ${url} =  Get From List  ${pload_and_url}  1
    Push data to APIC  ${url}  ${payload}

Edit PCorvPC PolicyGroup with lacp Policy
    [Documentation]   Edit PCorvPC PolicyGroup with lacp Policy
    [Arguments]  ${PolicyGrp_name}  ${cdpPolicy_name}
    ${pload_and_url} =  edit_lacpPolicy_InPCorvPC_policyGroup  ${PolicyGrp_name}  ${cdpPolicy_name}
    ${payload} =  Get From List  ${pload_and_url}  0
    ${url} =  Get From List  ${pload_and_url}  1
    Push data to APIC  ${url}  ${payload}

Create IntraEPGIsolation EPG
    [Documentation]   Create IntraEPGIsolation EPG
    [Arguments]  ${tenantName_inWhich_epgToBeCreated}  ${appProfileName_inWhich_epgToBeCreated}  ${epg_name_tobe_created}
    IntraEPGIsolation_EPG_creation  ${session}  ${tenantName_inWhich_epgToBeCreated}  ${appProfileName_inWhich_epgToBeCreated}  ${epg_name_tobe_created}

Create MicroSegment EPG
    [Documentation]    Create MicroSegment EPG
    [Arguments]  ${tenantName_inWhich_epgToBeCreated}  ${appProfileName_inWhich_epgToBeCreated}  ${epg_name_tobe_created}
    microSegEPG_creation  ${session}  ${tenantName_inWhich_epgToBeCreated}  ${appProfileName_inWhich_epgToBeCreated}  ${epg_name_tobe_created}

Adding EPG to Tenant and attach VMM Domain with or without VLAN Pool and range
    [Documentation]    Adding EPG to Tenant and attach VMM Domain with or without VLAN Pool and range
    [Arguments]  ${epg_name}  ${domain_name}
    ${tenant_name} =  Get Variable Value  ${tenants_details['tenant_name']}
    ${app_profile_name} =  Get Variable Value  ${tenants_details['ApProfile_name']}
    EPG_creation_and_domainAttch  ${session}  ${tenant_name}  ${app_profile_name}  ${epg_name}  ${domain_name}
