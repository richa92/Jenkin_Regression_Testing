*** Settings ** *
Documentation      Continuous Integration Tests for RoboGalaxy dev Branch
Resource           301 - OVAConfig.txt
Force Tags         Buildup
Test Setup         Load Test Data and Open Browser
Test Teardown      Logout And Close All Browsers

*** Test Cases ** *
OVA Qualification

    Set Log Level    TRACE
    Log Variables

    # Step : 1 Log into fusion as Administrator
    ${user} = Get Data By Property  ${TestData.users}  name  Administrator
        Fusion UI Login to Appliance   ${user[0].name}
        Log to Console	Test Step - 1 Completed

        # Step : 2 Remove users accounts and networks required for tests (if exist)
        Fusion UI Remove User  ${TestData.users[1]}
        Fusion UI Remove User  ${TestData.users[2]}
        Fusion UI Navigate To Networks Page
        Fusion UI delete ethernet network  @{TestData.networks}
        Fusion UI delete fc network  @{TestData.fcnetworks}
        Log to Console	Test Step - 2 Completed

        # Step : 3 Create users accounts (serveradmin, backadmin) and networks required for tests
        Fusion UI Navigate To Users and Groups Page
        Fusion UI Create User  ${TestData.users[1]}
        Fusion UI Create User  ${TestData.users[2]}
        Fusion UI Navigate To Networks Page
        Fusion UI create ethernet network  ${TestData.networks[0]}
        Fusion UI create fc network  ${TestData.fcnetworks[0]}
        Log to Console	Test Step - 3 Completed

        # Step : 4 Log out of Appliance
        Fusion UI Logout of Appliance
        Log to Console	Test Step - 4 Completed

    # Step : 5 Log into Fusion appliance as serveradmin
        ${user} = Get Data By Property  ${TestData.users}  name  serveradmin
        Fusion UI Login to Appliance   ${user[0].name}
        Log to Console	Test Step - 5 Completed

        # Step : 6 User shouldn't have any 'Edit/Delete' Action button in page
        fusion_ui_navigate_to_networks_page
        ${button_disabled} = fusion_ui_action_visibility_check_networks
        Log to Console	Test Step Value of button "${button_disabled}"
        Run Keyword If	'${button_disabled}' == 'False'	Log to Console	'Expected not to see actions button'	ELSE	fail
        Log to Console	Test Step - 6 Completed

        # Step : 7 Log out of appliance
        Fusion UI Logout of Appliance
        Log to Console	Test Step - 7 Completed

        # Step : 8 Log into Fusion appliance as backupadmin
        ${user} = Get Data By Property  ${TestData.users}  name  backupadmin
        Fusion UI Login to Appliance   ${user[0].name}
        Log to Console	Test Step - 8 Completed

        # Step : 9 User shouldn't have any 'Edit/Delete' Action button in page
        fusion_ui_navigate_to_networks_page
        ${button_disabled} = fusion_ui_action_visibility_check_networks
        Log to Console	Test Step Value of button "${button_disabled}"
        Run Keyword If	'${button_disabled}' == 'False'	Log to Console	'Expected not to see actions button'	ELSE	fail
        Log to Console	Test Step - 9 Completed

        # Step : 10 Log out of appliance
        Fusion UI Logout of Appliance
        Log to Console	Test Step - 10 Completed

        # Step : 11 Re-login into fusion as Administrator to cleanup users/networks
    ${user} = Get Data By Property  ${TestData.users}  name  Administrator
        Fusion UI Login to Appliance   ${user[0].name}
        Fusion UI Remove User  ${TestData.users[1]}
        Fusion UI Remove User  ${TestData.users[2]}
        Fusion UI Navigate To Networks Page
        Fusion UI delete ethernet network  @{TestData.networks}
        Fusion UI delete fc network  @{TestData.fcnetworks}
        Log to Console	Test Step - 11 Completed
