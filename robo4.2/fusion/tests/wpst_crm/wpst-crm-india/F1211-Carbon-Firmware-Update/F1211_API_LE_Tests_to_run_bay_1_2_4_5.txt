*** Settings ***
Documentation       Feature Test: F1211
...                 Updated test to include Carbon firmware update tests
...
#Variables           data_variables.py
#Suite Setup        Run FTS and test-specific setup
#Suite Teardown     Suite Teardown
#Resource            ../../../resource/fusion_api_all_resource_files.txt
Resource            F1211_API_Resources.txt

Library             Collections
Library             json
Library             OperatingSystem

*** variables ***
${APPLIANCE_IP}             10.10.3.99


*** Test Cases ***


00 Appliance LogIn
    #${Creds}    Create Dictionary   userName    ${USERNAME} password    ${PASSWORD}
    Fusion Api Login Appliance     ${APPLIANCE_IP}   ${login_details}
    #
    ${users} =  Get Variable Value  ${users}
    Run Keyword If  ${users} is not ${null}    Add F1211 Users from variable              ${users}

Clean Appliance
    Log to console    \nCleaning Appliance
    Run Keyword and Ignore Error    F1211_API_Resources.Power off ALL servers
    Run Keyword and Ignore Error    Remove All Server Profiles
    Run Keyword and Ignore Error    Remove All LEs
    Run Keyword and Ignore Error    Remove EG and LIG
    Run Keyword and Ignore Error    Remove All FC Networks


Create LIG EG before starting tests
    log to console    Creating Setup
    #Create LIG    ${lig_tbird_a_1}
    #Create EG    ${enc_groups_carbon_a1}
    #Create LIG    ${lig_tbird_b_4}
    #Create EG    ${enc_groups_carbon_b4}
    #Create LIG    ${lig_tbird_a_2}
    #Create EG    ${enc_groups_carbon_a2}
    #Create LIG    ${lig_tbird_b_5}
    #Create EG    ${enc_groups_carbon_b5}
    Create LIG    ${lig_tbird_1_4}
    Create EG    ${enc_groups_carbon_1_4}
    Create LIG    ${lig_tbird_2_5}
    Create EG    ${enc_groups_carbon_2_5}
    Create LIG    ${lig_tbird_1_4_2_5}
    Create EG    ${enc_groups_carbon_1_4_2_5}

    
F1211_TC_API_43 : Perform parallel LE firmware downgrade operation with Carbon in Bay 1 2 4 and 5
    sleep    ${TEST_DELAY}
    #Create FC Networks    ${carbon_fc_networks}
    #Create LIG    ${lig_tbird_1_4}
    #Create EG    ${enc_groups_carbon_1_4}
    #Run Keyword and Ignore Error    Remove All LEs
    sleep    30
    Create LE     TB_CAR_LE_1_4_2_5    enc_groups_carbon_1_4_2_5
    sleep    30
    #
    #Add FC Uplink to LIG and update LI    ${lig_tbird_upl_1_4_a_1}    lig_1_4    TB_CAR_LE_1_4_2_5-lig_1_4
    #
    Update LE Firmware  ${LE_fw_downgrade_Carbon_sharedInfra_parallel}    TB_CAR_LE_1_4_2_5
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_1}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    1
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_4}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    4
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_2}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    2
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_5}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    5
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #

F1211_TC_API_43_1 : Perform Orchestrated LE firmware upgrade operation with Carbon in Bay 1 2 4 and 5
    sleep    ${TEST_DELAY}
    #Create FC Networks    ${carbon_fc_networks}
    #Create LIG    ${lig_tbird_1_4}
    #Create EG    ${enc_groups_carbon_1_4}
    #Run Keyword and Ignore Error    Remove All LEs
    #sleep    30
    #Create LE     TB_CAR_LE_1_4_2_5    enc_groups_carbon_1_4_2_5
    sleep    30
    #
    #Add FC Uplink to LIG and update LI    ${lig_tbird_upl_1_4_a_1}    lig_1_4    TB_CAR_LE_1_4_2_5-lig_1_4
    #
    Update LE Firmware  ${LE_fw_upgrade_Carbon_sharedInfra_orchestrated}    TB_CAR_LE_1_4_2_5
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_1}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    1
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_4}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    4
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_2}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    2
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_5}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    5
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #

F1211_TC_API_61 : Carbon in Bay 1 and Bay 4 and perform LI fm downgrade,Orchestrated
    sleep    ${TEST_DELAY}
    #Create LIG    ${lig_tbird_1_4}
    #Create EG    ${enc_groups_carbon_1_4}
    #Run Keyword and Ignore Error    Remove All LEs
    #Create LE     TB_CAR_LE_1_4    enc_groups_carbon_1_4
    Update LI Firmware  ${LI_fwdowngrade_carbon_orchestrated}    TB_CAR_LE_1_4-lig_1_4
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_1}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    1
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_4}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    4
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #

F1211_TC_API_43_1 F1211_TC_API_104 105 : Perform Orchestrated LE firmware upgrade operation with Carbon in Bay 1 2 4 and 5 with different version
    log to console  \n Orchestrated LE frw Carbon in Bay 1 2 4 and 5 with different version
    sleep    ${TEST_DELAY}
    #Create FC Networks    ${carbon_fc_networks}
    #Create LIG    ${lig_tbird_1_4}
    #Create EG    ${enc_groups_carbon_1_4}
    #Run Keyword and Ignore Error    Remove All LEs
    #sleep    30
    #Create LE     TB_CAR_LE_1_4_2_5    enc_groups_carbon_1_4_2_5
    #sleep    30
    #
    Update LE Firmware  ${LE_fw_upgrade_Carbon_sharedInfra_orchestrated}    TB_CAR_LE_1_4_2_5
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_1}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    1
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_4}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    4
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_2}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    2
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_5}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    5
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #

F1211_TC_API_61 : Carbon in Bay 1 and Bay 4 and perform LI fm downgrade,Orchestrated
    sleep    ${TEST_DELAY}
    #Create LIG    ${lig_tbird_1_4}
    #Create EG    ${enc_groups_carbon_1_4}
    #Run Keyword and Ignore Error    Remove All LEs
    #Create LE     TB_CAR_LE_1_4    enc_groups_carbon_1_4
    Update LI Firmware  ${LI_fwdowngrade_carbon_orchestrated}    TB_CAR_LE_1_4-lig_1_4
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_1}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    1
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_4}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    4
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #

F1211_TC_API_43_1 F1211_TC_API_104 103 : Stage one frm on one LI and stage and activate another frm on both LI
    sleep    ${TEST_DELAY}
    #Create FC Networks    ${carbon_fc_networks}
    #Create LIG    ${lig_tbird_1_4}
    #Create EG    ${enc_groups_carbon_1_4}
    #Run Keyword and Ignore Error    Remove All LEs
    #sleep    30
    #Create LE     TB_CAR_LE_1_4_2_5    enc_groups_carbon_1_4_2_5
    #sleep    30
    #
    Update LI Firmware  ${LI_fw_update_Carbon_orchestrated_stage_old}    TB_CAR_LE_1_4-lig_1_4
    #
    sleep    30
    Update LE Firmware  ${LE_fw_upgrade_Carbon_sharedInfra_orchestrated}    TB_CAR_LE_1_4_2_5
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_1}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    1
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_4}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    4
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_2}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    2
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_5}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    5
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #

*** comment ***

F1211_TC_108 : first stage 1 firmware and stage + activate another firmware
    sleep    ${TEST_DELAY}
    #Create LIG    ${lig_tbird_1_4}
    #Create EG    ${enc_groups_carbon_1_4}
    #
    #Create LE     TB_CAR_LE_1_4    enc_groups_carbon_1_4
    Update LI Firmware  ${LI_fw_update_Carbon_orchestrated_stage_old}    TB_CAR_LE_1_4-lig_1_4
    #
    sleep    60
    Update LI Firmware  ${LI_fw_update_Carbon_orchestrated_stage}    TB_CAR_LE_1_4-lig_1_4
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_1}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    1
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_4}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    4
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${UPGRADE_FIRMWARE}
    #

*** comment ***
F1211_TC_API_61 : Carbon in Bay 2 and Bay 5 and perform LI fm downgrade,Orchestrated
    sleep    ${TEST_DELAY}
    #Create LIG    ${lig_tbird_2_5}
    #Create EG    ${enc_groups_carbon_2_5}
    #Run Keyword and Ignore Error    Remove All LEs
    #Create LE     TB_CAR_LE_2_5    enc_groups_carbon_2_5
    Update LI Firmware  ${LI_fwdowngrade_carbon_orchestrated}    TB_CAR_LE_2_5-lig_2_5
    #
    # Check State and Firmware Version
    ${ic} =    Get IC Name    ${ICM_a_2}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    2
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${ic} =    Get IC Name    ${ICM_b_5}
    ${d1} =    Get From Dictionary    ${ic[0]}    state
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  Configured
    ${d1} =    Get From Dictionary    ${ic[0]}    firmwareVersion
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
    ${d1} =    Get From Dictionary    ${ic[0]}    powerState
    Log To Console  ${d1}
    Should Be Equal As Strings    ${d1}  On
    #
    ${emdata}=    Get ICM Data From EM    5
    ${d1} =    Get From Dictionary    ${emdata}    FirmwareVersion
    Should Be Equal As Strings    ${d1}  ${DOWNGRADE_FIRMWARE}
    #
