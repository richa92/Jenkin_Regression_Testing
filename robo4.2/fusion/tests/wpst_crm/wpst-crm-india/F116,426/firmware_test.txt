
*** Settings ***

Resource			firmware_config.txt
Force Tags			Buildup
Suite Setup			Load Test Data and Open Browser
Suite Teardown		Logout And Close All Browsers



*** Variables ***

${Permissible_IC_STATES_BeforeUpdate}=    ['configured','unmanaged']
${Permissible_IC_STATES_AfterUpdate}=    ['configured']


*** Test Cases ***

Login to appliance
		Set Log Level    TRACE
    	Log Variables

 		${user}=	Get Data By Property	${TestData.users}	name	Administrator
		Fusion UI Login to Appliance   ${user[0].name}
 
####################### PRE REQUISITES ##############################################

#add firmware bundle
	#fusion_ui_add_firmware_bundle   @{TestData.fwbundles}   
	#Run Keyword And Continue On Failure   Should Be Equal   '${Status}'   'True'   Unable to add all firmware bundles


#Delete LE and SP

		#delete Server profiles
		#fusion_ui_power_off_server_profile    ${TestData.profiles[0]}
		#fusion_ui_delete_server_profile     ${TestData.profiles[0]}
        
#		Log To Console  Deleting LE
#		fusion_ui_delete_logical_enclosure    @{TestData.les}


#Create LIG and verify creation
 #       #Create LIG
  #      Log To Console    ******CREATE LIG**********
	#	${Status}=    fusion_ui_create_logical_interconnect_group_tbird 		@{TestData.ligs}
#		Run Keyword And Continue On Failure   Should Be Equal   '${Status}'   'True'   ${Status}
#		Log To Console    ******CREATE LIG operations completed**********	
#		
#		#verify LIG
#		Log To Console    ******Verify LIG after Create operation**********
#		${Status}=    fusion_ui_verify_logical_interconnect_group 		@{TestData.ligs}
#		Run Keyword And Continue On Failure   Should Be Equal   '${Status}'   'True'   ${Status} 
#		Log To Console    ******Verify LIG complete**********
		
	
#Create EG		
#		#create EG
#		Log To Console    ******CREATE EG**********
#		${Status}=    fusion_ui_create_enclosure_group    @{TestData.encgroups} 
#		Run Keyword And Continue On Failure   Should Be Equal   '${Status}'   'True'   ${Status}
#		#verify EG creation
#		fusion_ui_verify_enclosuregroup    @{TestData.encgroups} 
#		Log To Console    ******CREATE EG operations completed**********
		

#Create LE 	
#		#create LE
#		Log To Console    ******CREATE LE**********
#		${Status}=    fusion_ui_create_logical_enclosure    @{TestData.les} 
#		Run Keyword And Continue On Failure   Should Be Equal   '${Status}'   'True'   ${Status}
#		Log To Console    ******CREATE LE operations completed**********
#		Log To Console    ******Verification**********
#		#fusion_ui_verify_li_and_ic_firmware_versions 	${TestData.firmware}
#		#Log To Console   Status - ${Status}



#Create Server profile
		#create Server profile
#		Log To Console    *********Power OFF Server ****************
#		${status}=    fusion_ui_power_off_server   ${TestData.profiles[0].server}
#		Log To Console    Server Hardware power OFF status : ${status}
		
#		Log To Console    *********Create Server profile**************** 
#		${Status}=    fusion_ui_create_server_profile     ${TestData.profiles[0]}
#		Log to Console   Server profile creation status: ${Status}
		


##############################POSITIVE SCENARIOS####################################################



Upgrade FW of LE--without force-Shared Infrastructure
		Log to Console	****** CHECK AND WAIT FOR ENCLOSURE REFRESH ACTIVITY TO COMPLETE ********
		fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware1.enclosure[0].name}
		fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware1.enclosure[1].name}
		
		Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE BEFORE FW UPDATE******
		${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware1}
		Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
		
		
		Log to Console	****** VERIFY IC STATE OF LE BEFORE FW UPDATE ********
		${Status}=   fusion_ui_verify_ic_state_of_le   ${Permissible_IC_STATES_BeforeUpdate}   ${TestData.firmware1}
		Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail
		
		# UPDATE FIRMWARE
		${Status}=	fusion_ui_update_tbird_logical_enclosure_firmware   	${TestData.firmware1}
		Run Keyword and Continue on Failure  Should Be Equal		'${Status}'		'True'  	${Status}
		
		Log to Console	****** VERIFY LE FW UPDATE ACTIVITY ********
		${Status}=	fusion_ui_validate_le_firmware_upgrade_activity_details 	${TestData.firmware1}
		Run Keyword and Continue on Failure  Should Contain    ${Status}    TEST PASSED    LE FW Update Test FAILED
		
		Log to Console	****** VERIFY IC FW ********
		${Status}=   fusion_ui_verify_li_and_ic_firmware_versions  ${TestData.firmware1}   
		Run Keyword and Continue on Failure 	Should Be Equal  '${Status}'		'True'  	Error during Firmware Version and IC activity Messages Validation

		Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE AFTER FW UPDATE******
		${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware1}
		Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
	

		Log to Console	****** VERIFY IC STATE OF LE AFTER FW UPDATE ********
		${Status}=   fusion_ui_verify_ic_state_of_le   ${Permissible_IC_STATES_AfterUpdate}   ${TestData.firmware1}
		Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail
		


Same Version FW update for LE--with force option-Shared Infrastructure
#		fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware2.enclosure[0].name}
#		fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware2.enclosure[1].name}
		
#		Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE BEFORE FW UPDATE******
#		${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware2}
#		Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
		
		
#		Log to Console	****** VERIFY IC STATE OF LE BEFORE FW UPDATE ********
#		${Status}=   fusion_ui_verify_ic_state_of_le   ${Permissible_IC_STATES_BeforeUpdate}   ${TestData.firmware2}
#		Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail
		
#		${Status}=	fusion_ui_update_tbird_logical_enclosure_firmware   	${TestData.firmware2}
#		Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	${Status}
		
#		Log to Console	****** VERIFY LE FW UPDATE ACTIVITY ********
		
#		${Status}=	fusion_ui_validate_le_firmware_upgrade_activity_details 	${TestData.firmware2}
#		Run Keyword and Continue on Failure   Should Contain    ${Status}    TEST PASSED    LE FW Update Test FAILED
		
#		Log to Console	****** VERIFY IC FW ********
#		${Status}=   fusion_ui_verify_li_and_ic_firmware_versions  ${TestData.firmware2}   
#		Run Keyword and Continue on Failure 	Should Be Equal		'${Status}'		'True'  	Error during Firmware Version and IC activity Messages Validation
		
#		Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE AFTER FW UPDATE******
#		${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware2}
#		Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
		
		
#		Log to Console	****** VERIFY IC STATE OF LE AFTER FW UPDATE ********
#		${Status}=   fusion_ui_verify_ic_state_of_le   ${Permissible_IC_STATES_AfterUpdate}   ${TestData.firmware2}
#		Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail
		

#Downgrade FW of LE--with force option-Shared Infrastructure
		#fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware3.enclosure[0].name}
		#fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware3.enclosure[1].name}
		
		#Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE BEFORE FW UPDATE******
		#${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware3}
		#Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
		
		
		#Log to Console	****** VERIFY IC STATE OF LE BEFORE FW UPDATE ********
		#${Status}=   fusion_ui_verify_ic_state_of_le   ${Permissible_IC_STATES_BeforeUpdate}    ${TestData.firmware3}
		#Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail
		
		#${Status}=	fusion_ui_update_tbird_logical_enclosure_firmware   	${TestData.firmware3}
		#Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	${Status}
		
		#Log to Console	****** VERIFY LE FW UPDATE ACTIVITY ********
		
		#${Status}=	fusion_ui_validate_le_firmware_upgrade_activity_details 	${TestData.firmware3}
		#Run Keyword and Continue on Failure   Should Contain    ${Status}    TEST PASSED    LE FW Update Test FAILED
		#${Status}=   fusion_ui_verify_li_and_ic_firmware_versions  ${TestData.firmware3}   
		#Run Keyword and Continue on Failure 	Should Be Equal		'${Status}'		'True'  	Error during Firmware Version and IC activity Messages Validation

		
		#Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE AFTER FW UPDATE******
		#${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware3}
		#Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
		
		
		#Log to Console	****** VERIFY TC STATE OF LE AFTER FW UPDATE ********
		#${Status}=   fusion_ui_verify_ic_state_of_le    ${Permissible_IC_STATES_AfterUpdate}    ${TestData.firmware3}
		#Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail
	


#4.Firmware update for LE-Positive - without force- Shared Infrastructure and profiles- Upgrade
#		fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware4.enclosure[0].name}
#		fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware4.enclosure[1].name}
		
		#Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE BEFORE FW UPDATE******
		#${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware4}
		#Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
		
		
#		Log to Console	****** VERIFY IC STATE OF LE BEFORE FW UPDATE ********
#		${Status}=   fusion_ui_verify_ic_state_of_le   ${Permissible_IC_STATES_BeforeUpdate}   ${TestData.firmware4}
#		Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail
		
#		Log To Console   ***Power Off server Profile***
#		fusion_ui_power_off_server_profile   ${TestData.profiles[0]}
		
#		${Status}=	fusion_ui_update_tbird_logical_enclosure_firmware   	${TestData.firmware4}
#		Run Keyword and Continue on Failure	Should Be Equal		'${Status}'		'True'  	${Status}
		
#		${Status}=	fusion_ui_validate_le_firmware_upgrade_activity_details 	${TestData.firmware4}
#		Run Keyword and Continue on Failure   Should Contain    ${Status}    TEST PASSED    LE FW Update Test FAILED
#		${Status}=   fusion_ui_verify_li_and_ic_firmware_versions  ${TestData.firmware4}   
#		Run Keyword and Continue on Failure 	Should Be Equal		'${Status}'		'True'  	Error during Firmware Version and IC activity Messages Validation
		
		#Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE AFTER FW UPDATE******
		#${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware4}
		#Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
		
		
#		Log to Console	****** VERIFY IC STATE OF LE AFTER FW UPDATE ********
#		${Status}=   fusion_ui_verify_ic_state_of_le   ${Permissible_IC_STATES_AfterUpdate}   ${TestData.firmware4}
#		Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail

		
#Same Version FW update for LE-with force option-Shared Infrastructure and profiles
		#fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware5.enclosure[0].name}
		#fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware5.enclosure[1].name}
		
		#Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE BEFORE FW UPDATE******
		#${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware5}
		#Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
		
		
#		Log to Console	****** VERIFY IC STATE OF LE BEFORE FW UPDATE ********
#		${Status}=   fusion_ui_verify_ic_state_of_le   ${Permissible_IC_STATES_BeforeUpdate}   ${TestData.firmware5}
#		Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail
		
#		fusion_ui_power_off_server_profile   ${TestData.profiles[0]}
		
		
#		${Status}=	fusion_ui_update_tbird_logical_enclosure_firmware   	${TestData.firmware5}
#		Run Keyword and Continue on Failure	Should Be Equal		'${Status}'		'True'  	${Status}
		
#		${Status}=	fusion_ui_validate_le_firmware_upgrade_activity_details 	${TestData.firmware5}
#		Run Keyword and Continue on Failure   Should Contain    ${Status}    TEST PASSED    LE FW Update Test FAILED
#		${Status}=   fusion_ui_verify_li_and_ic_firmware_versions  ${TestData.firmware5}   
#		Run Keyword and Continue on Failure 	Should Be Equal		'${Status}'		'True'  	Error during Firmware Version and IC activity Messages Validation
		
		
		#Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE AFTER FW UPDATE******
		#${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware5}
		#Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
		
		
#		Log to Console	****** VERIFY IC STATE OF LE AFTER FW UPDATE ********
#		${Status}=   fusion_ui_verify_ic_state_of_le  ${Permissible_IC_STATES_AfterUpdate}   ${TestData.firmware5}
#		Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail



#6.Firmware update for LE-Positive - with force option- Shared Infrastructure and profiles- Downgrade
#		fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware6.enclosure[0].name}
#		fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware6.enclosure[1].name}
		
		#Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE BEFORE FW UPDATE******
		#${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware6}
		#Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
		
		
		#Log to Console	****** VERIFY IC STATE OF LE BEFORE FW UPDATE ********
#		${Status}=   fusion_ui_verify_ic_state_of_le   ${Permissible_IC_STATES_BeforeUpdate}   ${TestData.firmware6}
#		Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail
		
		
#		fusion_ui_power_off_server_profile   ${TestData.profiles[0]}
		
		
#		${Status}=	fusion_ui_update_tbird_logical_enclosure_firmware   	${TestData.firmware6}
#		Run Keyword and Continue on Failure	Should Be Equal		'${Status}'		'True'  	${Status}
		
#		${Status}=	fusion_ui_validate_le_firmware_upgrade_activity_details 	${TestData.firmware6}
#		Run Keyword and Continue on Failure   Should Contain    ${Status}    TEST PASSED    LE FW Update Test FAILED
#		${Status}=   fusion_ui_verify_li_and_ic_firmware_versions  ${TestData.firmware6}   
#		Run Keyword and Continue on Failure 	Should Be Equal		'${Status}'		'True'  	Error during Firmware Version and IC activity Messages Validation
		
		
		#Log To Console  ******VERIFY IC STACKING DOMAIN ROLE of LE AFTER FW UPDATE******
		#${Status}=   fusion_ui_verify_ic_stacking_domain_role_of_le    ${TestData.firmware6}
		#Run Keyword and Continue on Failure	 Should Be Equal		'${Status}'		'True'  	Something Wrong with IC stacking Roles.FW update might Not be successfull!!
		
#		Log to Console	****** VERIFY IC STATE OF LE AFTER FW UPDATE ********
#		${Status}=   fusion_ui_verify_ic_state_of_le   ${Permissible_IC_STATES_AfterUpdate}   ${TestData.firmware6}
#		Run Keyword If    '${Status}'=='True'   Log To Console  IC Sates as desired   ELSE     Fail


#Firmware update for LE-Positive - without force- EM only- upgrade
#
#		${Status}=	fusion_ui_update_tbird_logical_enclosure_firmware   	${TestData.firmware7}
#		Run Keyword and Continue on Failure	Should Be Equal		'${Status}'		'True'  	${Status}
		
#		${Status}=	fusion_ui_validate_le_firmware_upgrade_activity_details 	${TestData.firmware7}
#		Should Contain    ${Status}    TEST PASSED    LE FW Update Test FAILED
	

#Firmware update for LE-Positive - with force option- EM only-Same Version
#		fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware8.enclosure[0].name}
#		fusion_ui_wait_for_enclosure_refresh_complete   ${TestData.firmware8.enclosure[1].name}
		
#		${Status}=	fusion_ui_update_tbird_logical_enclosure_firmware   	${TestData.firmware8}
#		Run Keyword and Continue on Failure	Should Be Equal		'${Status}'		'True'  	${Status}
		
#		${Status}=	fusion_ui_validate_le_firmware_upgrade_activity_details 	${TestData.firmware8}
#		Should Contain    ${Status}    TEST PASSED    LE FW Update Test FAILED
		
	
#9.Firmware update for LE-Positive - with force option- EM only- downgrade
#		${Status}=	fusion_ui_update_tbird_logical_enclosure_firmware   	${TestData.firmware9}
#		Run Keyword and Continue on Failure	Should Be Equal		'${Status}'		'True'  	${Status}
		
#		${Status}=	fusion_ui_validate_le_firmware_upgrade_activity_details 	${TestData.firmware9}
#		Should Contain    ${Status}    TEST PASSED    LE FW Update Test FAILED



