*** Settings ***

Resource            firmware_config.txt
Force Tags          Buildup
Suite Setup         Load Test Data and Open Browser
Suite Teardown      Logout And Close All Browsers
Library             Collections


*** Variables ***

${Permissible_IC_STATES_BeforeUpdate}=    ['configured','unmanaged']
${Permissible_IC_STATES_AfterUpdate}=    ['configured']
${expected_build_version}    2.00.00-0210744

${ExpectedErrorMsg1}=           Unable to update firmware for the logical interconnect SGH420HHYA-LIG_B1 as an attempt was made to downgrade the firmware without selecting the force option.
${ExpectedErrorMsg3}=           No update required. Selected firmware is already installed in the logical interconnect SGH420HHYA-LIG_B1.
${ExpectedErrorMsg1}=    No update required
${ExpectedErrorMsg2}=    Selected firmware is already installed in the logical interconnect
${ExpectedErrorMsg3}=    Selected firmware is already installed
${ExpectedErrorMsg4}=    Unable to update firmware for the logical interconnect
${ExpectedErrorMsg5}=    an attempt was made to downgrade the firmware without selecting the force option
${ExpectedErrorMsg5.1}=    Retry the downgrade operation by selecting force option in the logical interconnect firmware update page
${ExpectedErrorMsg6}=    Firmware activation failed for logical interconnect
${ExpectedErrorMsg7}=    Activation failed due to failure of firmware update operation on interconnect
${ExpectedErrorMsg8}=    If the interconnects are in configured, unmanaged, maintenance or configuration error state, try the firmware activation again
${ExpectedErrorMsg9}=    If the interconnect is in any other state, refresh the enclosure and then retry the firmware update
${ExpectedErrorMsg10}=    If the problem continues to occur, contact your authorized support representative and provide them with a support dump
${ExpectedErrorMsg11}=    One or more interconnects are not in a valid state for firmware update
${ExpectedErrorMsg11.1}=   Visit the listed interconnects and examine the Activity view and follow the problem resolution steps listed there in order to bring the interconnects back to a Configured state or an Unmanaged state
${ExpectedErrorMsg11.2}=   AddedWithErrors state
${ExpectedErrorMsg12}=    There is an ongoing operation on the resource

${ExpectedErrorMsg13}=    One or more interconnects are not in a valid state for firmware update
${ExpectedErrorMsg14}=    Configuring state

${ExpectedErrorMsgLE4}=    no update required
${ExpectedErrorMsgLE5}=    selected enclosure firmware is older than the firmware that is already installed.
#${ExpectedErrorMsgLE5.1}=    no update required. selected enclosure firmware is older than the firmware that is already installed.
${ExpectedErrorMsgLEb1}=    No update required
${ExpectedErrorMsgLEb2}=    no update required. selected firmware is already installed for the onboard administrator.

*** Test Cases ***

Login to appliance
        Set Log Level    TRACE
        Log Variables

        ${user}=    Get Data By Property    ${TestData.users}   name    Administrator
        Fusion UI Login to Appliance   ${user[0].name}


#######Downgrade FW of  LE--without force option-Shared Infrastructure F1212_TC_UI_59   ########
TC02 Verify the alert message appears when try to set firmware baseline to the lower version and dont check the force installation flag(option) in downgrade firmware update operation In LE page
    [Documentation]    "1.3.1.1 Hill FW update LI: Verify the  alert message appears when try to set firmware baseline to the lower version and dont check the force installation flag(option) in downgrade firmware update operation In LE page"
    Log to Console    "Testcase_ID: TP section 1.3.1.1 F1212_TC_UI_59 and F1212_TC_UI_74--> Verify the  alert message appears when try to set firmware baseline to the lower version and dont check the force installation flag(option) in downgrade firmware update operation In LE page"


    #${Status}=  Fusion UI Update Logical Enclosure Firmware      @{TestData.update_le_firmware}[3]
    #run keyword if    '${status}'=='False'    Fail      " Update Firmware of Hill via LE Failed "
    ${Status}=  Fusion UI Update Logical Enclosure Firmware      @{TestData.update_le_firmware}[5]   # Lower version
    #${Status}=  Fusion UI Update Logical Enclosure Firmware      @{TestData.update_le_firmware}[12]  # Equal version

    ${Status}=  fusion_ui_validate_error_message_b  ${TestData.DWfirmwareb14}
    Log to Console    ${Status}
    ${Status}=              Convert To Lowercase    ${Status}
    Log to Console     Found the Alert messages
    Log to Console    ${Status}
    ${ExpectedErrorMsgLE4}=   Convert To Lowercase    ${ExpectedErrorMsgLE4}
    ${ExpectedErrorMsgLE5}=   Convert To Lowercase    ${ExpectedErrorMsgLE5}
#   ${ExpectedErrorMsgLE5.1}=   Convert To Lowercase    ${ExpectedErrorMsgLE5.1}

    Run Keyword and Continue on Failure    Should Contain       '${Status}'     ${ExpectedErrorMsgLE4}      Expected Error Message Not seen
    Run Keyword and Continue on Failure    Should Contain       '${Status}'     ${ExpectedErrorMsgLE5}      Expected Error Message Not seen
#   Run Keyword and Continue on Failure    Should Contain       '${Status}'     ${ExpectedErrorMsgLE5.1}    Expected Error Message Not seen
