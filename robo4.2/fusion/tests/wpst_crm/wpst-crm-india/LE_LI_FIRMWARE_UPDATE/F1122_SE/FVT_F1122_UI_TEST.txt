*** Settings ***
Documentation    F1122 UI Regression Test Suite
Force Tags    F1122_ALL

Variables   fvt_f1122_ui_test_data_variables.py
Resource    ${FUSION_DIRPATH}/Resources/api/fusion_api_resource.txt
Resource    fvt_f1122_ui_test_resource.txt
Resource            commonCleanUpResource.robot
#Suite Teardown     Suite Clean Up Using FusionLibrary Resource
Suite Setup         Suite Clean Up Using FusionLibrary Resource

*** Variables ***
${APPLIANCE_IP}    192.168.144.184

*** Test Cases ***
PreCondition - OneView Login
    [Documentation]    Login to fusion UI
    [Tags]  login
    Load Test Data and Open Browser
    ${user}=    Get Data By Property    ${TestData.users}    name    Administrator
    Log into Fusion appliance as Administrator

PreCondition - Create Ethernet Networks
    [Tags]  F1122_UI_TEST_PREREQUISITE_CREATE_ETH

    ${Status}=    Fusion Ui Create Ethernet Network    @{TestData.myNetworks}
    Should Be Equal    '${Status}'    'True'    ${Status}

PreCondition - Create FC Networks
    [Documentation]    Creating FC networks
    [Tags]  F1122_UI_TEST_PREREQUISITE_CREATE_FC

    ${Status}=    Fusion Ui Create Fc Network    @{TestData.fcnetworks}
    Should Be Equal    '${Status}'    'True'    ${Status}

PreCondition - Add FC License
    [Tags]  F1122_UI_TEST_PREREQUISITE_ADD_FC_LICENSE
    ${Status}=    Fusion Ui Add Fc Licenses    @{TestData.licenses}
    Should Be Equal    '${Status}'    'True'    ${Status}

PreCondition - Add Storage Volume
    [Tags]  F1122_UI_TEST_PREREQUISITE_ADD_SV
    ${status}=    Fusion UI add storage systems     @{TestData.storagesystems}
    Should Be True    ${status}    msg=Successfully added storagesystems

    ${Status}=    fusion ui add storage volumes  @{TestData.storagevolumes}
    Should Be True    ${Status}    msg=Failed to create storage volumes

PreCondition - Create Logical Interconnect Group
    [Documentation]    create LIG
    [Tags]  F1122_UI_TEST_PREREQUISITE_CREATE_LIG

    ${Status}=    Fusion Ui Create Tbird Logical Interconnect Group    @{TestData.ligs}
    Run Keyword And Continue On Failure    Should Be Equal    '${Status}'    'True'    ${Status}

PreCondition - Create Enclosure Group
    [Documentation]    Create EG
    [Tags]  F1122_UI_TEST_PREREQUISITE_CREATE_EG

    ${Status}=    Fusion Ui Create Tbird Enclosure Group    @{TestData.encgrp}
    Run Keyword And Continue On Failure    Should Be Equal    '${Status}'    'True'    ${Status}

PreCondition - Create Logical Enclosure
    [Documentation]    Create LE
    [Tags]  F1122_UI_TEST_PREREQUISITE_CREATE_LE

    ${Status}=    Run Keyword And Ignore Error    fusion_ui_create_tbird_logical_enclosure    @{TestData.les}

PreCondition - Create Server Profile
    [Documentation]    Create server profile & power it on using server profile
    [Tags]  F1122_UI_TEST_PREREQUISITE_CREATE_SP

    Fusion Ui Power Off All Server Hardware
    Fusion Ui Create Server Profile    ${TestData.CreateProfile[0]}
    Fusion Ui Power On Server Profile By Name    ${TestData.CreateProfile[0].name}

PreCondition - Upload Firmware Bundles To Appliance
    [Documentation]    Used for uploading custom bundle
    [Tags]  F1122_UI_TEST_PREREQUISITE

    Fusion Api Login Appliance      ${APPLIANCE_IP}     ${admin_credentials}

    Log to console     \nBundle1 - Uploaded started for ${TestData.firmwarebundle[0].sppfilepath}${TestData.firmwarebundle[0].spp}
    ${resp} =    Fusion Api Upload Firmware Bundle    ${TestData.firmwarebundle[0].sppfilepath}${TestData.firmwarebundle[0].spp}
    Log to console     \nBundle1 - Uploaded successful for ${TestData.firmwarebundle[0].sppfilepath}${TestData.firmwarebundle[0].spp}

    Log to console     \nBundle1 - Uploaded started for ${TestData.firmwarebundle[1].sppfilepath}${TestData.firmwarebundle[1].spp}
    ${resp} =    Fusion Api Upload Firmware Bundle    ${TestData.firmwarebundle[1].sppfilepath}${TestData.firmwarebundle[1].spp}
    Log to console     \nBundle2 - Uploaded successful for ${TestData.firmwarebundle[1].sppfilepath}${TestData.firmwarebundle[1].spp}

LI ORCHESTRATED PRERQUISITE - POWER ON ALL SERVERS
    [Tags]  F1122_UI_TEST_PREREQUISITE
    Open Browser And Login As Administrator
    Fusion Ui Power On Server Profile By Name    ${TestData.CreateProfile[0].name}

ORCHESTRATED FORCE UPGRADE - LI UPDATE FIRMWARE(STAGE+ACTIVATE)
    [Documentation]    LI Update firmware (Stage+Activate) upgrade with force flag
    [Tags]    F1122_UI_TEST_LI

    Open Browser And Login As Administrator

    ${li_list}=    Create List    ${TestData.logicalconnectNDFU[0].LIname}

    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

    ${Status}=    Fusion UI update firmware tbird logical interconnect    @{TestData.logicalconnectNDFU}[0]
    Run Keyword And Continue On Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

ORCHESTRATED SAME VERSION FORCE UPGRADE - LI UPDATE FIRMWARE STAGING TO THE BASELINE VERSION
    [Documentation]    LI Update firmware staging to the baseline with force flag
    [Tags]    F1122_UI_TEST_LI

    Open Browser And Login As Administrator

    ${li_list}=    Create List    ${TestData.logicalconnectNDFU[1].LIname}
    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

    ${Status}=    Fusion UI update firmware tbird logical interconnect    @{TestData.logicalconnectNDFU}[1]
    Run Keyword And Continue On Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

ORCHESTRATED FORCE UPGRADE - LI UPDATE FIRMWARE ACTIVATE FIRMWARE
    [Documentation]    LI Update firmware Activate firmware with force flag
    [Tags]    F1122_UI_TEST_LI

    Open Browser And Login As Administrator

    ${li_list}=    Create List    ${TestData.logicalconnectNDFU[2].LIname}
    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

    ${Status}=    Fusion UI update firmware tbird logical interconnect    @{TestData.logicalconnectNDFU}[2]
    Run Keyword And Continue On Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

ORCHESTRATED FORCE DOWNGRADE - LI UPDATE FIRMWARE(STAGE+ACTIVATE)
    [Documentation]    LI Update firmware (Stage+Activate) downgrade with force flag
    [Tags]    F1122_UI_TEST_LI

    Open Browser And Login As Administrator

    ${li_list}=    Create List    ${TestData.logicalconnectNDFU[3].LIname}
    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

    ${Status}=    Fusion UI update firmware tbird logical interconnect    @{TestData.logicalconnectNDFU}[3]
    Run Keyword And Continue On Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

LI PARALLEL PRERQUISITE - POWER OFF SERVERS
    [Documentation]    Power off servers
    [Tags]  F1122_UI_TEST_PREREQUISITE
    Fusion Api Login Appliance      ${APPLIANCE_IP}     ${admin_credentials}
    Power off ALL servers    PressAndHold
    Fusion Api Logout Appliance

PARALLEL FORCE UPGRADE - LI UPDATE FIRMWARE(STAGE+ACTIVATE)
    [Documentation]    LI Update firmware (Stage+Activate) upgrade with force flag
    [Tags]    F1122_UI_TEST_LI

    Open Browser And Login As Administrator

    ${li_list}=    Create List    ${TestData.logicalconnect[0].LIname}
    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

    ${Status}=    Fusion UI update firmware tbird logical interconnect    @{TestData.logicalconnect}[0]
    Run Keyword And Continue On Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

PARALLEL FORCE DOWNGRADE - LI UPDATE FIRMWARE(STAGE+ACTIVATE)
    [Documentation]    LI Update firmware (Stage+Activate) downgrade with force flag
    [Tags]    F1122_UI_TEST_LI

    Open Browser And Login As Administrator

    ${li_list}=    Create List    ${TestData.logicalconnect[1].LIname}
    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

    ${Status}=    Fusion UI update firmware tbird logical interconnect    @{TestData.logicalconnect}[1]
    Run Keyword And Continue On Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

PARALLEL SAME VERSION FORCE - LI UPDATE FIRMWARE STAGING TO THE BASELINE VERSION
    [Documentation]    LI Update firmware staging to the baseline with force flag
    [Tags]    F1122_UI_TEST_LI

    Open Browser And Login As Administrator

    ${li_list}=    Create List    ${TestData.logicalconnect[2].LIname}

    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

    ${Status}=    Fusion UI update firmware tbird logical interconnect    @{TestData.logicalconnect}[2]
    Run Keyword And Continue On Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

PARALLEL FORCE UPGRADE - LI UPDATE FIRMWARE ACTIVATE FIRMWARE
    [Documentation]    LI Update firmware Activate firmware with force flag
    [Tags]    F1122_UI_TEST_LI

    Open Browser And Login As Administrator

    ${li_list}=    Create List    ${TestData.logicalconnect[3].LIname}
    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

    ${Status}=    Fusion UI update firmware tbird logical interconnect    @{TestData.logicalconnect}[3]
    Run Keyword And Continue On Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${Status}=    Fusion Ui Verify Ic State Of Li    ${li_list}    ${Permissible_IC_STATES_BeforeUpdate}
    Run Keyword If    '${status}'=='True'    Log To Console    IC states as Desired    ELSE    Fail

LE PREREQUISITE ORCHESTRATED- POWER ON ALL SERVERS
    [Tags]  F1122_UI_TEST_PREREQUISITE

    Open Browser And Login As Administrator
    Fusion Ui Power On Server Profile By Name    ${TestData.CreateProfile[0].name}

ORCHESTRATED FORCE UPGRADE - LE FIRMWARE UPDATE WITH SHARED INFRASTRUCTURE
    [Documentation]    LE Update firmware upgrade with force flag and used mode is Shared infrastructure
    [Tags]    F1122_UI_TEST_LE

    Open Browser And Login As Administrator

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdate}[0]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_BeforeUpdate}   @{TestData.leFirmwareUpdate}[0]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

    ${Status}=    Fusion Ui Update Tbird Logical Enclosure Firmware   @{TestData.leFirmwareUpdate}[0]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${timeout} =    Convert To Number    300
    Run Keyword and ignore error    Fusion Ui Wait For Enclosure Refresh Complete   ${TestData.leFirmwareUpdate[0].enclosure[0].name}    ${timeout}

    ${Status}=    Fusion Ui Verify Le Frmware Upgrade Activity Details    @{TestData.leFirmwareUpdate}[0]
    Run Keyword and Continue on Failure    Should Contain    ${Status}   TEST PASSED    LE FW Update Test FAILED

    ${Status}=    Fusion Ui Verify Li And Ic Firmware Versions    @{TestData.leFirmwareUpdate}[0]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Error during Firmware Version and IC activity Messages Validation

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdate}[0]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_AfterUpdate}    @{TestData.leFirmwareUpdate}[0]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

ORCHESTRATED FORCE SAME VERSION UPGRADE - LE FIRMWARE UPDATE WITH SHARED INFRASTRUCTURE
    [Documentation]    LE Update firmware same version upgrade with force flag and used mode is Shared infrastructure
    [Tags]    F1122_UI_TEST_LE

    Open Browser And Login As Administrator

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdate}[1]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_BeforeUpdate}   @{TestData.leFirmwareUpdate}[1]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

    ${Status}=    Fusion Ui Update Tbird Logical Enclosure Firmware   @{TestData.leFirmwareUpdate}[1]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${timeout} =    Convert To Number    300
    Run Keyword and ignore error    Fusion Ui Wait For Enclosure Refresh Complete   ${TestData.leFirmwareUpdate[0].enclosure[0].name}    ${timeout}

    ${Status}=    Fusion Ui Verify Le Frmware Upgrade Activity Details    @{TestData.leFirmwareUpdate}[1]
    Run Keyword and Continue on Failure    Should Contain    ${Status}   TEST PASSED    LE FW Update Test FAILED

    ${Status}=    Fusion Ui Verify Li And Ic Firmware Versions    @{TestData.leFirmwareUpdate}[1]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Error during Firmware Version and IC activity Messages Validation

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdate}[1]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_AfterUpdate}    @{TestData.leFirmwareUpdate}[1]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

ORCHESTRATED FORCE DOWNGRADE - LE FIRMWARE UPDATE WITH SHARED INFRASTRUCTURE
    [Documentation]    LE Update firmware downgrade with force flag and used mode is Shared infrastructure
    [Tags]    F1122_UI_TEST_LE

    Open Browser And Login As Administrator

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdate}[2]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_BeforeUpdate}   @{TestData.leFirmwareUpdate}[2]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

    ${Status}=    Fusion Ui Update Tbird Logical Enclosure Firmware   @{TestData.leFirmwareUpdate}[2]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${timeout} =    Convert To Number    300
    Run Keyword and ignore error    Fusion Ui Wait For Enclosure Refresh Complete   ${TestData.leFirmwareUpdate[0].enclosure[0].name}    ${timeout}

    ${Status}=    Fusion Ui Verify Le Frmware Upgrade Activity Details    @{TestData.leFirmwareUpdate}[2]
    Run Keyword and Continue on Failure    Should Contain    ${Status}   TEST PASSED    LE FW Update Test FAILED

    ${Status}=    Fusion Ui Verify Li And Ic Firmware Versions    @{TestData.leFirmwareUpdate}[2]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Error during Firmware Version and IC activity Messages Validation

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdate}[2]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_AfterUpdate}    @{TestData.leFirmwareUpdate}[2]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

LE PREREQUISITE - POWER OFF SERVERS
    [Documentation]    Power off servers
    [Tags]  F1122_UI_TEST_PREREQUISITE
    Fusion Api Login Appliance      ${APPLIANCE_IP}     ${admin_credentials}
    Power off ALL servers    PressAndHold
    Fusion Api Logout Appliance

PARALLEL WITHOUT FORCE UPGRADE - LE FIRMWARE UPDATE SHARED INFRASTRUCTURE
    [Documentation]    LE Update firmware upgrade without force flag and used mode is Shared infrastructure
    [Tags]    F1122_UI_TEST_LE

    Open Browser And Login As Administrator

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdateParallel}[0]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_BeforeUpdate}   @{TestData.leFirmwareUpdateParallel}[0]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

    ${Status}=    Fusion Ui Update Tbird Logical Enclosure Firmware   @{TestData.leFirmwareUpdateParallel}[0]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${timeout} =    Convert To Number    300
    Run Keyword and ignore error    Fusion Ui Wait For Enclosure Refresh Complete   ${TestData.leFirmwareUpdate[0].enclosure[0].name}    ${timeout}

    ${Status}=    Fusion Ui Verify Le Frmware Upgrade Activity Details    @{TestData.leFirmwareUpdateParallel}[0]
    Run Keyword and Continue on Failure    Should Contain    ${Status}   TEST PASSED    LE FW Update Test FAILED

    ${Status}=    Fusion Ui Verify Li And Ic Firmware Versions    @{TestData.leFirmwareUpdateParallel}[0]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Error during Firmware Version and IC activity Messages Validation

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdateParallel}[0]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_AfterUpdate}    @{TestData.leFirmwareUpdateParallel}[0]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

PARALLEL FORCE DOWNGRADE - LE FIRMWARE UPDATE WITH FORCE SHARED INFRASTRUCTURE
    [Documentation]    LE Update firmware downgrade with force flag and used mode is Shared infrastructure
    [Tags]    F1122_UI_TEST_LE

    Open Browser And Login As Administrator

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdateParallel}[1]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_BeforeUpdate}   @{TestData.leFirmwareUpdateParallel}[1]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

    ${Status}=    Fusion Ui Update Tbird Logical Enclosure Firmware   @{TestData.leFirmwareUpdateParallel}[1]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${timeout} =    Convert To Number    300
    Run Keyword and ignore error    Fusion Ui Wait For Enclosure Refresh Complete   ${TestData.leFirmwareUpdate[0].enclosure[0].name}    ${timeout}

    ${Status}=    Fusion Ui Verify Le Frmware Upgrade Activity Details    @{TestData.leFirmwareUpdateParallel}[1]
    Run Keyword and Continue on Failure    Should Contain    ${Status}    TEST PASSED    LE FW Update Test FAILED

    ${Status}=    Fusion Ui Verify Li And Ic Firmware Versions    @{TestData.leFirmwareUpdateParallel}[1]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Error during Firmware Version and IC activity Messages Validation

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdateParallel}[1]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_AfterUpdate}    @{TestData.leFirmwareUpdateParallel}[1]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

PARALLEL FORCE SAME VERSION - LE FIRMWARE UPDATE WITH FORCE SHARED INFRASTRUCTURE
    [Documentation]    LE Update firmware same version with force flag and used mode is Shared infrastructure
    [Tags]    F1122_UI_TEST_LE

    Open Browser And Login As Administrator

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdateParallel}[2]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_BeforeUpdate}   @{TestData.leFirmwareUpdateParallel}[2]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

    ${Status}=    Fusion Ui Update Tbird Logical Enclosure Firmware   @{TestData.leFirmwareUpdateParallel}[2]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    ${Status}

    ${timeout} =    Convert To Number    300
    Run Keyword and ignore error    Fusion Ui Wait For Enclosure Refresh Complete   ${TestData.leFirmwareUpdate[0].enclosure[0].name}    ${timeout}

    ${Status}=    Fusion Ui Verify Le Frmware Upgrade Activity Details    @{TestData.leFirmwareUpdateParallel}[2]
    Run Keyword and Continue on Failure    Should Contain    ${Status}   TEST PASSED    LE FW Update Test FAILED

    ${Status}=    Fusion Ui Verify Li And Ic Firmware Versions    @{TestData.leFirmwareUpdateParallel}[2]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Error during Firmware Version and IC activity Messages Validation

    ${Status}=    Fusion Ui Verify Ic Stacking Domain Role Of Le    @{TestData.leFirmwareUpdateParallel}[2]
    Run Keyword and Continue on Failure    Should Be Equal    '${Status}'    'True'    Something Wrong with IC stacking Roles.FW update might Not be successfull!!

    ${Status}=    Fusion Ui Verify Ic State Of Le    ${Permissible_IC_STATES_AfterUpdate}    @{TestData.leFirmwareUpdateParallel}[2]
    Run Keyword If    '${Status}'=='True'    Log To Console    IC Sates as desired    ELSE    Fail

LOGOUT USER AND CLOSE BROWSERS
    [Tags]    F1122_UI_TEST_PREREQUISITE_LOGOUT
    Logout and Close All Browsers