*** Settings ***
Documentation      109 Cannot create edit or delete networks and networksets as SA
Resource           TestConfig.txt
Suite Setup        Load Test Data and Open Browser
Suite Teardown     Logout And Close All Browsers

*** Test Cases ***

1.Login to Appliance as Administrator
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    ${status} =    Fusion UI Login to Appliance    ${user[0].name}
    Run Keyword If  '${status}' == 'True'   Log to Console  Successfully logged in to Appliance as Administrator    ELSE    fail

# Initial Cleanup
    ${status} =    Fusion UI Delete All Appliance Users
    Run Keyword If  '${status}' == 'True'   Log to Console  Successfully deleted all Users  ELSE    fail
    ${status} =    Fusion UI Delete All Appliance Networks
    Run Keyword If  '${status}' == 'True'   Log to Console  Successfully deleted all Networks   ELSE    fail

2.Create user with Server privileges and Create Networks
    ${status} =    Fusion UI Create User  @{TestData.users}
    Run Keyword If  '${status}' == 'True'   Log to Console  Successfully created Server User    ELSE    fail

    ${status} =    Fusion UI Create Ethernet Network    @{TestData.networks}
    Run Keyword If  '${status}' == 'True'   Log to Console  Successfully created Ethernet Network   ELSE    fail

3.Logout of Administrator and log in as Server user
    Fusion UI Logout of Appliance

    ${user} =  Get data by property  ${TestData.users}  name  Server
    ${status} =    Fusion UI Login to Appliance    ${user[0].name}
    Run Keyword If  '${status}' == 'True'   Log to Console  Successfully logged in to Appliance as Server User  ELSE    fail

4.Navigate to Networks Page and verify Add Network link is not displayed
    ${status} = Fusion UI Validate Create Network Button Exists
    Run Keyword If  '${status}' == 'False'  Log to Console  Server user has no privilege to create the network  ELSE    fail

5.Select a network from the left pane verify that there are no options to edit or delete the network
    ${status} =     Fusion UI Validate Privileges Edit Network  @{TestData.Negative_Privilege}
    Run Keyword If  '${status}' == 'True'   Log to Console  Server user has no privilege to edit or delete the network  ELSE    fail

6.Navigate to Networksets and verify Create Networksets Link is displayed
    ${status} =     Fusion UI Create Network Set    @{TestData.networksets}
    Run Keyword If  '${status}' == 'True'   Log to Console  Server user has privilege to create a networkset    ELSE    fail

7.Select a networkset and verify that there are options to edit or delete the networkset
    ${status} =     Fusion UI Edit Network Set      @{TestData.editnetworksets}
    Run Keyword If  '${status}' == 'True'   Log to Console  Server user has privilege to edit a networkset  ELSE    fail

    ${status} =     Fusion UI Delete Network Set    @{TestData.deletenetworksets}
    Run Keyword If  '${status}' == 'True'   Log to Console  Server user has privilege to  delete a networkset   ELSE    fail

8.Log out from appliance as server user
    Fusion UI Logout of Appliance

# Final Cleanup
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    ${status} =    Fusion UI Login to Appliance    ${user[0].name}
    Run Keyword If  '${status}' == 'True'   Log to Console  'Successfully logged in to Appliance as Administrator'  ELSE    fail

    #Delete All Users
    ${status} =    Fusion UI Delete All Appliance Users
    Run Keyword If  '${status}' == 'True'   Log to Console  'Successfully deleted all Users'    ELSE    fail

    #Delete All Network
    ${status}=  Fusion UI Delete All Appliance Networks
    Run Keyword If  '${status}' == 'True'   Log to Console  'All Networks Removed Successfully' ELSE    fail