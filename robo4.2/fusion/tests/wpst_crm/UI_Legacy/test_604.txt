*** Settings ***
Documentation      604 Checking privilege of action dropdown for different users - server, network, readonly
Resource           TestConfig.txt
Library            BuiltIn
Suite Setup        Load Test Data and Open Browser
Suite Teardown     Logout And Close All Browsers

*** Test Cases ***

#1a.Login to Appliance as Administrator
    #${user} =  Get Data By Property  ${TestData.users}  name  Administrator
    #${status} =    Fusion UI Login to Appliance    ${user[0].name}
    #Run Keyword If '${status}' == 'True'   Log to Console  Successfully logged in to Appliance as Administrator    ELSE    fail

# Initial Cleanup
    #${status} =    Fusion UI Delete All Appliance Users
    #Run Keyword If '${status}' == 'True'   Log to Console  Successfully deleted all Users  ELSE    fail

#1b.Create users as server/network/readonly
    #${status} =    Fusion UI Create User  @{TestData.users}
    #Run Keyword If '${status}' == 'True'   Log to Console  Successfully created Server User    ELSE    fail

    #Fusion UI Logout of Appliance

2.Log into CIC UI as server, network, readonly and navigate to settings page, check sever have privilege to Create support dump and Add license
    ${count}=   Get Length  ${TestData.users}

    :FOR    ${index}    IN RANGE    1     ${count}
     \      Fusion UI Logout of Appliance
     \      ${user} =  Get Data By Property  ${TestData.users}  name  ${TestData.users[${index}].name}
     \      ${status} =    Fusion UI Login to Appliance    ${user[0].name}
     \      Run Keyword If  '${status}' == 'True'   Log to Console  Successfully logged in to Appliance as ${user[0].name}  ELSE    fail

     \      ${status} =     Fusion UI Validate Create Support Dump Link Exists
     \      Run Keyword If  '${status}' == 'True'   Log to Console  Support Dump creating privilege is present  ELSE    fail

     \      Continue For Loop If    "${index}" == "2" or "${index}" == "3"

     \      ${status} =     Fusion UI Validate Add License Button Exists
     \      Run Keyword If    "${status}" == "True"    Log to Console    Add license privilege is present    ELSE    fail

     \      Fusion UI Logout of Appliance

# Final Cleanup
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    ${status} =    Fusion UI Login to Appliance    ${user[0].name}
    Run Keyword If  '${status}' == 'True'   Log to Console  Successfully logged in to Appliance as Administrator    ELSE    fail

    #Delete All Users
    ${status} =    Fusion UI Delete All Appliance Users
    Run Keyword If  '${status}' == 'True'   Log to Console  Successfully deleted all Users  ELSE    fail