*** Settings ***
Documentation       113 Neg Add, Edit and Delete Server as NA
Resource            TestConfig.txt
Suite Setup         Load Test Data and Open Browser
Suite Teardown      Logout And Close All Browsers

*** Test Cases ***
1a.Login to Appliance as Administrator
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    ${status} =    Fusion UI Login to Appliance    ${user[0].name}
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully logged in to Appliance as Administrator'    ELSE    fail

# Initial Cleanup
    ${status} =    Fusion UI Delete All Appliance Networks
    Run Keyword If    '${status}' == 'True'    Log to Console    'Networks Removed Successfully'    ELSE    fail

    ${status} =    Fusion UI Remove All Enclosures
    Run Keyword If    '${status}' == 'True'    Log to Console    'Enclosure Removed Successfully'    ELSE    fail

    ${status} =    Fusion UI Remove All Enclosure Groups
    Run Keyword If    '${status}' == 'True'    Log to Console    'Enclosure Group Removed Successfully'    ELSE    fail

    ${status} =    Fusion UI Remove All Logical Interconnect Groups
    Run Keyword If    '${status}' == 'True'    Log to Console    'Logical Interconnect Group Removed Successfully'    ELSE    fail

    ${status} =    Fusion UI Delete All Appliance Users
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully deleted all Users'    ELSE    fail

1b.Import Enclosure
    ${status} =    Fusion UI Create Ethernet Network    ${TestData.networks1[0]}
    Run Keyword If    '${status}' == 'True'    Log to Console    'Network created sucessfully'    ELSE    fail

    ${status} =    Fusion UI Create Logical Interconnect Group     @{TestData.ligs}
    Run Keyword If    '${status}' == 'True'    Log to Console    'LIG created sucessfully'    ELSE    fail

    ${status} =    Fusion UI Create Enclosure Group    @{TestData.encgroups}
    Run Keyword If    '${status}' == 'True'    Log to Console    'EG created sucessfully'    ELSE    fail

    ${status} =    Fusion UI Add Enclosure    @{TestData.enclosures}
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully Imported Enclosure'    ELSE    fail

1c.Create nat user
    ${status} =    Fusion UI Create User    @{TestData.users}
    Run Keyword If    '${status}' == 'True'    Log to Console    'User created sucessfully'    ELSE    fail

    Fusion UI Logout Of Appliance

2.Log into CIC UI.as nat/networkadmin
    ${user} =    Get Data By Property    ${TestData.users}    name    nat
    ${status} =    Fusion UI Login to Appliance    ${user[0].name}
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully logged in to Appliance as nat'    ELSE    fail

3.From top left menu, click Server Hardware
    Fusion UI Navigate To Server Hardware Page
    Log to Console    'Successfully navigated to Server Hardware Page'

4.Verify that there is no option to add a server from this page
    ${status} =    Fusion UI Validate Add Server Hardware Button Exists
    Run Keyword If    '${status}' == 'False'    Log to Console    '"Add server hardware" button not visible when logged in as "nat" user'    ELSE    fail

5.Click on one of the server from the left nav menu and verify Actions menu is not available
    ${status} =    Fusion UI Validate Privileges Edit Serverhardware    @{TestData.editserverhardware}
    Run Keyword If    '${status}' == 'True'    Log to Console    'As Expected "Action" menu has No Authorization when logged in as "nat" user'    ELSE    fail

6.Click logout from the top right corner
    Fusion UI Logout Of Appliance

# Final Cleanup
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    ${status} =    Fusion UI Login to Appliance    ${user[0].name}
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully logged in to Appliance as Administrator'    ELSE    fail

    #Delete All Users
    ${status} =    Fusion UI Delete All Appliance Users
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully deleted all Users'    ELSE    fail

    #Delete All Network
    ${status} =    Fusion UI Delete All Appliance Networks
    Run Keyword If    '${status}' == 'True'    Log to Console    'Networks Removed Successfully'    ELSE    fail

    #Delete All Enclosure
    ${status} =    Fusion UI Remove All Enclosures
    Run Keyword If    '${status}' == 'True'    Log to Console    'Enclosure Removed Successfully'    ELSE    fail

    #Delete All EG
    ${status} =    Fusion UI Remove All Enclosure Groups
    Run Keyword If    '${status}' == 'True'    Log to Console    'Enclosure Group Removed Successfully'    ELSE    fail

    #Delete All LIG
    ${status} =    Fusion UI Remove All Logical Interconnect Groups
    Run Keyword If    '${status}' == 'True'    Log to Console    'Logical Interconnect Group Removed Successfully'    ELSE    fail