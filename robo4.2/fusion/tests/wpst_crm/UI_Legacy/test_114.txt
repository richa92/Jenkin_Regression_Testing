*** Settings ***
Documentation       Edit Delete Enclosure as SA
Resource            TestConfig.txt
Suite Setup         Load Test Data and Open Browser
Suite Teardown      Logout And Close All Browsers

*** Test Cases ***
1a.Login to Appliance as Administrator
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    ${status} =    Fusion UI Login to Appliance    ${user[0].name}
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully logged in to Appliance as Administrator'    ELSE    fail

# Initial Cleanup
    ${status} =    Fusion UI Delete All Appliance Networks
    Run Keyword If    '${status}' == 'True'    Log to Console    'Networks Removed Successfully'    ELSE    fail

    ${status} =    Fusion UI Remove All Enclosures
    Run Keyword If    '${status}' == 'True'    Log to Console    'Enclosure Removed Successfully'    ELSE    fail

    ${status} =    Fusion UI Remove All Enclosure Groups
    Run Keyword If    '${status}' == 'True'    Log to Console    'Enclosure Group Removed Successfully'    ELSE    fail

    ${status} =    Fusion UI Remove All Logical Interconnect Groups
    Run Keyword If    '${status}' == 'True'    Log to Console    'Logical Interconnect Group Removed Successfully'    ELSE    fail

    ${status} =    Fusion UI Delete All Appliance Users
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully deleted all Users'    ELSE    fail

1b.Import Enclosure
    ${status} =    Fusion UI Create Ethernet Network    ${TestData.networks1[0]}
    Run Keyword If    '${status}' == 'True'    Log to Console    'Network created sucessfully'    ELSE    fail

    ${status} =    Fusion UI Create Logical Interconnect Group     @{TestData.ligs}
    Run Keyword If    '${status}' == 'True'    Log to Console    'LIG created sucessfully'    ELSE    fail

    ${status} =    Fusion UI Create Enclosure Group    @{TestData.encgroups}
    Run Keyword If    '${status}' == 'True'    Log to Console    'EG created sucessfully'    ELSE    fail

    ${status} =    Fusion UI Add Enclosure    @{TestData.enclosures}
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully Imported Enclosure'    ELSE    fail

1c.Create Server user
    ${status} =    Fusion UI Create User    @{TestData.users}
    Run Keyword If    '${status}' == 'True'    Log to Console    'User created sucessfully'    ELSE    fail
    Fusion UI Logout Of Appliance

2.Log into CIC UI as Server/Serveradmin
    ${user} =    Get Data By Property    ${TestData.users}    name    Server
    ${status} =    Fusion UI Login to Appliance    ${user[0].name}
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully logged in to Appliance as Server'    ELSE    fail

3.Verifiy Server Administrator is able to Remove enclosure
    ${status} =    Fusion UI Delete Enclosure    @{TestData.enclosures}
    Run Keyword If    '${status}' == 'True'    Log to Console    'Server administrator is able to remove enclosure'    ELSE    fail

4.Click logout from the top right corner
    Fusion UI Logout Of Appliance

# Final Cleanup
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    ${status} =    Fusion UI Login to Appliance    ${user[0].name}
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully logged in to Appliance as Administrator'    ELSE    fail

    #Delete All Users
    ${status} =    Fusion UI Delete All Appliance Users
    Run Keyword If    '${status}' == 'True'    Log to Console    'Successfully deleted all Users'    ELSE    fail

    #Delete All Network
    ${status} =    Fusion UI Delete All Appliance Networks
    Run Keyword If    '${status}' == 'True'    Log to Console    'Networks Removed Successfully'    ELSE    fail

    #Delete All Enclosure
    ${status} =    Fusion UI Remove All Enclosures
    Run Keyword If    '${status}' == 'True'    Log to Console    'Enclosure Removed Successfully'    ELSE    fail

    #Delete All EG
    ${status} =    Fusion UI Remove All Enclosure Groups
    Run Keyword If    '${status}' == 'True'    Log to Console    'Enclosure Group Removed Successfully'    ELSE    fail

    #Delete All LIG
    ${status} =    Fusion UI Remove All Logical Interconnect Groups
    Run Keyword If    '${status}' == 'True'    Log to Console    'Logical Interconnect Group Removed Successfully'    ELSE    fail