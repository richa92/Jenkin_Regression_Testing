*** Settings ***
Documentation       Feature Test: QoS_C7K6&7
Resource            OVAConfig.txt
#Force Tags         Buildup
Suite Setup         Load Test Data and Open Browser
Suite Teardown     Logout And Close All Browsers
Library            Dialogs
Library    String

*** Test Cases ***
00 Log into fusion as Administrator
    [Documentation]    Log in to Appliance
    Log To Console    *********Log into Appliance as Administrator****************
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    fusion_ui_login_to_appliance    ${user[0].name}
    Log to Console    Successfully logged in as Administrator
    Fusion UI Remove All Enclosures
    Fusion UI Remove All Enclosure Groups
    Fusion UI Remove All Logical Interconnect Groups
    #####Pre-Condition######
    fusion_ui_create_logical_interconnect_group     @{TestData.ligC71}
    ${Status}=    fusion_ui_validate_logical_interconnect_group     @{TestData.ligC71}
    Run Keyword If  '${Status}' != 'True'  Fail    ELSE  log to console  \n-LIG validated successfully
    Fusion UI Create Enclosure Group    @{TestData.encgroups}
    Fusion UI Add Enclosure     @{TestData.enclosures_C7K}

01 Verify share and maxshare in Logical Interconnect Group
    @{resp}=    fusion_ui_validate_qos_configuration            @{TestData.ligs6}
    Log to Console  \n@{resp}
    Run Keyword If  '${resp[0]}' != '${TestData.values[0].share}'   Fail    ELSE  log to console  \n-Share is present in LIG page
    Run Keyword If  '${resp[1]}' != '${TestData.values[1].maxshare}'    Fail    ELSE  log to console  \n-MaxShare is present in LIG page
    Should Be Equal As Strings    ${resp[0]}  ${TestData.values[0].share}
    Should Be Equal As Strings    ${resp[1]}  ${TestData.values[1].maxshare}

03 Verify LI page
    @{resp}=    fusion_ui_validate_qos_configuration_in_li    @{TestData.ligs7}
    Run Keyword If  '${resp[0]}' != '${TestData.values[0].share}'   Fail    ELSE  log to console  \n-Share is present in LI page
    Run Keyword If  '${resp[1]}' != '${TestData.values[1].maxshare}'    Fail    ELSE  log to console  \n-MaxShare is present in LI page

04 Cleanup
    Fusion UI Remove All Enclosures
    Fusion UI Remove All Enclosure Groups
    Fusion UI Remove All Logical Interconnect Groups
