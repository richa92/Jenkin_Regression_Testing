*** Settings ***
Documentation    Feature Test: QoS_28_C7k
Resource   OVAConfig.txt
#Force Tags     Buildup
Suite Setup    Load Test Data and Open Browser
Suite Teardown    Logout And Close All Browsers
Library            Dialogs
Library    String
Library    Collections
Library    RoboGalaxyLibrary

*** Test Cases ***

01. Log into fusion as Administrator
    [Documentation]    Log in to Appliance
    Log To Console    *********Log into Appliance as Administrator****************
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    fusion_ui_login_to_appliance    ${user[0].name}
    Log to Console    Successfully logged in as Administrator
    Fusion UI Remove All Enclosures
    Fusion UI Remove All Enclosure Groups
    Fusion UI Remove All Logical Interconnect Groups
    Log to ConsoleALL STEPS COMPLETED SUCCESSFULLY

02. CREATING LIG
    ${Status1}=    fusion_ui_create_logical_interconnect_group     @{TestData.ligC71}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  LIG CREATED SUCCESSFULLY    ELSE    fail

03. CREATING ENCLOSURE GROUP
    ${Status1}=    fusion_ui_create_enclosure_group     @{Testdata.encgroups}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  EG PAGE SUCCESSFULLY    ELSE    fail

04. IMPORT ENCLOSURE
    ${Status1}=    fusion_ui_add_enclosure     @{TestData.enclosures_C7K}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  ENCLOSURE ADDED SUCCESSFULLY    ELSE    fail

05. Create Users and validate users
    [Documentation]    QoS_28 Testcase
    ${Status}=  Fusion UI Create User       @{TestData.users}
    Run Keyword If  '${Status}' != 'True'  Fail    ELSE  log to console  \n-uSERS validated successfully
    fusion_ui_logout_of_appliance
    Sleep   ${loadtime}

06.verify able to change QoS settings from UI in LIG
    ${l} =  Get Length   ${TestData.users}
    Log to Console  ${l}
    :FOR    ${x}    IN RANGE    0   ${l}
    \   Log to console  ${x}
    \   ${user} =    Get Data By Property    ${TestData.users}    name    ${TestData.users[${x}].name}
    \   fusion_ui_login_to_appliance    ${TestData.users[${x}].name}
    \   Run Keyword If  '${TestData.users[${x}].name}' == 'Administrator' or '${TestData.users[${x}].name}' == 'NetworkAdmin'   fusion_ui_validate_qos_configuration        @{TestData.lig28}
    \   ...             ELSE    Fusion UI Validate User Privileges Logicalinterconnectgroups       @{TestData.lig28}
    \   fusion_ui_logout_of_appliance
    \   Sleep   ${loadtime}

07. verify able to change QoS settings from UI in LI
    [Documentation]    QoS_28 Testcase
    ${l} =  Get Length   ${TestData.users}
    Log to Console  ${l}
    :FOR    ${x}    IN RANGE    0   ${l}
    \   Log to console  ${x}
    \   ${user} =    Get Data By Property    ${TestData.users}    name    ${TestData.users[${x}].name}
    \   fusion_ui_login_to_appliance    ${TestData.users[${x}].name}
    \   Run Keyword If  '${TestData.users[${x}].name}' == 'Administrator' or '${TestData.users[${x}].name}' == 'NetworkAdmin'   fusion_ui_validate_qos_configuration_in_li      @{TestData.li28}
    \   ...             ELSE    Fusion UI Validate User Privileges Logicalinterconnects     @{TestData.li28}
    \   fusion_ui_logout_of_appliance
    \   Sleep   ${loadtime}

08.Cleanup
    Fusion UI Remove All Enclosures
    Fusion UI Remove All Enclosure Groups
    Fusion UI Remove All Logical Interconnect Groups