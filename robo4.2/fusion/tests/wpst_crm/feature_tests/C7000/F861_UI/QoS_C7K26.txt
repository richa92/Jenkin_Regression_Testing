*** Settings ***
Documentation       Feature Test: QOS_26_c7k
Resource            OVAConfig.txt
#Force Tags         Buildup
Suite Setup         Load Test Data and Open Browser
Suite Teardown     Logout And Close All Browsers
Library            Dialogs
Library            String
Library            BuiltIn
Library            Collections

*** Test Cases ***
00.LOG INTO FUSION AS ADMINISTRATOR
    [Documentation]    Log in to Appliance
    Log To Console    *********Log into Appliance as Administrator****************
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    fusion_ui_login_to_appliance    ${user[0].name}
    Log to Console    Successfully logged in as Administrator
    Fusion UI Remove All Enclosures
    Fusion UI Remove All Enclosure Groups
    Fusion UI Remove All Logical Interconnect Groups

01.CREATING LIG
    ${Status1}=    fusion_ui_create_logical_interconnect_group      @{TestData.ligC71}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  LIG CREATED SUCCESSFULLY    ELSE    fail

02.EDITING LIG
    ${Status1}=    fusion_ui_validate_qos_configuration     @{TestData.ligs26}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  LIG CONFIGURED SUCCESSFULLY ELSE    fail

03.BEFORE BACKUP AND RESTORE VERIFING LIG PAGE
    ${resp1}=    fusion_ui_get_qos_class_values         @{TestData.ligs26}
    Log to Console  ${resp}

04.BACKUP AND RESTORE
    #backup
    Log to console  \n backingup
    Fusion UI Create Backup
    sleep   5m
    ${Status1}=    fusion_ui_edit_logical_interconnect_group    @{TestData.lig26}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  LIG CONFIGURED SUCCESSFULLY ELSE    fail
    #Restoring
    Log to console  \nexecuting backup
    Fusion UI Restore From Backup
    sleep   45m
    Log To Console    Log in to Appliance
    Log To Console    *********Log into Appliance as Administrator****************
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    fusion_ui_login_to_appliance    ${user[0].name}
    Log to Console    Successfully logged in as Administrator

05.AFTER BACKUP AND RESTORE VERIFING LIG PAGE
    ${resp1}=    fusion_ui_get_qos_class_values         @{TestData.ligs26}
    Log to Console  ${resp1}
    ${ret_status}=    Run Keyword And Return Status    Lists Should Be Equal    ${resp}    ${resp1}
    Log to console and logfile    ${ret_status}

06.CLEANUP
    Fusion UI Remove All Enclosures
    Fusion UI Remove All Enclosure Groups
    Fusion UI Remove All Logical Interconnect Groups