*** Settings ***
Documentation       Feature Test: 2_QOS
Resource            OVAConfig.txt
#Force Tags         Buildup
Suite Setup         Load Test Data and Open Browser
Suite Teardown     Logout And Close All Browsers
Library            Dialogs
Library    String

*** Test Cases ***

1 Log into fusion as Administrator
    [Documentation]    Log in to Appliance
    Log To Console    *********Log into Appliance as Administrator****************
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    fusion_ui_login_to_appliance    ${user[0].name}
    Log to Console    Successfully logged in as Administrator

2 Initial Cleanup
    Fusion UI Remove All Enclosures
    fusion_ui_remove_all_enclosure_groups
    fusion_ui_remove_all_logical_interconnect_groups

3 Create Logical Interconnect Group
    ${Status1}=    Fusion UI Create Logical Interconnect Group     @{TestData.ligs}
    Run Keyword If  '${Status1}' == 'True'   Log to Console  LIG CREATED SUCCESSFULLY    ELSE    Fail

4 Create EG
    ${Status1}=    Fusion UI Create Enclosure Group    @{TestData.encgroups}
    Run Keyword If  '${Status1}' == 'True'   Log to Console  EG CREATED SUCCESSFULLY    ELSE    Fail

5 Add enclosure
    ${Status1}=    Fusion UI Add Enclosure     @{TestData.enclosures_C7K}
    Run Keyword If  '${Status1}' == 'True'   Log to Console  Enclosure Added Successfully    ELSE    Fail

6 Editing LI
    ${Status1}=     fusion_ui_validate_qos_configuration_in_li  @{TestData.li1_C7K}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  Verified QOS in LI and Edited LI successfully   ELSE    Fail
    Sleep 5 min

7 Update from Group
    ${Status}=    fusion_uiupdate_logical_interconnect_from_group     @{TestData.li1_C7K}
    Run Keyword If  '${Status}' == 'True'   Log to Console  Update from Group in LI is successful   ELSE    Fail
    Fusion UI Navigate To Networks Page

8 Verifying QOS in LI matches with LIG after Update
    ${Status}=    fusion_ui_verify_logical_interconnects    @{TestData.li1_C7K_verify}
    Run Keyword If  '${Status}' == 'True'   Log to Console  Verified QOS in LI after update from Group  ELSE    Fail

9 Final Cleanup
    Fusion UI Remove All Enclosures
    fusion_ui_remove_all_enclosure_groups
    fusion_ui_remove_all_logical_interconnect_groups


