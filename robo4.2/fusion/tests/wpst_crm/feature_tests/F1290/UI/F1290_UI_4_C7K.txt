*** Settings ***
Documentation      Continuous Integration Tests for RoboGalaxy dev Branch
Resource           F1290-OVAConfig.txt
Force Tags         Buildup
Suite Setup         Load Test Data and Open Browser
Suite Teardown      Logout And Close All Browsers

*** Variables ***
${lig_xpath}     switchtemplate-scope
${enclosure_xpath}      enclosure-scopes
${server_xpath}      servers-scopes
${network_xpath}      network-scope
${LI_xpath}      logicalswitch-scope
${interconnects_xpath}      interconnects-scope
${networkset_xpath}      networkset-scope

*** Test Cases ***
Scopes Qualification

    Set Log Level    TRACE
    Log Variables

#PreRequisites: Import enc and create Network resources
    ${user} =  Get Data By Property  ${TestData.users}  name  Administrator
    Fusion UI Login to Appliance   ${user[0].name}
    Fusion UI Delete All Scopes
    Fusion UI Delete All Appliance Networks
    Fusion UI Remove All Enclosures
    Fusion UI Remove All Enclosure Groups
    Fusion UI Remove All Logical Interconnect Groups
    Fusion UI Delete All Network Sets
    Fusion UI Create Ethernet Network   @{TestData.Ethernet_Networks}
    Fusion UI Create FC Network   @{TestData.FC_Networks}
    Fusion UI Create FCOE Network   @{TestData.FcoE_Networks}
    Fusion UI Create Network Set    @{TestData.NetworkSet}
    Fusion UI Create Logical Interconnect Group     @{TestData.ligs}
    Fusion UI Create Enclosure Group    @{TestData.encgroups}
    Fusion UI Add Enclosure     @{TestData.enclosures}
    Log to Console  PreRequisites Completed


Step : 1 Log into fusion as Administrator and create scopes
    Fusion UI Create Scope      @{TestData.scopes}
    Log to Console  Test Step - 1 Completed

Step : 2 Edit and Assign resources to scopes
    Fusion UI Edit Scope    @{TestData.scopes}

Step : 3 Assign scope to resources
    Fusion UI Edit Scope For Logical Interconnect Groups    @{TestData.lig_scope}
    Fusion UI Edit Scope For Enclosure    @{TestData.enclosure_scope}
    Fusion UI Edit Scope For Server Hardware       @{TestData.server_scope}
    Fusion UI Edit Scope For Logical Interconnect       @{TestData.LI_scope}
    Fusion UI Edit Scope For Interconnects       @{TestData.Interconnect_scope}
    Fusion UI Edit Scope For Network sets       @{TestData.networkset_scope}
    Fusion UI Edit Scope For Networks       @{TestData.network_scope}
    Log to Console  Test Step - 2 Assignment Completed

Validating the resources assigned to Scopes
    ${status}   Fusion UI Validate Resource Assigned To Scope   @{TestData.Validate_Scope_resource}
    Run Keyword If  '${status}' == 'True'   Log to console  \nValidation completed successfully     ELSE    Fail
    Log to Console  Test Step - 3 Validation Completed

    ${user} =  Get Data By Property  ${TestData.users}  name  Administrator
    Fusion UI Login to Appliance   ${user[0].name}

step : 4 Remove resources from Scope
    Log to Console  Test Step - 4 Remove resources from scope
    Fusion UI Edit Scope    @{TestData.edit_scopes}

Step : 5 Remove resource in Resource Page
    Log to Console  Test Step - 4 Remove resources from Resource page
    Fusion UI Edit Scope For Logical Interconnect Groups    @{TestData.lig_scope}
    Fusion UI Edit Scope For Interconnects      @{TestData.ic_scope}

Step : 6 Filter scopes
    #Logical Interconnects Groups
    Log to Console  Filtering in Logical Interconnects Groups page
    Fusion UI Navigate To Logical Interconnect Groups Page
    ${Return}   Fusion UI Filter by All Scope   ${lig_xpath}    @{TestData.lig_filter_by_All}
    Log to console  \n status for filter All in lig :${Return}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Scope      ${lig_xpath}    @{TestData.scopes}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Any Scope   ${lig_xpath}    @{TestData.lig_filter_by_Any}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail

Networks
    Log to Console  Filtering in Networks page
    Fusion UI Navigate To Networks Page
    ${Return}   Fusion UI Filter by All Scope   ${network_xpath}   @{TestData.Network_filter_by_All1}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Scope   ${network_xpath}   @{TestData.scopes}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Any Scope   ${network_xpath}   @{TestData.Network_filter_by_Any1}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail

NetworkSets
    Log to Console  Filtering in Networksets page
    Fusion UI Navigate To Network Sets Page
    ${Return}   Fusion UI Filter by All Scope   ${networkset_xpath}   @{TestData.Networkset_filter_by_All}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Scope   ${networkset_xpath}   @{TestData.scopes}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Any Scope   ${networkset_xpath}   @{TestData.Networkset_filter_by_Any}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail

Logical Interconnects
    Log to Console  Filtering in Logical Interconnects page
    Fusion UI Navigate To Logical Interconnects Page
    ${Return}   Fusion UI Filter by All Scope   ${LI_xpath}   @{TestData.li_filter_by_All}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Scope   ${LI_xpath}   @{TestData.scopes}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Any Scope   ${LI_xpath}   @{TestData.li_filter_by_Any}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail

Interconnects
    Log to Console  Filtering in Interconnects page
    Fusion UI Navigate To Interconnects Page
    ${Return}   Fusion UI Filter by All Scope   ${interconnects_xpath}   @{TestData.Ic_filter_by_All}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Scope   ${interconnects_xpath}   @{TestData.scopes}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Any Scope   ${interconnects_xpath}   @{TestData.Ic_filter_by_Any}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail

Enclosures
    Log to Console  Filtering in Enclosure page
    Fusion Ui Navigate To Enclosures Page
    ${Return}   Fusion UI Filter by All Scope   ${enclosure_xpath}   @{TestData.Enc_filter_by_All}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Scope   ${enclosure_xpath}   @{TestData.scopes}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Any Scope   ${enclosure_xpath}   @{TestData.Enc_filter_by_Any}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail

Server Hardware
    Log to Console  Filtering in ServerHardware page
    Fusion UI Navigate To Server Hardware Page
    ${Return}   Fusion UI Filter by All Scope   ${server_xpath}   @{TestData.ServerHw_filter_by_All}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    ${Return}   Fusion UI Filter by Scope   ${server_xpath}   @{TestData.scopes}
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ...         ELSE    Fail
    Run keyword If  '${Return}' == 'True'     Log to console  \nVerified the resources in filter
    ${Return}   Fusion UI Filter by Any Scope   ${server_xpath}   @{TestData.ServerHw_filter_by_Any}
