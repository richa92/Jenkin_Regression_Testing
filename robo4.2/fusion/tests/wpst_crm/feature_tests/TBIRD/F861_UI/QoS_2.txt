*** Settings ***
Documentation    Feature Test: QOS_2
Resource   OVAConfig.txt
#Force Tags     Buildup
Suite Setup    Load Test Data and Open Browser
Suite Teardown    Logout And Close All Browsers
Library            Dialogs
Library    String

*** Test Cases ***
00.Log into fusion as Administrator
    [Documentation]    Log in to Appliance
    Log To Console    *********Log into Appliance as Administrator****************
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    fusion_ui_login_to_appliance    ${user[0].name}
    Log to Console    Successfully logged in as Administrator

01.Prerequisite
    fusion_ui_delete_all_appliance_logical_enclosures
    Fusion UI Remove All Enclosure Groups
    Fusion UI Remove All Logical Interconnect Groups

02 CREATING LIG
    ${Status1}=    fusion_ui_create_tbird_logical_interconnect_group     @{TestData.ligs_traffic}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  LIG CREATED SUCCESSFULLY    ELSE    fail

03. CREATING ENCLOSURE GROUP
    ${Status1}=   fusion_ui_create_tbird_enclosure_group    @{TestData.encgroups_tbird}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  EG CREATED SUCCESSFULLY ELSE    Fail

04. CREATE LE
    ${Status1}=   fusion_ui_create_tbird_logical_enclosure  @{TestData.les}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  LE CREATED SUCCESSFULLY ELSE    Fail
    Log to Console  ALL STEPS COMPLETED SUCCESSFULLY

6 Editing LI
    ${Status1}=     fusion_ui_validate_qos_configuration_in_li  @{TestData.li1_C7K}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  Verified QOS in LI and Edited LI successfully   ELSE    fail
    Sleep   10mins
7 Update from Group
    ${Status}   fusion_uiupdate_logical_interconnect_from_group     @{TestData.li1_C7K}
    Run Keyword If  '${Status}' == 'True'   Log to Console  Update from Group in LI is successful   ELSE    fail

8 Verifying QOS in LI matches with LIG after Update
    ${Status} = fusion_ui_verify_logical_interconnects      @{TestData.li1_C7K_verify}
    Run Keyword If  '${Status}' == 'True'   Log to Console  Verified QOS in LI after update from Group  ELSE    Fail

07. CLEANUP
    fusion_ui_delete_all_appliance_logical_enclosures
    Fusion UI Remove All Enclosure Groups
    Fusion UI Remove All Logical Interconnect Groups