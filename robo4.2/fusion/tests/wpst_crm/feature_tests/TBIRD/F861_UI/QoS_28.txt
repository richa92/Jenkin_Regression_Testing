*** Settings ***
Documentation       Feature Test: QOS_28
Resource            OVAConfig.txt
#Force Tags         Buildup
Suite Setup         Load Test Data and Open Browser
Suite Teardown     Logout And Close All Browsers
Library            Dialogs
Library    String

*** Test Cases ***
01. Log into fusion as Administrator
    [Documentation]    Log in to Appliance
    Log To Console    *********Log into Appliance as Administrator****************
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    fusion_ui_login_to_appliance    ${user[0].name}
    Log to Console    Successfully logged in as Administrator

02. INITIAL CLEANUP
    fusion_ui_delete_all_appliance_logical_enclosures
    Fusion UI Remove All Enclosure Groups
    Fusion UI Remove All Logical Interconnect Groups
    Log to Console  ALL STEPS COMPLETED SUCCESSFULLY

03. CREATING LIG
    ${Status1}=    fusion_ui_create_tbird_logical_interconnect_group     @{TestData.ligs_traffic}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  LIG CREATED SUCCESSFULLY    ELSE    fail

04. CREATING ENCLOSURE GROUP
    ${Status1}=   fusion_ui_create_tbird_enclosure_group    @{TestData.encgroups_tbird}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  EG CREATED SUCCESSFULLY ELSE    fail

05. CREATE LE
    ${Status1}=   fusion_ui_create_tbird_logical_enclosure  @{TestData.les}
    Log to Console  ${Status1}
    Run Keyword If  '${Status1}' == 'True'  Log to Console  LE CREATED SUCCESSFULLY ELSE    fail

06 Create Users and validate users
    ${Status}=  Fusion UI Create User       @{TestData.users}
    Run Keyword If  '${Status}' != 'True'  Fail    ELSE  log to console  \n-uSERS validated successfully
    fusion_ui_logout_of_appliance
    Sleep   ${loadtime}

07 verify able to change QoS settings from UI in LIG
    ${l} =  Get Length   ${TestData.users}
    Log to Console  ${l}
    :FOR    ${x}    IN RANGE    0   ${l}
    \   Log to console  ${x}
    \   ${user} =    Get Data By Property    ${TestData.users}    name    ${TestData.users[${x}].name}
    \   fusion_ui_login_to_appliance    ${TestData.users[${x}].name}
    \   Run Keyword If  '${TestData.users[${x}].name}' == 'Administrator' or '${TestData.users[${x}].name}' == 'NetworkAdmin'   fusion_ui_validate_qos_configuration        @{TestData.lig28}
    \   ...             ELSE    Fusion UI Validate User Privileges Logicalinterconnectgroups       @{TestData.lig28}
    \   fusion_ui_logout_of_appliance
    \   Sleep   ${loadtime}

08 verify able to change QoS settings from UI in LI
    ${l} =  Get Length   ${TestData.users}
    Log to Console  ${l}
    :FOR    ${x}    IN RANGE    0   ${l}
    \   Log to console  ${x}
    \   ${user} =    Get Data By Property    ${TestData.users}    name    ${TestData.users[${x}].name}
    \   fusion_ui_login_to_appliance    ${TestData.users[${x}].name}
    \   Run Keyword If  '${TestData.users[${x}].name}' == 'Administrator' or '${TestData.users[${x}].name}' == 'NetworkAdmin'   fusion_ui_validate_qos_configuration_in_li      @{TestData.li28}
    \   ...             ELSE    Fusion UI Validate User Privileges Logicalinterconnects     @{TestData.li28}
    \   fusion_ui_logout_of_appliance

09 Cleanup
    ${user} =    Get Data By Property    ${TestData.users}    name    Administrator
    fusion_ui_login_to_appliance    ${user[0].name}
    Fusion UI Remove User       @{TestData.users}
    fusion_ui_delete_all_appliance_logical_enclosures
    Fusion UI Remove All Enclosure Groups
    Fusion UI Remove All Logical Interconnect Groups
    Fusion UI Logout of Appliance


