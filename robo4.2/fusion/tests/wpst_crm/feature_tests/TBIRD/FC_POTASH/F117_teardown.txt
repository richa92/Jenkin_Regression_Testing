*** Settings ***
Documentation    FC DirectAttach on Potash User Story

Variables        ./data_common.py
Variables        ./data_ha.py

#Resource         ../../../../../resources/api/fusion_api_resource.txt
Resource         ../../../../resource/fusion_api_all_resource_files.txt
Resource         ../FVT/fvt-keywords.txt
Resource         ../FVT/Resources/fvt_resource.txt

Library          FusionLibrary
Library          ../FVT/fvt_api.py

*** Test Cases ***
Teardown
    [Documentation]    Teardown
    Set Log Level   TRACE
    Log to console and logfile  [TEARDOWN]
    Fusion Api Login Appliance      ${APPLIANCE_IP}     ${admin_credentials}
    Power off ALL Servers
    Remove All Server Profiles
    Remove ALL LS
    Remove ALL LSGs
    ${type} =    Get enclosure type
    Run Keyword If  '${type}' == 'C7000'    Remove ALL Enclosures
    Run Keyword If  '${type}' == 'SY12000'    Remove ALL Logical Enclosures
    Remove ALL Enclosure Groups
    Remove ALL LIGs
    Remove ALL Ethernet Networks
    Remove ALL FC Networks
    Remove ALL FCoE Networks
    Remove ALL Network Sets
    Remove ALL Users

*** Keywords ***
Get enclosure type
    [Documentation]    Get enclosure type
    ${encs} =    Fusion API Get Enclosures
    ${enctype} =   set variable     ${null}
    :FOR    ${enc}  IN  @{encs['members']}
    \       ${enctype} =    Get From Dictionary   ${enc}   enclosureType
    [Return]   ${enctype}
