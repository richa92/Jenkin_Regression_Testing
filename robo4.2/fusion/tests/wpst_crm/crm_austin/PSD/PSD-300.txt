*** Settings ***

Documentation     OneView Migration Manager Test Suite for PSD feature in 3.00
...	= Usage =
...		Enclosure Used: WSPT-Austin-1
...		pybot -vOV_IP:<OneView IP> -vBUG_IN_API:<True|False> PSD-300.txt
...             Test suites covers the following test cases: TC21734, TC21738, TC21737, TC21736

Library           RoboGalaxyLibrary
Library           FusionLibrary
Library           BuiltIn
Library           ../lib/WPSTUtil.py

Variables                       ../resources/defaults.py
Variables                       ../resources/DTOtemplates.py
Variables                       ../resources/credentials_wpst.py   Austin3
Force Tags                      Austin3
Default Tags                    OV300
Resource                        ../resources/keywords.txt
Resource                        ../resources/keywords_ovcli.txt
Suite Setup                     Suite Setup Tasks
Test Setup                      Test Setup Tasks

*** Variables ***

@{delResList}                       server-profiles   enclosures
@{AllResourcesCommonList}           ethNets  lig   encGrp   encs   servers   profiles
${stackingHorizontal}               config/stackingHorizontal.txt
${stackingFull}                     config/stackingFull.txt

*** Test Cases ***
TC000--CleanOV
    [Tags]   CleanOV
    CleanOV

TC000--CleanVC
    [Tags]   CleanVC
    CleanVC

TC21734--Eth FC Migrate stacking mode Horizontal into a new enclosure group - Test Compatibility
    [Documentation]   Configuration with 4 Ethernet and 2 FC interconnects, with network uplinks on each module
    ...               Verify test compatibility report
    ...               Configure uplinks in each Logical Switch (depending on stacking mode configured) and verify LAN and SAN connectivity before and after migration for each Logical Switch.
    ...               Verify the status of uplink ports and the internal cross connect ports, to be sure only the appropriate links are used as stacking links (depending on stacking mode configured)
    ...               Expected result is Migratable
    Import VC
    Config VC    ${stackingHorizontal}
    Report.SelectCompare

TC21734--Eth FC Migrate stacking mode Horizontal into a new enclosure group - Migrate
    [Documentation]   Configuration with 4 Ethernet and 2 FC interconnects, with network uplinks on each module
    ...               Verify test compatibility report
    ...               Configure uplinks in each Logical Switch (depending on stacking mode configured) and verify LAN and SAN connectivity before and after migration for each Logical Switch.
    ...               Verify the status of uplink ports and the internal cross connect ports, to be sure only the appropriate links are used as stacking links (depending on stacking mode configured)
    ...               Expected result is Migratable
    Migrate
    GetOVResources.Write.SelectCompare   ResourcesList=${AllResourcesCommonList}    ligSelectDataFile=../resources/private/PSD-300/lig.conf

TC21738--Eth FCoE Migrate stacking mode Horizontal into a existing enclosure group - Test Compatibility
    [Documentation]   Configuration with 6 Ethernet interconnects, with Ethernet and FCoE uplinks on each module
    ...               Verify compatibility report
    ...               Configure uplinks in each Logical Switch (depending on stacking mode configured) and verify LAN and SAN connectivity before and after migration for each Logical Switch.
    ...               Verify the status of uplink ports and the internal cross connect ports, to be sure only the appropriate links are used as stacking links (depending on stacking mode configured)
    ...               Expected result is Migratable
    Delete OneView Selected    ${delResList}
    Import VC
    Config VC    ${stackingHorizontal}
    Report.SelectCompare   ${False}   ${OAVC_CREDENTIALS}   dataFiles/   ${False}   ${False}   EG_2S1320P2RW

TC21738--Eth FCoE Migrate stacking mode Horizontal into a existing enclosure group - Migrate
    [Documentation]   Configuration with 6 Ethernet interconnects, with Ethernet and FCoE uplinks on each module
    ...               Verify compatibility report
    ...               Configure uplinks in each Logical Switch (depending on stacking mode configured) and verify LAN and SAN connectivity before and after migration for each Logical Switch.
    ...               Verify the status of uplink ports and the internal cross connect ports, to be sure only the appropriate links are used as stacking links (depending on stacking mode configured)
    ...               Expected result is Migratable
    Migrate
    GetOVResources.Write.SelectCompare   ResourcesList=${AllResourcesCommonList}    ligSelectDataFile=../resources/private/PSD-300/lig.conf

TC21737--Eth FCoE Migrate stacking mode Full into a new enclosure group - Test Compatibility
    [Documentation]   Configuration with 6 Ethernet interconnects, with Ethernet and FCoE uplinks on each module
    ...               Verify compatibility report
    ...               Configure uplinks in each Logical Switch (depending on stacking mode configured) and verify LAN and SAN connectivity before and after migration for each Logical Switch.
    ...               Verify the status of uplink ports and the internal cross connect ports, to be sure only the appropriate links are used as stacking links (depending on stacking mode configured)
    ...               Expected result is Migratable
    CleanOV.CleanVC
    Import VC
    Config VC    ${stackingFull}
    Report.SelectCompare

TC21737--Eth FCoE Migrate stacking mode Full into a new enclosure group - Migrate
    [Documentation]   Configuration with 6 Ethernet interconnects, with Ethernet and FCoE uplinks on each module
    ...               Verify compatibility report
    ...               Configure uplinks in each Logical Switch (depending on stacking mode configured) and verify LAN and SAN connectivity before and after migration for each Logical Switch.
    ...               Verify the status of uplink ports and the internal cross connect ports, to be sure only the appropriate links are used as stacking links (depending on stacking mode configured)
    ...               Expected result is Migratable
    Migrate
    GetOVResources.Write.SelectCompare   ResourcesList=${AllResourcesCommonList}    ligSelectDataFile=../resources/private/PSD-300/lig.conf

TC21736--Eth FC Migrate stacking mode Full into a existing enclosure group - Test Compatibility
    [Documentation]   Configuration with 4 Ethernet and 2 FC interconnects, with network uplinks on each module
    ...               Verify test compatibility report
    ...               Configure uplinks in each Logical Switch (depending on stacking mode configured) and verify LAN and SAN connectivity before and after migration for each Logical Switch.
    ...               Verify the status of uplink ports and the internal cross connect ports, to be sure only the appropriate links are used as stacking links (depending on stacking mode configured)
    ...               Expected result is Migratable
    Delete OneView Selected    ${delResList}
    Import VC
    Config VC    ${stackingFull}
    Report.SelectCompare   ${False}   ${OAVC_CREDENTIALS}   dataFiles/   ${False}   ${False}   EG_2S1320P2RW

TC21736--Eth FC Migrate stacking mode Full into a existing enclosure group - Migrate
    [Documentation]   Configuration with 4 Ethernet and 2 FC interconnects, with network uplinks on each module
    ...               Verify test compatibility report
    ...               Configure uplinks in each Logical Switch (depending on stacking mode configured) and verify LAN and SAN connectivity before and after migration for each Logical Switch.
    ...               Verify the status of uplink ports and the internal cross connect ports, to be sure only the appropriate links are used as stacking links (depending on stacking mode configured)
    ...               Expected result is Migratable
    Migrate
    GetOVResources.Write.SelectCompare   ResourcesList=${AllResourcesCommonList}    ligSelectDataFile=../resources/private/PSD-300/lig.conf

