
#### IMPORT ENCLOSURE(S) FIRST

### Modify 'ExitOnFailure' property value to FALSE, when executing in script
### mode to avoid exiting (vcmcli returning FAILURE) on a command failure
### 	set cli ExitOnFailure=TRUE

set domain Name=WPST_VC_Austin-5_vc_domain


set stackinglink -quiet DomainStackingMode=Full


set snmp enet ReadCommunity=public EnableV1V2=true EnableV3=false
set snmp fc ReadCommunity=public EnableV1V2=true EnableV3=false



### Setting the ssl-strength causes the web server to restart. Any active
### GUI session must be re-established. This action does not impact CLI
### sessions.
set ssl -quiet Strength=Strong
set user-security StrongPasswords=Disabled MinPasswordLength=8
set ldap Enabled=false

### Below command can only be executed by remote user (ldap/tacacs/radius) having a 'domain' privilege
### Locally authenticated users are not allowed to disable or enable local user authentication
### set local-users Enabled=true PrimaryRemoteAuthenticationMethod=none

set tacacs Enabled=false Port=49 Timeout=10 SecondaryPort=49 SecondaryTimeout=10 LoggingEnabled=false

set radius Enabled=false Port=1812 Timeout=10 SecondaryPort=1812 SecondaryTimeout=10


set role domain Order=local,ldap,radius,tacacs Operations=FirmwareUpdate,RestoreConfig,SaveConfig,SupportFiles
set role network Order=tacacs,radius,local Operations=PortMonitoring
set role server Order=ldap,local Operations=PortMonitoring
set role storage Order=radius,local Operations=

set serverid Type=Factory-Default


set session Timeout=0

set auto-deployment TftpMode=Auto


set qos CustomNoFCoE

set qos-map DOT1P Class=Best_Effort Values="0-7"

set qos-map DSCP Class=Best_Effort Values="AF11-CS7"

set qos-class Medium Enabled=true RealTime=false Share=25 EgressDOT1P=2 MaxShare=100
set qos-class Real_Time Enabled=true RealTime=true Share=10 EgressDOT1P=5 MaxShare=10
set qos-class Class1 Enabled=false RealTime=false MaxShare=100
set qos-class Class2 Enabled=false RealTime=false MaxShare=100
set qos-class Class3 Enabled=false RealTime=false MaxShare=100
set qos-class Class4 Enabled=false RealTime=false MaxShare=100
set qos-class Class5 Enabled=false RealTime=false MaxShare=100
set qos-class Best_Effort MaxShare=100

set qos-classifier Downlinks Classifiers=DOT1P,DSCP
set qos-classifier Uplinks Classifiers=DOT1P

set qos-map DOT1P Class=Best_Effort Values="0,1"
set qos-map DOT1P Class=Medium Values="2,3,4"
set qos-map DOT1P Class=Real_Time Values="5,6,7"
set qos-map DSCP Class=Best_Effort Values="AF11,AF12,AF13,CS0,CS1"
set qos-map DSCP Class=Medium Values="AF21,AF22,AF23,AF31,AF32,AF33,AF41,AF42,AF43,CS2,CS3,CS4"
set qos-map DSCP Class=Real_Time Values="CS5,CS6,CS7,EF"

set qos CustomWithFCoE

set qos-map DOT1P Class=Best_Effort Values="0-7"

set qos-map DSCP Class=Best_Effort Values="AF11-CS7"

set qos-class Medium Enabled=true RealTime=false Share=25 EgressDOT1P=2 MaxShare=100
set qos-class Real_Time Enabled=true RealTime=true Share=10 EgressDOT1P=5 MaxShare=10
set qos-class Class1 Enabled=false RealTime=false MaxShare=100
set qos-class Class2 Enabled=false RealTime=false MaxShare=100
set qos-class Class3 Enabled=false RealTime=false MaxShare=100
set qos-class Class4 Enabled=false RealTime=false MaxShare=100
set qos-class Best_Effort MaxShare=100

set qos-classifier Downlinks Classifiers=DOT1P,DSCP
set qos-classifier Uplinks Classifiers=DOT1P

set qos-map DOT1P Class=Best_Effort Values="0,1"
set qos-map DOT1P Class=Medium Values="2,3,4"
set qos-map DOT1P Class=Real_Time Values="5,6,7"
set qos-map DSCP Class=Best_Effort Values="AF11,AF12,AF13,CS0,CS1"
set qos-map DSCP Class=Medium Values="AF21,AF22,AF23,AF31,AF32,AF33,AF41,AF42,AF43,CS2,CS3,CS4"
set qos-map DSCP Class=Real_Time Values="CS5,CS6,CS7,EF"

set qos Passthrough


set domain MacType=Factory-Default

set mac-cache Enabled=true Refresh=5
set igmp Enabled=false
set enet-vlan -quiet VlanCapacity=Expanded
set statistics-throughput -quiet Enabled=true SampleRate=5m
set port-protect networkLoop=Enabled
set port-protect pauseFlood=Enabled
set lldp enhancedTlv=false
set lacp-timer Default=Short

add uplinkset Austin5-sus ConnectionMode=Failover
add uplinkport enc0:1:Q1.1 UplinkSet=Austin5-sus Speed=Auto Role=Primary
add uplinkport enc0:2:Q1.1 UplinkSet=Austin5-sus Speed=Auto Role=Secondary

add network-range -quiet UplinkSet=Austin5-sus nameprefix=Network_ vlanids=1-1000 NAGs=Default SmartLink=Enabled

### PacketBufferOverallocationRatio is applicable only for
### HP 1/10Gb VC-Enet and HP 1/10Gb-F VC-Enet
### modules and deprecated for all other module types.

set advanced-networking -quiet PacketBufferOverallocationRatio=1 FlowControl=auto

set domain WwnType=Factory-Default


set link-dist-interval Interval=30

add fabric san-Austin5-1 Type=FabricAttach Bay=5 Ports=1,2 Speed=4Gb LinkDist=Manual
add fabric san-Austin5-2 Type=FabricAttach Bay=6 Ports=1,2 Speed=2Gb LinkDist=Manual
# FC ports for the HP VC FlexFabric 10Gb/24-Port modules  are specified with a leading 'X'.
# But when adding the fabric the port numbers are specified without the leading 'X'.
# See the note on the VCMCLI help text for 'add fabric'.
add fabric san-Austin5-fcoe1 Type=FabricAttach Bay=1 Ports=1,2 Speed=8Gb LinkDist=Manual
# FC ports for the HP VC FlexFabric 10Gb/24-Port modules  are specified with a leading 'X'.
# But when adding the fabric the port numbers are specified without the leading 'X'.
# See the note on the VCMCLI help text for 'add fabric'.
add fabric san-Austin5-fcoe2 Type=FabricAttach Bay=2 Ports=1,2 Speed=Auto LinkDist=Manual

add profile Profile_bay1 -NoDefaultEnetConn -NoDefaultFcConn -NoDefaultFcoeConn -quiet NAG=Default HideUnusedFlexNICs=true BootMode=Auto SriovMode=Advanced
add enet-connection Profile_bay1 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay1 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay1 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay1 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay1 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay1 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay1 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay1 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add fc-connection Profile_bay1 Fabric=san-Austin5-1 Speed=Auto
add fc-connection Profile_bay1 Fabric=san-Austin5-2 Speed=Auto
add fcoe-connection Profile_bay1 Fabric=san-Austin5-fcoe1 SpeedType=Preferred
add fcoe-connection Profile_bay1 Fabric=san-Austin5-fcoe2 SpeedType=Preferred
add server-port-map-range Profile_bay1:1 UplinkSet=Austin5-sus vlanids=1-50
add server-port-map-range Profile_bay1:2 UplinkSet=Austin5-sus vlanids=1-50
add server-port-map-range Profile_bay1:3 UplinkSet=Austin5-sus vlanids=51-100
add server-port-map-range Profile_bay1:4 UplinkSet=Austin5-sus vlanids=51-100
add server-port-map-range Profile_bay1:5 UplinkSet=Austin5-sus vlanids=101-150
add server-port-map-range Profile_bay1:6 UplinkSet=Austin5-sus vlanids=101-150
add server-port-map-range Profile_bay1:7 UplinkSet=Austin5-sus vlanids=151-200
add server-port-map-range Profile_bay1:8 UplinkSet=Austin5-sus vlanids=151-200

assign profile Profile_bay1 enc0:1

add profile Profile_bay2 -NoDefaultEnetConn -NoDefaultFcConn -NoDefaultFcoeConn -quiet NAG=Default HideUnusedFlexNICs=true BootMode=Auto SriovMode=Advanced
add enet-connection Profile_bay2 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay2 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay2 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay2 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay2 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay2 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay2 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay2 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add fc-connection Profile_bay2 Fabric=san-Austin5-1 Speed=Auto
add fc-connection Profile_bay2 Fabric=san-Austin5-2 Speed=Auto
add fcoe-connection Profile_bay2 Fabric=san-Austin5-fcoe1 SpeedType=Preferred
add fcoe-connection Profile_bay2 Fabric=san-Austin5-fcoe2 SpeedType=Preferred
add server-port-map-range Profile_bay2:1 UplinkSet=Austin5-sus vlanids=201-250
add server-port-map-range Profile_bay2:2 UplinkSet=Austin5-sus vlanids=201-250
add server-port-map-range Profile_bay2:3 UplinkSet=Austin5-sus vlanids=251-300
add server-port-map-range Profile_bay2:4 UplinkSet=Austin5-sus vlanids=251-300
add server-port-map-range Profile_bay2:5 UplinkSet=Austin5-sus vlanids=301-350
add server-port-map-range Profile_bay2:6 UplinkSet=Austin5-sus vlanids=301-350
add server-port-map-range Profile_bay2:7 UplinkSet=Austin5-sus vlanids=351-400
add server-port-map-range Profile_bay2:8 UplinkSet=Austin5-sus vlanids=351-400

assign profile Profile_bay2 enc0:2

add profile Profile_bay3 -NoDefaultEnetConn -NoDefaultFcConn -NoDefaultFcoeConn -quiet NAG=Default HideUnusedFlexNICs=true BootMode=Auto SriovMode=Advanced
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay3 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add fc-connection Profile_bay3 Fabric=san-Austin5-1 Speed=Auto
add fc-connection Profile_bay3 Fabric=san-Austin5-2 Speed=Auto
add fcoe-connection Profile_bay3 Fabric=san-Austin5-fcoe1 SpeedType=Preferred
add fcoe-connection Profile_bay3 Fabric=san-Austin5-fcoe2 SpeedType=Preferred
add server-port-map-range Profile_bay3:1 UplinkSet=Austin5-sus vlanids=401-500
add server-port-map-range Profile_bay3:2 UplinkSet=Austin5-sus vlanids=401-500
add server-port-map-range Profile_bay3:3 UplinkSet=Austin5-sus vlanids=401-500
add server-port-map-range Profile_bay3:4 UplinkSet=Austin5-sus vlanids=401-500
add server-port-map-range Profile_bay3:5 UplinkSet=Austin5-sus vlanids=401-500
add server-port-map-range Profile_bay3:6 UplinkSet=Austin5-sus vlanids=401-500
add server-port-map-range Profile_bay3:7 UplinkSet=Austin5-sus vlanids=401-500
add server-port-map-range Profile_bay3:8 UplinkSet=Austin5-sus vlanids=401-500
add server-port-map-range Profile_bay3:9 UplinkSet=Austin5-sus vlanids=501-560
add server-port-map-range Profile_bay3:10 UplinkSet=Austin5-sus vlanids=501-560
add server-port-map-range Profile_bay3:11 UplinkSet=Austin5-sus vlanids=501-560
add server-port-map-range Profile_bay3:12 UplinkSet=Austin5-sus vlanids=501-560
add server-port-map-range Profile_bay3:13 UplinkSet=Austin5-sus vlanids=501-560
add server-port-map-range Profile_bay3:14 UplinkSet=Austin5-sus vlanids=501-560
add server-port-map-range Profile_bay3:15 UplinkSet=Austin5-sus vlanids=501-560
add server-port-map-range Profile_bay3:16 UplinkSet=Austin5-sus vlanids=501-560

assign profile Profile_bay3 enc0:3

add profile Profile_bay9 -NoDefaultEnetConn -NoDefaultFcConn -NoDefaultFcoeConn -quiet NAG=Default HideUnusedFlexNICs=true BootMode=Auto SriovMode=Advanced
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay9 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add fc-connection Profile_bay9 Fabric=san-Austin5-1 Speed=Auto
add fc-connection Profile_bay9 Fabric=san-Austin5-2 Speed=Auto
add fcoe-connection Profile_bay9 Fabric=san-Austin5-fcoe1 SpeedType=Preferred
add fcoe-connection Profile_bay9 Fabric=san-Austin5-fcoe2 SpeedType=Preferred
add server-port-map-range Profile_bay9:1 UplinkSet=Austin5-sus vlanids=561-600
add server-port-map-range Profile_bay9:2 UplinkSet=Austin5-sus vlanids=561-600
add server-port-map-range Profile_bay9:3 UplinkSet=Austin5-sus vlanids=561-600
add server-port-map-range Profile_bay9:4 UplinkSet=Austin5-sus vlanids=561-600
add server-port-map-range Profile_bay9:5 UplinkSet=Austin5-sus vlanids=601-640
add server-port-map-range Profile_bay9:6 UplinkSet=Austin5-sus vlanids=601-640
add server-port-map-range Profile_bay9:7 UplinkSet=Austin5-sus vlanids=601-640
add server-port-map-range Profile_bay9:8 UplinkSet=Austin5-sus vlanids=601-640
add server-port-map-range Profile_bay9:9 UplinkSet=Austin5-sus vlanids=641-680
add server-port-map-range Profile_bay9:10 UplinkSet=Austin5-sus vlanids=641-680
add server-port-map-range Profile_bay9:11 UplinkSet=Austin5-sus vlanids=641-680
add server-port-map-range Profile_bay9:12 UplinkSet=Austin5-sus vlanids=641-680
add server-port-map-range Profile_bay9:13 UplinkSet=Austin5-sus vlanids=681-720
add server-port-map-range Profile_bay9:14 UplinkSet=Austin5-sus vlanids=681-720

assign profile Profile_bay9 enc0:9

add profile Profile_bay10 -NoDefaultEnetConn -NoDefaultFcConn -NoDefaultFcoeConn -quiet NAG=Default HideUnusedFlexNICs=true BootMode=Auto SriovMode=Advanced
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add enet-connection Profile_bay10 Network=Unassigned PXE=UseBIOS SriovType=Disabled
add fc-connection Profile_bay10 Fabric=san-Austin5-1 Speed=Auto
add fc-connection Profile_bay10 Fabric=san-Austin5-2 Speed=Auto
add fcoe-connection Profile_bay10 Fabric=san-Austin5-fcoe1 SpeedType=Preferred
add fcoe-connection Profile_bay10 Fabric=san-Austin5-fcoe2 SpeedType=Preferred
add server-port-map-range Profile_bay10:1 UplinkSet=Austin5-sus vlanids=721-760
add server-port-map-range Profile_bay10:2 UplinkSet=Austin5-sus vlanids=721-760
add server-port-map-range Profile_bay10:3 UplinkSet=Austin5-sus vlanids=961-1000
add server-port-map-range Profile_bay10:4 UplinkSet=Austin5-sus vlanids=961-1000
add server-port-map-range Profile_bay10:5 UplinkSet=Austin5-sus vlanids=761-800
add server-port-map-range Profile_bay10:6 UplinkSet=Austin5-sus vlanids=761-800
add server-port-map-range Profile_bay10:7 UplinkSet=Austin5-sus vlanids=761-800
add server-port-map-range Profile_bay10:8 UplinkSet=Austin5-sus vlanids=761-800
add server-port-map-range Profile_bay10:9 UplinkSet=Austin5-sus vlanids=801-880
add server-port-map-range Profile_bay10:10 UplinkSet=Austin5-sus vlanids=801-880
add server-port-map-range Profile_bay10:11 UplinkSet=Austin5-sus vlanids=881-920
add server-port-map-range Profile_bay10:12 UplinkSet=Austin5-sus vlanids=881-920
add server-port-map-range Profile_bay10:13 UplinkSet=Austin5-sus vlanids=921-960
add server-port-map-range Profile_bay10:14 UplinkSet=Austin5-sus vlanids=921-960

assign profile Profile_bay10 enc0:10


