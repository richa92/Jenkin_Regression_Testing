*** Settings ***
Documentation     CLI_Automation testcases that can be migratable
...    Covers the following testcases:
...        3.1.1.9-lacp-timer
...        3.1.1.10-link-dist-interval
...        3.1.1.11-loop-protect
...        3.1.1.12 mac-cache
...        3.1.1.15-port-protect
...        3.1.1.17-role
...        3.1.1.20-session
...        3.1.1.22-snmp-access
...        3.1.1.26-statistics-throughput

Library           RoboGalaxyLibrary
Library           FusionLibrary
Library           ../lib/WPSTUtil.py

Variables                       ../resources/defaults.py
Variables                       ../resources/credentials_wpst.py   Austin4
Force Tags                      Austin4
Resource                        ../resources/keywords.txt
Suite Setup                     Suite Setup Tasks
Test Setup                      Test Setup Tasks

*** Variables ***
@{bayNumbers}              3   4

*** Test Cases ***
TC0--Preparing the environment: Clean OV, Clean VC
    [Tags]   CleanOV.CleanVC
    CleanOV.CleanVC
    
TC1--Migratable Test Compatibility Report
    [Documentation]   Import Enclosure and Perform Testing for migratable config
    @{commands}     Create List    import enclosure username=${OA_CREDENTIAL_DATA['oaUsername']} password=${OA_CREDENTIAL_DATA['oaPassword']}
    Run CLI In Interconnect From List    ${commands}
    # Detect, reset and sleep to workaround QXCR1001467844: Utah module in No Comm state after import enclosure
    Check Interconnect In No Comm And Recover If Needed   ${bayNumbers}
    @{commands}    Create List    set lacp-timer Default=long    #3.1.1.9-lacp-timer
    ...    add network net1
    ...    add network net2 LacpTimer=Short 
    #3.1.1.10- link-dist-interval
    ...    set link-dist-interval interval=40
    #3.1.1.11-loop-protect
    ...    set loop-protect -quiet Enabled=true
    #3.1.1.12-mac-cache
    ...    set mac-cache Enabled=true Refresh=10
    #3.1.1.15-port-protect
    ...    set port-protect -quiet networkLoop=Enabled pauseFlood=Enabled
    #3.1.1.17-role
    ...    set role domain operations=Default
    #3.1.1.20-session
    ...    set session Timeout=20
    #3.1.1.22-snmp-access
    ...    add snmp-access Network=15.186.22.126/32
    #3.1.1.26 statistics-throughput
    ...    set statistics-throughput -quiet Enabled=true SampleRate=1m
    Run CLI In Interconnect From List    ${commands}
    Report.Write.Compare

TC2--Disable some VC config, perform test compatibility report
    @{commands_disabled}    Create List    set loop-protect -quiet Enabled=false    #3.1.1.11-loop-protect
    ...    set mac-cache Enabled=false    #3.1.1.12-mac-cache
    ...    set port-protect -quiet networkLoop=disabled pauseFlood=disabled    #3.1.1.15-port-protect
    ...    set statistics-throughput -quiet Enabled=false    #3.1.1.26 statistics-throughput
    Run CLI In Interconnect From List    ${commands_disabled}
    Report.Write.Compare

TC2--Migrate to OneView
    Migrate
    GetOVResources.Write.Compare
