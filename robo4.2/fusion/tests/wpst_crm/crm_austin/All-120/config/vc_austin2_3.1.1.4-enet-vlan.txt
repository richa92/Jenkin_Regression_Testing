################################################################################
# Based on VC4.30 Pass34 RC3
# WPST_VC > MigrationManager1.20 > Feature Team > CLI > EthernetNetworks
#  3.1.1.4  enet-vlan: set enet-vlan (1000 Vlans and 162 Vlans per physical server port)
################################################################################

#set serverid Type=Factory-Default
set serverid Type=VC-Defined PoolId=62


set session Timeout=0


#set domain MacType=Factory-Default
set domain MacType=VC-Defined MacPool=62

set mac-cache Enabled=true Refresh=5
set igmp Enabled=false
set enet-vlan SharedServerVLanId=true
#default_setting set enet-vlan SharedServerVLanId=false
set enet-vlan PrefSpeedType=Custom PrefSpeed=2000
set enet-vlan MaxSpeedType=Custom MaxSpeed=9000
#N/A_on_VCM_GUI set enet-vlan -quiet VlanCapacity=Legacy
set enet-vlan -quiet VlanCapacity=Expanded
set statistics-throughput -quiet Enabled=true SampleRate=5m
set port-protect networkLoop=Enabled
set port-protect pauseFlood=Enabled
set lldp enhancedTlv=false
set lacp-timer Default=Short

# Configure 1K vlans
add uplinkset OddPipe ConnectionMode=Auto LacpTimer=Domain-Default
add uplinkport enc0:1:X3 UplinkSet=OddPipe Speed=Auto
add uplinkport enc0:1:X4 UplinkSet=OddPipe Speed=Auto

add network-range -quiet UplinkSet=OddPipe nameprefix=net_ namesuffix=-O vlanids=2-500 NAGs=Default SmartLink=Enabled

add uplinkset EvenPipe ConnectionMode=Auto LacpTimer=Domain-Default
add uplinkport enc0:2:X3 UplinkSet=EvenPipe Speed=Auto
add uplinkport enc0:2:X4 UplinkSet=EvenPipe Speed=Auto

add network-range -quiet UplinkSet=EvenPipe nameprefix=net_ namesuffix=-E vlanids=2-500 NAGs=Default SmartLink=Enabled

add network 1Network -quiet NAGs=Default VLanTunnel=Disabled LacpTimer=Long PrefSpeedType=Custom PrefSpeed=11000 MaxSpeedType=Custom MaxSpeed=20000
add uplinkport enc0:1:X7 Network=1Network Speed=Auto
add network 2Network -quiet NAGs=Default VLanTunnel=Disabled LacpTimer=Short
add uplinkport enc0:2:X7 Network=2Network Speed=Auto
### PacketBufferOverallocationRatio is applicable only for
### HP 1/10Gb VC-Enet and HP 1/10Gb-F VC-Enet
### modules and deprecated for all other module types.

set advanced-networking -quiet PacketBufferOverallocationRatio=1 FlowControl=auto

#set domain WwnType=Factory-Default
set domain WwnType=VC-Defined WwnPool=62


set link-dist-interval Interval=30


add profile Profile1 -NoDefaultEnetConn -NoDefaultFcConn -NoDefaultFcoeConn -quiet NAG=Default HideUnusedFlexNICs=true BootMode=Auto
add enet-connection Profile1 Network=Unassigned PXE=UseBIOS
add enet-connection Profile1 Network=Unassigned PXE=UseBIOS
add server-port-map-range Profile1:1 UplinkSet=OddPipe vlanids=100-261 MatchUplinkSet=true
add server-port-map-range Profile1:2 UplinkSet=EvenPipe vlanids=100-261 MatchUplinkSet=true

assign profile Profile1 enc0:1

show config
show config -includePoolInfo
#show all
