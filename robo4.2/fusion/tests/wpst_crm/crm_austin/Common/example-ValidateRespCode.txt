*** Settings ***
Library           RoboGalaxyLibrary
Library           FusionLibrary
Library             BuiltIn
Library           ../lib/WPSTUtil.py

Variables                       ../resources/defaults.py
Variables                       ../resources/credentials_wpst.py    Austin3
Variables                       ../resources/DTOtemplates.py

Resource                        ../resources/keywords.txt
Suite Setup                     Suite Setup Tasks
Test Setup                      Test Setup Tasks
*** Variables ***

*** Test Cases ***
C11-- POST returns 400, expecting 200, fails
    Login to OneView Via REST
    ${resp}=    Add Ethernet Network       name=nw-untagged1   blah=blah
    Should Match StatusCode in Response    ${resp}    ${200}

C12-- POST returns 400, expecting status_code 400
    Login to OneView Via REST
    ${resp}=    Add Ethernet Network       name=nw-untagged1   blah=blah
    Should Match StatusCode in Response    ${resp}    ${400}

C13-- POST returns 400, expecting status_code 400
    Login to OneView Via REST
    ${resp}=    Add Ethernet Network       name=nw-untagged1   blah=blah
    ${validation}=    Create Dictionary     status_code=${400}
    ...                                     errorCode=UNRECOGNIZED_JSON_FIELD
    Should Match Dictionary in Response    ${resp}    ${validation}

C21-- PUT returns 202
    Login to OneView Via REST
    ${resp}=   set LIG   LIG_2S1320P2RW    ethernetSettings    enableRichTLV=False
    Should Match StatusCode in Response    ${resp}    ${202}

C31-- GET returns 200 using valid task uri
    Login to OneView Via REST
    # replace with valid task uri
    ${resp}=   Fusion Api Get Task    /7DA06E59-BADF-43EF-A780-3E0F7F8FE844
    Should Match StatusCode in Response    ${resp}    ${200}

C32-- GET returns 200 using invalid task uri
    Login to OneView Via REST
    # replace with task uri in error state
    ${resp}=   Fusion Api Get Task    /77DA2AF5-E4E5-40FB-B5A3-7F3C657BA173
    Should Match StatusCode in Response    ${resp}    ${200}
    ${resp}=   Wait For Task    ${resp}
    ${validationTaskErrors}=    Create Dictionary    errorCode=FAIL_TO_READ_DATA_FROM_VCM_MANAGED_BY_ONEVIEW1
    ${validation}=    Create Dictionary     taskState=Error
    ...                                     taskStatus=Task failed
    ...                                     taskErrors=${validationTaskErrors}
    Should Match Dictionary in Response    ${resp}    ${validation}

C0
    Login to OneView Via REST
    #generate migrate task statistics report  /rest/tasks/4592E650-D5EF-4E23-8BEF-CB0669ED0CD1
    generate migrate task statistics report    /rest/tasks/A1B5CB8A-5F4C-466D-805A-E1B68873076E