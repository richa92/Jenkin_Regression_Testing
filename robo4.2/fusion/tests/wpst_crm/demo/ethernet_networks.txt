*** Settings ***
Documentation		Ethernet network test suite  
...
...		
#Variables 		    C:\\Users\\Administrator\\git\\robogalaxy\\tests\\demo\\wpst_crm\\wpst_variables.py		
Suite Setup   		Load Test Data And Login to OneView         
Suite Teardown		Logout OneView via REST  	

Resource			wpst_resource.txt
Resource			resource.txt         	

*** Test Cases ***
Create Variable List
        ${ethernet_api}		Convert To Integer	101
        ${true}				Convert To Boolean		True
        ${filter}           Convert To String  	"'name' == 'wpstDefaultnetwork'"	
        Set Suite Variable 		${ethernet_api}	
        Set Suite Variable		${true}
        Set Suite Variable		${filter}
        Set Suite Variable		${ethernet_name}		wpstDefaultnetwork
        Set Suite Variable		${default_conn_name}	defaultConnectionTemplate
        Set Suite Variable 		${max_bw}				8000
        Set Suite Variable 		${typ_bw}				2000

        ${bandwidth_dict}		Create Dictionary	name=${default_conn_name}
        ...											maximumBandwidth=${max_bw}
        ...											typicalBandwidth=${typ_bw}
        Set Suite Variable		${bandwidth_dict}	${bandwidth_dict}
        
        ${smart}			Convert To Boolean		True
		${private}			Convert To Boolean		False
		Set Suite Variable		${namePrefix}			Bulk_Net
		Set Suite Variable		${vlanIdRange}			1-10
		Set Suite Variable		${purpose}				General	
 		${bulk_networks_dict}		Create Dictionary	namePrefix=${namePrefix}
		...												vlanIdRange=${vlanIdRange}
     	...												purpose=${purpose}
    	...												smart=${smart}
    	...												private=${private}
        Set Suite Variable		${bulk_networks_dict}	${bulk_networks_dict}


Create Ethernet Network With Default Connection Template
	[Documentation]		Create an Ethernet network thats defined in the xml config file using a default connection template
	Set Log Level	DEBUG
	${network} =  Get data by property  ${TestDataApi.networks}  name  ${ethernet_name}
	${respDict} = 	Fusion Api Add Ethernet Network		${network[0]}	${ethernet_api}		${None}	${true}	
	${keys} = 		Get Dictionary Keys	${respDict}
	Dictionary Should Contain Key 	${respDict}		associatedResource		msg=Key not found
	${uri} = 		Get From Dictionary	${respDict['associatedResource']}		resourceUri
	${rc} = 		Convert To Integer	202
	${valDict} = 	Create Dictionary	status_code=${rc}
	Validate Response	${respDict}	${valDict}
	
	${rc} = 		Convert to Integer	200
	${keys} = 		Get Dictionary Keys	${respDict}
	${respDict} = 	Fusion Get Resource	${uri}
	${valDict} = 	Create Dictionary	name=wpstDefaultnetwork
	Validate Response	${respDict}	${valDict}					
	  
Get All Ethernet Networks
    [Documentation]		Get all Ethernet networks 
	Set Log Level	DEBUG
	Fusion Api Get Ethernet Networks		api=${ethernet_api}							
	   	 
Get Ethernet Network By Name 
    [Documentation]		Get an Ethernet network filterd by name
	Set Log Level	DEBUG
	Fusion Api Get Ethernet Networks		filter=${filter}	 	
	   	
Delete Ethernet Network
    [Documentation]		Delete an Ethernet network 
	Set Log Level	DEBUG
	Fusion Api Delete Ethernet Network		${ethernet_name}		
	
Create Ethernet Network With Bandwidth Updates
     [Documentation]		Create an Ethernet network thats defined in the xml config file with b/w updates
     Set Log Level	DEBUG
     Fusion Api Update Default Connection Template	${bandwidth_dict} 
 	 ${network} =  Get data by property  ${TestDataApi.networks}  name  ${ethernet_name}
	 Fusion Api Add Ethernet Network		${network[0]}	${ethernet_api}		${None}	${true}
	 
Create All Ethernet Networks Described in XML File
	Set Log Level	DEBUG
	:For 	${network}	IN		@{TestDataApi.networks}	
	\      Fusion Api Add Ethernet Network		${network}	${ethernet_api}		${None}	${true}		
	
Delete All Ethernet Networks Described In XML File
    [Documentation]	Delete all Ethernet networks defined in the xml file
	Set Log Level	DEBUG
	:For 	${network}	IN		@{TestDataApi.networks}	
	\      Fusion Api Delete Ethernet Network		name=${network['name']}	api=${ethernet_api}	
	
Create Ethernet Bulk Networks
    [Documentation]	Create Ethernet networks in bulk
	Set Log Level	DEBUG
	Fusion Api Add Ethernet Bulk Networks		${bulk_networks_dict}	${ethernet_api}		${None}	${true}		
	 		