*** Settings ***
Documentation      RoboGalaxy Fusion 1.2 Branch for WPST-CRM Fusion UI Regression Tests
Resource           500_user_mgmt_rsc.txt
Force Tags         Buildup
#Test Setup        Load Test Data and Open Browser
#Test Teardown      Logout And Close All Browsers


...    COMMENT
...    = Usage =
...    | pybot | -v ApplianceUrl:http://<ip> | -v DataFile:OVAData.xml | OVAQual.txt |
...    = Variables =
...    | ApplianceUrl | Required; URL of the Fusion appliance to test |
...    | DataFile | (optional) XML data file. Defaults to ./OVAData.xml | 
...    | SeleniumSpeed | (optional) Sets selenium speed. Defaults to 0.1 |
...    | Browser | (optional) Browser to use. Defaults to FireFox |
...
...    pybot -v ApplianceUrl:https://15.199.235.4 -v DataFile:500_user_mgmt.xml  500_user_mgmt_rsc.txt
...
...    Summary of the what the test will do
...
...
...    No enclosure is needed for this test!!!
...
...
   

*** Variables ***
${DataFile1}		    500_user_mgmt.xml
${SeleniumSpeed}		0.0

##1.10 Pass RC3
##${ApplianceUrl}	        https://15.199.232.217

##1.20 RC6
${ApplianceUrl}       https://15.199.235.4


*** Test Cases ***
As an Administrator I want create users and verify login of new users
	Load Test Data  ${DataFile1}
	##Set up log level and variables
	Log to Console		Set up log level and variables
	Set Log Level    TRACE
	Log Variables
	 	
	:FOR    ${type}  IN  @{TestData.browser}
	\   Log to Console     ${type.name}
	\	Load Test Data and Open Browser
    \   Log to Console   Log in as full Administrator
	\   Log into Fusion appliance as Administrator    

	\   Log to Console     Create users
	\   Fusion UI Create User  @{TestData.users}
	\   Fusion UI Logout of Appliance
	\   Log to Console     Verify newly-created users can log in successfully
	\   Fusion UI Validate Login
	    
	#Teardown
	\	Log to Console      Log back in as Administrator
	\   Log into Fusion Appliance As Administrator 
	   
	\   Log to Console      Remove all newly-created users
	\   Fusion UI Remove User  @{TestData.users_delete}
	\   Fusion UI Logout of Appliance
	\   Close All Browsers
    
    
*** Keywords ***
Fusion UI Validate Login
    :FOR    ${user}  IN  @{TestData.users}
    \   Log to Console		Log in as user = ${user}
    \   Fusion UI Login To Appliance  ${user.name}
    \   Fusion UI Logout of Appliance

Load Test Data and Open Browser
	Open Browser  ${ApplianceUrl}  ${type.name}
	Run Keyword If  "${type.name}" == "IE"   Go To  javascript:document.getElementById('overridelink').click()
	Set Selenium Speed  ${SeleniumSpeed}
	

	
	
