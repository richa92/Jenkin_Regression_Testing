*** Settings ***
Documentation     Factory Reset CI Manager
...    = Usage =
...    pybot -L TRACE
...    -v FUSION_FQDN:<Fully-Qualified Domain Name> -v FUSION_IP:<Static IPv4 Address>
...    -v GATEWAY_IP:<Gateway IP Address> -v NETMASK_IP:<Netmask IP Address>
...
...    = Variables =
...    | FUSION FQDN | Required; Fully-Qualified Domain Name To Set CIM To |
...    | FUSION IP | Required; Static IPv4 Address To Set CIM To |
...    | GATEWAY IP | Required; Gateway IPv4 Address To Set CIM To |
...    | NETMASK IP | Required; Netmask IPv4 Address To Set CIM To |
...    |
...    = Preconditions =
...    None

Library           RoboGalaxyLibrary
Library           FusionLibrary
Library           robot.api.logger
Variables         ../resources/variables.py    ${ENCLOSURE}
Resource          ../resources/fusion_cli.txt
Resource          ../resources/constants.txt

Force Tags        # All test cases get these tags
Test Template 		Invalid Login

*** Variables ***
${PASSWORD}     hpvse1
${BUSERNAME}    Administrator
*** Keywords ***
Invalid Login
  [Arguments]   ${username}   ${password}
  Open Browser To Login Page After Startup
    Wait Until Element Is Visible      id=hp-login-user
    ...                                timeout=300
    ...                                error=Not at Login page
    Input Text    hp-login-user        ${username}
    Input Text    hp-login-password    ${password}
    Click Button    hp-login-button
    sleep    5
    Capture Page Screenshot
	#Element Should Contain     locator    'Invalid username or password'
	Page Should Contain Element  xpath=//*[contains(text(),'Invalid') or contains(text(),'field is required')]
	#Page Should Contain  Invalid
	Close Browser
    #First Time Login
    #Input Username    ${username}
    #Input Password    ${password}
    #Submit Credentials
    #Error Page Should Be Open

Relogin CIM
    Close Browser
    Open Browser To Login Page After Startup

Open Browser To Login Page After Startup
    #Console    Opening Browser to https://16.114.180.9/#/login
    #Console    Opening Browser to https://${FUSION_IP}/#/login
    #Open Browser    https://16.114.178.132/#/login    firefox
    Open Browser    https://${FUSION_IP}/#/login    firefox

First Time Login
    Open Browser To Login Page After Startup
    Wait Until Element Is Visible      id=hp-login-user
    ...                                timeout=300
    ...                                error=Not at Login page
    Input Text    hp-login-user        ${FUSION_USERNAME}
    Input Text    hp-login-password    ${FUSION_FACTORY_PASSWORD}
    Click Button    hp-login-button
    sleep    5
    Capture Page Screenshot



*** Test Cases ***  USERNAME            PASSWORD
Invalid Username    invalid             ${PASSWORD}
Invalid Password    ${BUSERNAME}         invalid
Invalid Both        invalid             invalid
Empty Username      ${EMPTY}            ${PASSWORD}
Empty Password      ${BUSERNAME}         ${EMPTY}
Empty Both          ${EMPTY}            ${EMPTY}


*** Commented outTest Cases ***
Open Browser To Login Page After Startup
    #Console    Opening Browser to https://${FUSION_IP}/#/login
    #Open Browser    https://16.114.180.9/#/login    firefox
    Open Browser    https://${FUSION_IP}/#/login    firefox
    # Click 'Continue to this website' link allowing test case to continue (for IE only).
    # Run Keyword If  "${BROWSER}" == "IE"   Go To  javascript:document.getElementById('overridelink').click()
    sleep    5
    Capture Page Screenshot

First Time Login
    [Tags]    FirstTimeLogin
    Open Browser To Login Page After Startup
    Wait Until Element Is Visible      id=hp-login-user
    ...                                timeout=300
    ...                                error=Not at Login page
    Input Text    hp-login-user        ${FUSION_USERNAME}
    Input Text    hp-login-password    ${FUSION_FACTORY_PASSWORD}
    Click Button    hp-login-button
    sleep    5
    Capture Page Screenshot



Relogin CIM
    Close Browser
    Open Browser To Login Page After Startup

*** Multiline Comment ***
Get Fan Details
    Open Browser    https://${FUSION_IP}/#/login    firefox
    #fusion ui get fan details
    Wait Until Element Is Visible      id=hp-login-user
    ...                                timeout=300
    ...                                error=Not at Login page
    Input Text    hp-login-user        ${FUSION_USERNAME}
    Input Text    hp-login-password    ${FUSION_FACTORY_PASSWORD}
    Click Button    hp-login-button
    sleep    5
    #fusion ui get fan details
    fusion ui navigate to page         Enclosures
    #fusion ui navigate to fan details from tooltip     4
    #fusion ui navigate to fan details page
    #fusion ui get fan details
    fusion ui navigate to server hardware page
    fusion ui get server powerstatus      00HPMP2348, bay 5
    Capture Page Screenshot





*** Test Cases ***
#Cleanup
#    Close Browser
