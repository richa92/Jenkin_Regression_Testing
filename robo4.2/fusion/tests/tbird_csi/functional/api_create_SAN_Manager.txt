*** Settings ***
Documentation
...    = Usage =
...    | pybot | -L DEBUG | api_create_SAN_Manager.txt |
...    = Variables =
...    | ENCLOSURE | Required. Dictionary key from variables.py representing the desired enclosure. |

Library           Collections
Library           RoboGalaxyLibrary            # DVTs Robot Framework extensions
Library           FusionLibrary                # DVTs Robot Framework extensions
Variables         ../resources/variables.py    ${ENCLOSURE}
Variables	        ../resources/configFile.py
Resource          ../resources/fusion_api.txt  # DVT fusion API extensions

Force Tags        API    HW

Suite Setup       Login To Fusion Via REST
Suite Teardown    Logout Of Fusion Via REST

*** Variables ***


*** Test Cases ***

Create SAN Manager Body

    @{Payload_details}=    Run Keyword If    '${SAN_type}' == 'Brocade'    Create List    Host    ${SAN_IP}
    ...                    Port    5989    Username    ${SAN_Username}    Password    ${SAN_password} 
    ...                    UseSsl    true
    ...    ELSE IF    '${SAN_type}' == '5900' and '${Privacy_password}' == '0' and '${Auth_password}' == '0'    Create List    Host    ${SAN_IP}
    ...            SnmpPort    161    SnmpUserName    ${SAN_Username}    Password    ${SAN_password}    SnmpAuthLevel    NOAUTHNOPRIV  
    ...    ELSE IF    '${SAN_type}' == '5900' and '${Privacy_password}' == '0' and '${Auth_password}' != '0'    Create List    Host    ${SAN_IP}
    ...            SnmpPort    161    SnmpUserName    ${SAN_Username}    SnmpAuthLevel
    ...   			   AUTHNOPRIV    SnmpAuthProtocol    ${Auth_Protocol}    SnmpAuthString    ${Auth_password}  
    ...    ELSE IF    '${SAN_type}' == '5900' and '${Privacy_password}' != '0' and '${Auth_password}' != '0'    Create List    Host    ${SAN_IP}
    ...            SnmpPort    161    SnmpUserName    ${SAN_Username}    SnmpAuthLevel
    ...	    		   AUTHPRIV    SnmpAuthProtocol    ${Auth_Protocol}    SnmpAuthString    ${Auth_password}   
    ...			       SnmpPrivProtocol    ${Privacy_Protocol}    SnmpPrivString    ${Privacy_password}

    @{Payload_body}    Create List
    @{buffer}    Set Variable    @{Payload_details}
    : FOR    ${index}    IN    @{Payload_details}
      \  ${x}    Remove From List    ${Payload_details}    0
      \  ${y}    Remove From List    ${Payload_details}    0
      \  ${Temp}=    Create Dictionary    name     ${x}
      \  ...							                value    ${y}
      \  Append To List    ${Payload_body}    ${Temp}
      \  Run Keyword If    ${Payload_details} == []    Exit For Loop   
      
    ${Payload}    Create Dictionary    connectionInfo    ${Payload_body}

    Create SAN Manager    ${Payload}









 


  
