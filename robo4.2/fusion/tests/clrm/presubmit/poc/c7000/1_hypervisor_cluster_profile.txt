*** Settings ***

Documentation    Tests and verify clrm operation on c7000 enclosure

Library                         FusionLibrary
Library                         RoboGalaxyLibrary
Library                         OperatingSystem
Library                         BuiltIn
Library                         Collections
Library                         XML
Library                         String
Library                         json


Resource                        ../../../../Resources/api/fusion_api_resource.txt
Resource                        ../../support_files/clrm_common.txt
Resource                        ../../support_files/Deployment_Utils.robot
Library                         ../../support_files/clrm_support_functions.py
Suite Setup                     Setup Suite environment    ${Fusion_IP}     ${Fusion_credentials}
Suite Teardown                  Fusion Api Logout Appliance
#Test Setup                      Setup Test environment


*** Variables ***

#${Appliance}        10.1.1.21
${force}=        False

*** Test Cases ***
OVTC29210
    [Documentation]     Test case name : vCenter_1 From any REST client, with session header, url, content header and all the other arguments to REST API as mentioned in the REST API document,
    ...        Register a new vCenter with specified details type, hostname, username, Password, port, version
    [Tags]    I305_F326     Positive    Sanity
    Import Certificate to OV    ${vcenter[0]['name']}        ${Fusion_IP}     ${Fusion_credentials}        Vcenter
    ${validation}=    Convert to boolean    true
    Register vcenter    ${vCenter}    ${validation}
    Get vcenter        ${vCenter}
    Disconnect from vcenter        ${vCenter}

*** Keywords ***

Setup Suite environment
    [Documentation]    Setup Suite environment
    [Arguments]        ${Appliance}     ${admin_credentials}
    Set Log Level    Trace
    Fusion Api Login Appliance  ${Appliance}     ${admin_credentials}
    Remove All Alerts
    Power Off All Servers
    Sleep    120 seconds

Setup Test environment
    [Documentation]    Setup Suite environment
    connect_to_vi_server    ${vcenter[0]['name']}    ${vcenter[0]['username']}    ${vCenter_password}
    :FOR    ${switch}    in    @{dvs_delete}
    \    Run keyword and ignore error    remove_dvswitch    ${switch}
    disconnect_from_vi_server
    Remove All Alerts
