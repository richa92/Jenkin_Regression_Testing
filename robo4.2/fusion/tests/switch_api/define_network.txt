*** Settings ***
Documentation     US21997: Define Network
...    = Usage =
...    | pybot | -L DEBUG | -v FUSION_IP:<Your-FusionVM-IP> | define_network.txt |
...    = Variables =
...    | FUSION_IP | Required; IP address of the Fusion VM to use | 
...    = Preconditions =
...    Factory Reset Settings are required. (Level 0)


Library           RoboGalaxyLibrary                       # DVTs Robot Framework extensions
Variables         resources/variables.py    ${FUSION_IP}  # Comet-DVT default variables
Resource          resources/fusion.txt                    # Comet-DVT keyword extensions
Force Tags        CometTest    PreCAT    LEVEL0           # All test cases get these tags
Suite Setup       Login to Fusion Via REST
Suite Teardown    Logout of Fusion Via REST

*** Variables ***

*** Test Cases ***
Create Valid Network
    Create Ethernet Network    Good1    111
    ${Network}    Get Ethernet Network By Name    Good1
    Log    ${Network}
    
Create Duplicate Name
    Run Keyword and Expect Error    Invalid response returned 400 CRM_DUPLICATE_NETWORK_NAME A network with this name Good1 already exists.
    ...    Create Ethernet Network    Good1    112
    
Create Duplicate Number
    Run Keyword and Expect Error    Invalid response returned 400 CRM_DUPLICATE_VLAN_ID Another network with VLAN ID 111 already exists.
    ...    Create Ethernet Network    Bad1    111

Create Network With Invalid Id
    Run Keyword and Expect Error    Invalid response returned 400 INVALID_JSON_DATA_TYPE Invalid JSON data type.
    ...    Create Ethernet Network    Bad1    123456.34        # Non-Integer
    Run Keyword and Expect Error    Invalid response returned 400 INVALID_JSON_DATA_TYPE Invalid JSON data type.
    ...    Create Ethernet Network    Bad1    AbCd             # Non-numeric
    
#Create Network With Invalid Name
#    Create Ethernet Network    " "    112
#    Run Keyword and Expect Error    Cant find ethernet-network named Bad1: 0.0 != 1.0
#    ...    Get Ethernet Network By Id    112

Delete Network
    Delete Ethernet Network By Id    111
    Run Keyword and Expect Error    Cant find ethernet-network named Good1: 0.0 != 1.0
    ...    Get Ethernet Network By Name    Good1

Recreate Deleted Network
    Create Ethernet Network    Good1    111
    ${Network}    Get Ethernet Network By Name    Good1
    Log    ${Network}
    
Delete Network Again
    Delete Ethernet Network By Id    111
    Run Keyword and Expect Error    Cant find ethernet-network named Good1: 0.0 != 1.0
    ...    Get Ethernet Network By Name    Good1
    
Create Invalid Type Network 
     ${Network}    Create Dictionary    type=invalid-network 
     ...                                vlanId=112 
     ...                                name=InvalidType     
     ...                                purpose=General 
     ...                                smartLink=false     
     ...                                privateNetwork=false 
     ${Response}     Fusion Api Add Ethernet Networks    ${Network} 
     ${Status}       Get From Dictionary    ${Response}    status 
     Should Not be Equal    '${Status}' == '200'    ${Response} 
