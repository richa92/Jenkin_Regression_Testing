*** Settings ***
Documentation    Claim a HP 5900 AF switch - Create LIG, LI and validate OVuser account
...    = Usage =
...    | pybot | -v FUSION_IP:<Your-IP> | -v SWITCH_IP:<Your-IP> | -v LIG_NAME:<name> | -v LI_NAME:<name> | claim_5900.txt |
...    = Variables =
...    | FUSION IP | Required; IP address of the FusionVM to use | 
...    | SWITCH IP | Required; IP address or name of the switch to use | 
...    | LIG_NAME | Optional; default *LIG* |
...    | LI_NAME | Optional; default *LI* |
Library           SSHLibrary
Library           RoboGalaxyLibrary         # DVTs Robot Framework extensions
Library           FusionLibrary                  # DVTs Robot Framework extensions
Variables         resources/variables.py    ${FUSION_IP}    ${SWITCH_IP}    # Comet-DVT default variables 
Resource          resources/fusion.txt      # Comet-DVT keyword extensions
Resource          resources/switch.txt      # Comet-DVT switch keyword extensions
Force Tags        CometTest    Claim        # All test cases in sub test suites get these tags
Suite Setup       Login to Fusion Via REST
Suite Teardown    Logout of Fusion Via REST

*** Variables ***
@{InterconnectNamesList}    ${I_NAME}    ${null}    ${null}    ${null}    ${null}    ${null}    ${null}    ${null}

*** Test Cases ***
Setup Default Gateway IP in Fusion Switch Property file
	# FIXME: Workaround for Switch Gateway
    log    ${SWITCH_GATEWAY_IP}
    Setup Switch Gateway IP
    
Create Logical Interconnect Group    # With Interconnects
    Create Logical Interconnect Group    ${LIG_NAME}    @{InterconnectNamesList}

Check for OVuser Not Present
    Verify OVuser is Not Present

Setup Switch Gateway Address in Fusion VM
    Setup Switch Gateway IP    ${SWITCH_GATEWAY_IP} 

Create Logical Interconnect
    ${LigUri}    Get Logical Interconnect Group Uri    ${LIG_NAME}
    Create Logical Interconnect    ${LI_NAME}    ${LigUri}

Check for OVuser Present
    Verify OVuser is Present
