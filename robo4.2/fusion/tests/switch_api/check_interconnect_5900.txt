*** Settings ***
Documentation     Check Interconnect Part Number
...    = Usage =
...    | pybot | -L DEBUG | -v FUSION_IP:<Your-FusionVM-IP> | check_interconnect_5900.txt | 
...    = Variables =
...    | FUSION IP | Required; IP address of the Fusion VM to use | 
...    | 5900_PN | Optional; Part number for a 5900 switch. Default is *JC772A* | 
...    = Preconditions =
...    One or more Interconnects are required. (Level 2)

Library           Collections
Library           RoboGalaxyLibrary                       # DVTs Robot Framework extensions
Variables         resources/variables.py    ${FUSION_IP}  # Comet-DVT default variables
Resource          resources/fusion.txt                    # Comet-DVT keyword extensions
Force Tags        CometTest    PreCAT    LEVEL2           # All test cases get these tags
Suite Setup       Login to Fusion Via REST
Suite Teardown    Logout of Fusion Via REST

*** Variables ***
${5900_PN}       JC772A

*** Test Cases ***
Verify Interconnect Part Number For 5900
    ${found}    Set variable    ${False}
    ${interconnects}=    Fusion Api Get Interconnects
    ${members}     Get From Dictionary    ${interconnects}    members
    ${count}       Get From Dictionary    ${interconnects}    count
    : FOR    ${Index}    IN RANGE    0    ${count}
    \    ${interconnect}=      Get From Dictionary    ${members}    ${Index}
    \    ${partNumber}      Get From Dictionary     ${interconnect}     partNumber
    \    Continue For Loop if      '${partNumber}'!='${5900_PN}'
    \    log    '5900 found at slot '${Index}+1
    \    ${found}    Set Variable     ${True}
    Should Be True    ${found}     msg=No 5900 switch was found
