*** Settings ***
Library				RoboGalaxyLibrary
Library				FusionLibrary
Library				OperatingSystem
Library				BuiltIn
Library				Collections
Library				XML
Library		        SSHLibrary
Library				String
Library				Dialogs
Library             ./TrapHelper.py

*** Keywords ***
Get Appliance Trap Destination By Id
    [Arguments]		${trap_destination}
    [Documentation]     Get the trap destination by id.
    ...                 {"destination":"linux-testhead.vse.rdlabs.hpecorp.net","communityString":"fvttest","uri":"/rest/appliance/trap-destinations/1","port":1161}
    ${id} =  set variable  ${trap_destination['uri'][-1]}
    ${resp} = 	fusion api get appliance trap destinations  id=${id}
    Should Be Equal  '${resp['status_code']}'  '200'  msg=Get appliance trap destination by id status code should match 200
    [Return]  ${resp}

Validate Appliance Trap Destination
    [Arguments]		${trap_destination}
    [Documentation]     Validate a trap destination.
    ...                 {"destination":"linux-testhead.vse.rdlabs.hpecorp.net","communityString":"fvttest","uri":"/rest/appliance/trap-destinations/1","port":1161}
    ${resp} =  fusion api validate appliance trap destination  body=${trap_destination}
    Should Be Equal  '${resp['status_code']}'  '200'  msg=Validate appliance trap destination status code should match 200
    [Return]  ${resp}

Add Appliance Trap Destination
    [Arguments]		${trap_destination}
    [Documentation]     Add a trap destination.
    ...                 {"destination":"linux-testhead.vse.rdlabs.hpecorp.net","communityString":"fvttest","uri":"/rest/appliance/trap-destinations/1","port":1161}
    Validate Appliance Trap Destination  ${trap_destination}
    ${id} =  set variable  ${trap_destination['uri'][-1]}
    ${resp} =  fusion api add or update appliance trap destination  body=${trap_destination}  id=${id}
    Should Be Equal  '${resp['status_code']}'  '200'  msg=Add appliance trap destination status code should match 200
    [Return]  ${resp}

Delete Appliance Trap Destination
    [Arguments]		${trap_destination}
    [Documentation]     Delete a trap destination associated with id
    ...                 {"destination":"linux-testhead.vse.rdlabs.hpecorp.net","communityString":"fvttest","uri":"/rest/appliance/trap-destinations/1","port":1161}
    ${id} =  set variable  ${trap_destination['uri'][-1]}
    ${resp} =  fusion api delete appliance trap destination  id=${id}
    Should Be Equal  '${resp['status_code']}'  '200'  msg=Delete appliance trap destination status code should match 200
    [Return]  ${resp}

