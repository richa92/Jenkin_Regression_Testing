*** Settings ***
Library				RoboGalaxyLibrary
Library				FusionLibrary
Library				OperatingSystem
Library				BuiltIn
Library				Collections
Library				XML
Library		        SSHLibrary
Library				String
Library				Dialogs

*** Keywords ***
Get Managed SAN URI
    [Documentation]    Get Managed SAN's URI by Name
    [Arguments]    ${name}
    ${resp} =    Fusion API Get Managed SAN  param=?query=name eq '${name}'
	${count} =  Get From Dictionary  ${resp}  count
	Return From Keyword If  ${count}==0  /rest/managed_san_uri_${name}_not_found
	${uri} = 	Get From Dictionary		${resp['members'][0]}	uri
	[Return]	${uri}

SANs Attribute ${attribute} Should Have Value ${value}
    [Documentation]    Check Status of SANs
    ...    Fail the test in case of Status other than OK
    ${sans} =    Fusion API Get Managed SAN
    Run Keyword If  ${sans['count']}=='0'  Fail  No Sans found
    ${res} =  Set Variable  ${empty}
    :FOR  ${san}  IN  @{sans['members']}
    \  ${res} =  Run Keyword If  '${san['${attribute}']}' != '${value}'  Catenate  ${res}
    ...     \nSAN name [${san['name']}] Expected ${attribute} ${value} but found ${san['${attribute}']}
    \  ...  ELSE  Set Variable  ${res}
    ${count} =  Get Length  ${res}
    Run Keyword If  '${count}' > '0'  Fail  ${res}
