*** Settings ***
Library             RoboGalaxyLibrary
Library             FusionLibrary
Library             OperatingSystem
Library             BuiltIn
Library             Collections
Library             XML
Library             SSHLibrary
Library             String
Library             Dialogs
Library             json
Library             copy

Resource            ../fusion_api_resource.txt


*** Keywords ***
Hypervisor Host Profiles Attribute ${attribute} Should Have Value ${value}
    [Documentation]    Hpervisor Host Profile Status Should be expected
    ${profiles} =   Fusion Api Get Hypervisor Host Profile
    # Make sure we get (more than zero) profile listed
    Run Keyword If  '${profiles['count']}'=='0'    Fail    msg=No Hypervisor Host Profile found
    ${res} =  Set Variable  ${empty}
    :FOR    ${profile}  IN  @{profiles['members']}
    \  ${res} =  Run Keyword If  '${profile['${attribute}']}' != '${value}'  Catenate  ${res}
    ...     \nHypervisor Host Profile name [${profile['name']}] Expected ${attribute} ${value} but found ${profile['${attribute}']}
    \  ...  ELSE  Set Variable  ${res}
    ${count} =  Get Length  ${res}
    Run Keyword If  '${count}' > '0'  Fail  ${res}
