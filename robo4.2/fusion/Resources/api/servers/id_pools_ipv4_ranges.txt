*** Settings ***
Library				RoboGalaxyLibrary
Library				FusionLibrary
Library				OperatingSystem
Library				BuiltIn
Library				Collections
Library				XML
Library		        SSHLibrary
Library				String
Library				Dialogs

Resource         	../fusion_api_resource.txt
Resource			id_pools_ipv4_subnet.txt

*** Keywords ***

Create ID Pools IPV4 Ranges
	[Documentation]	Adds IPV4 Ranges to an appliance from a variable which contains a list of dicts with the entire payload.
	...				Data File Example :
	...				ipv4_ranges = [{"type": "Range","name": "IPV4","startAddress": "15.146.152.100","endAddress": "15.146.152.200",
	...				"subnetUri": "<Pass network id used while registering subnet, without '<>' >"}]

	[Arguments]		${ipv4_ranges}		${STATUS_CODE}=200

	Log    Registering IPV4 Ranges    console=true
	:FOR	${range}	IN	@{ipv4_ranges}
	\	${uri} =    Get ID Pools IPV4 Subnet URI By Network ID	${range['subnetUri']}
	\	Set to Dictionary	${range}	subnetUri	${uri}
	\	${resp} =  Fusion api create ipv4 range 	${range}
	\	should be equal as integers  ${resp['status_code']}  ${STATUS_CODE}

Remove all ID Pools IPV4 Range
	[Documentation]    Removes all ID Pools IPV4 Range on appliance
	${resp}    fusion_api_get_ipv4_range
	Log to console and logfile    ${resp}
	:FOR   ${rangeuri}    in    @{resp['rangeUris']}
	\	${resp}    fusion_api_delete_ipv4_range    uri=${rangeuri}
	\	should be equal as integers  ${resp['status_code']}  204
